!function(t){function e(e){for(var a,o,r=e[0],l=e[1],c=e[2],d=0,m=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&m.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);for(u&&u(e);m.length;)m.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,r=1;r<s.length;r++){var l=s[r];0!==i[l]&&(a=!1)}a&&(n.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},i={app:0},n=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=(l=window.webpackJsonp=window.webpackJsonp||[]).push.bind(l);l.push=e;for(var l=l.slice(),c=0;c<l.length;c++)e(l[c]);var u=r;n.push([0,"chunk-vendors"]),s()}({0:function(t,e,s){t.exports=s("56d7")},"0307":function(t,e,s){},"034f":function(t,e,s){"use strict";s("85ec")},"046c":function(t,e,s){"use strict";var a=s("e5dd");e.default=s.n(a).a},"05c1":function(t,e,s){"use strict";s("d195")},"0658":function(t,e,s){},"0661":function(t,e,s){},"06c9":function(t,e,s){},"0b08":function(t,e,s){"use strict";s("24f0")},"0bb5":function(t,e,s){"use strict";s("c2a1")},"0cd9":function(t,e,s){"use strict";s("b630")},"0dfa":function(t,e,s){},"0f8d":function(t,e,s){"use strict";s("960d")},1033:function(t,e,s){},1094:function(t,e,s){},1188:function(t,e,s){},"11f5":function(t,e,s){"use strict";s("4e31")},"1b0b":function(t,e,s){"use strict";s("9216")},"1f01":function(t,e,s){"use strict";s("773c")},"1f05":function(t,e,s){},"1f99":function(t,e,s){},"1fb8":function(t,e,s){"use strict";s("2364")},2364:function(t,e,s){},"24f0":function(t,e,s){},"2fa9":function(t,e,s){"use strict";s("470b")},3194:function(t,e,s){"use strict";s("3e5c")},"32d0":function(t,e,s){"use strict";s("1094")},"34d2":function(t,e,s){"use strict";s("74df")},3656:function(t,e,s){"use strict";s("9ae4")},3992:function(t,e,s){"use strict";s("947b")},"3d5c":function(t,e,s){"use strict";s("0658")},"3e5c":function(t,e,s){},4090:function(t,e,s){"use strict";s("8d81")},4243:function(t,e,s){},"432c":function(t,e,s){"use strict";s("0307")},"438a":function(t,e,s){"use strict";s("6950")},4599:function(t,e,s){},"470b":function(t,e,s){},"49c4":function(t){t.exports=JSON.parse('["😀","😄","😁","😆","😅","🤣","😂","🙂","🙃","😉","😊","😇","🥰","😍","🤩","😘","😗","😚","😙","😋","😛","😜","🤪","😝","🤑","🤗","🤭","🤫","🤔","🤐","🤨","😐","😶","😶‍🌫️","😏","😒","🙄","😬","😮‍💨","🤥","😌","😔","😪","🤤","😴","😷","🤒","🤕","🤢","🤮","🤧","🥵","🥶","🥴","😵","😵‍💫","🤯","🤠","🥳","😎","🤓","🧐","😕","😟","🙁","☹️","😮","😯","😲","😳","🥺","😦","😧","😨","😰","😥","😢","😭","😱","😖","😣","😞","😓","😩","😫","🥱","😤","😡","😠","🤬","😈","👿","💀","☠️","💩","🤡","👹","👺","👻","👽","👾","🤖","😺","😸","😹","😻","😼","😽","🙀","😿","😾","🙈","🙉","🙊","💋","💌","💘","💝","💖","💗","💓","💞","💕","💟","❣️","❣","💔","❤️‍🔥","❤‍🩹","❤️","❤","🧡","💛","💚","💙","💜","🤎","🖤","🤍","💯","💢","💥","💫","💦","💨","🕳️","🕳","💣","💬","👁️‍🗨️","🗨️","🗨","🗯️","🗯","💭","💤","🙋","🙇","🙌","🙏","🚶","🏃","👯","💃","👫","👬","👭","💏","💑","👪","💪","👈","👉","☝","👆","👇","✌","✋","👌","👍","👎","✊","👊","👋","👏","👐","✍","🐁","🐂","🐅","🐇","🐉","🐍","🐎","🐐","🐒","🐓","🐕","🐖","💐","🌸","💮","🌹","🌺","🌻","🌼","🌷","🌱","🌿","🍀"]')},"4a0b":function(t,e,s){"use strict";s("dd78")},"4be1":function(t,e,s){},"4db3":function(t,e,s){},"4e31":function(t,e,s){},"4f0a":function(t,e,s){},"55c6":function(t,e,s){"use strict";s("1188")},"56d7":function(t,e,s){"use strict";function a(t,e){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:4e3;return null!=d&&d.close(),d=n.a.prototype.$msg({type:t,message:e,zIndex:3e3,position:"top-center",duration:s})}s.r(e),s("4de4"),s("4160"),s("b64b"),s("159b"),s("e260"),s("e6cf"),s("cca6"),s("a79d");var i=s("8bbf"),n=s.n(i),o=(s("ac1f"),s("1276"),s("5530")),r=(s("b680"),s("5880")),l=s.n(r),c=(s("d3b7"),s("cebe")),u=s.n(c),d=null,m={error:function(t){return a("error",t)},success:function(t){return a("success",t)},info:function(t){return a("info",t)},warning:function(t){return a("warning",t)},loading:function(t){return a("loading",t)},message:a},p=(s("99af"),s("45fc"),s("6062"),s("3ca3"),s("ddb0"),s("2909")),f=s("6389"),h=s.n(f),g=s("31bd"),b={data:function(){return{logining:!1,ruleForm2:{username:"",password:""},rules2:{username:[{required:!0,trigger:"blur"}],password:[{required:!0,trigger:"blur"}]},checked:!0}},methods:{handleLogin:function(t){var e=this;this.$refs.ruleForm2.validate((function(t){t?(e.logining=!0,Dt.admin_login(e.ruleForm2.username,e.ruleForm2.password).then((function(t){e.logining=!1;var s=t.headers.authorization;e.$store.commit("changeUserToken",s),e.$store.dispatch("setUserInfo",t.data.data),m.success("尊敬的管理员，欢迎回来~"),e.$router.push({name:"admin-dashboard"})}),(function(){e.logining=!1}))):m.error("请检查您的用户名和密码输入是否正确")}))}}},v=(s("e156"),s("2877")),w=Object(v.a)(b,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",[e("vue-particles",{attrs:{color:"#dedede",particleOpacity:.7,particlesNumber:80,shapeType:"circle",particleSize:4,linesColor:"#dedede",linesWidth:1,lineLinked:!0,lineOpacity:.4,linesDistance:150,moveSpeed:3,hoverEffect:!0,hoverMode:"grab",clickEffect:!0,clickMode:"push"}}),e("div",{staticClass:"form"},[e("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm login-container",attrs:{model:t.ruleForm2,rules:t.rules2,"label-position":"left","label-width":"0px"}},[e("h1",{staticClass:"title"},[t._v("HOJ后台管理")]),e("el-form-item",{attrs:{prop:"username"}},[e("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"Please enter username"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin(e)}},model:{value:t.ruleForm2.username,callback:function(e){t.$set(t.ruleForm2,"username",e)},expression:"ruleForm2.username"}})],1),e("el-form-item",{attrs:{prop:"password"}},[e("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"Please enter password"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin(e)}},model:{value:t.ruleForm2.password,callback:function(e){t.$set(t.ruleForm2,"password",e)},expression:"ruleForm2.password"}})],1),e("el-form-item",{staticStyle:{width:"100%"}},[e("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:t.logining},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin(e)}}},[t._v("GO ")])],1)],1)],1)],1)}),[],!1,null,"6d22df9e",null).exports,y=s("5ce2"),C=s.n(y),_={name:"",data:function(){return{input:"c = \\pm\\sqrt{a^2 + b^2}",text:""}},mounted:function(){this.text=this.renderTex(this.input)},methods:{renderTex:function(t){return C.a.renderToString(t,{displayMode:!0,throwOnError:!1})},changeInput:function(){try{this.text=this.renderTex(this.input)}catch(t){this.text='<p style="text-align: center"><span style="color:red">Error Input</span></p>'}}}},k=Object(v.a)(_,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("el-form",[e("el-form-item",{attrs:{label:"Input"}},[e("el-input",{attrs:{type:"textarea"},on:{change:t.changeInput},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.changeInput(e)}},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1),e("el-form-item",{attrs:{label:"Output"}}),e("div",{domProps:{innerHTML:t._s(t.text)}})],1)}),[],!1,null,"d97c4d2e",null).exports,x=s("4a89"),S=s.n(x),T={name:"app",mounted:function(){var t=this;this.currentPath=this.$route.path,this.getBreadcrumb(),window.onresize=function(){t.page_width()},this.page_width()},data:function(){return{openusermenu:!1,openSideMenu:"",katexVisible:!1,opendrawer:!1,mobileNar:!1,currentPath:"",routeList:[],imgUrl:s("9e3d")}},components:{KatexEditor:k,Avatar:S.a},methods:{handleCommand:function(t){var e=this;"logout"===t&&Dt.admin_logout().then((function(t){e.$router.push({path:"/admin/login"}),m.success(t.data.msg),e.$store.commit("clearUserInfoAndToken")}))},page_width:function(){var t=window.screen.width;this.mobileNar=t<1080},getBreadcrumb:function(){var t=this.$route.matched.filter((function(t){return t.meta.title}));this.routeList=t}},computed:Object(o.a)({},Object(r.mapGetters)(["userInfo","isSuperAdmin","isAuthenticated","websiteConfig"])),watch:{$route:function(){this.getBreadcrumb()}}},P=(s("d62b"),Object(v.a)(T,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"admin-container"},[t.mobileNar?s("div",[s("mu-appbar",{staticClass:"mobile-nav",attrs:{color:"primary"}},[s("mu-button",{attrs:{slot:"left",icon:""},on:{click:function(e){t.opendrawer=!t.opendrawer}},slot:"left"},[s("i",{staticClass:"el-icon-s-unfold"})]),t._v(" "+t._s(t.websiteConfig.shortName?t.websiteConfig.shortName.toUpperCase()+" ADMIN":"OJ ADMIN")+" "),s("mu-menu",{directives:[{name:"show",rawName:"v-show",value:t.isAuthenticated,expression:"isAuthenticated"}],attrs:{slot:"right"},slot:"right"},[s("mu-button",{attrs:{flat:""},on:{click:function(e){t.katexVisible=!0}}},[s("i",{staticClass:"fa fa-font katex-editor"})])],1),s("mu-menu",{directives:[{name:"show",rawName:"v-show",value:t.isAuthenticated,expression:"isAuthenticated"}],attrs:{slot:"right",open:t.openusermenu},on:{"update:open":function(e){t.openusermenu=e}},slot:"right"},[s("mu-button",{attrs:{flat:""}},[t._v(" "+t._s(t.userInfo.username)),s("i",{staticClass:"el-icon-caret-bottom"})]),s("mu-list",{attrs:{slot:"content"},on:{change:t.handleCommand},slot:"content"},[s("mu-list-item",{attrs:{button:"",value:"logout"}},[s("mu-list-item-content",[s("mu-list-item-title",[t._v("Logout")])],1)],1)],1)],1)],1),s("mu-drawer",{attrs:{open:t.opendrawer,docked:!1,right:!1},on:{"update:open":function(e){t.opendrawer=e}}},[s("mu-list",{attrs:{"toggle-nested":""}},[s("mu-list-item",{attrs:{button:"",ripple:!0,nested:"",to:"/admin/dashboard","active-class":"mobile-menu-active"},on:{click:function(e){t.opendrawer=!t.opendrawer}}},[s("mu-list-item-action",[s("mu-icon",{attrs:{value:"dashboard",size:"24"}})],1),s("mu-list-item-title",[t._v("Dashboard")])],1),t.isSuperAdmin?s("mu-list-item",{attrs:{button:"",ripple:!1,nested:"",open:"general"===t.openSideMenu},on:{"toggle-nested":function(e){t.openSideMenu=e?"general":""}}},[s("mu-list-item-action",[s("mu-icon",{attrs:{value:"view_list"}})],1),s("mu-list-item-title",[t._v("General")]),s("mu-list-item-action",[s("mu-icon",{staticClass:"toggle-icon",attrs:{size:"24",value:"keyboard_arrow_down"}})],1),s("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!1,to:"/admin/user","active-class":"mobile-menu-active"},on:{click:function(e){t.opendrawer=!t.opendrawer}},slot:"nested"},[s("mu-list-item-title",[t._v("User")])],1),s("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!1,to:"/admin/announcement","active-class":"mobile-menu-active"},on:{click:function(e){t.opendrawer=!t.opendrawer}},slot:"nested"},[s("mu-list-item-title",[t._v("Announcement")])],1),s("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!1,to:"/admin/conf","active-class":"mobile-menu-active"},on:{click:function(e){t.opendrawer=!t.opendrawer}},slot:"nested"},[s("mu-list-item-title",[t._v("System Config")])],1)],1):t._e(),s("mu-list-item",{attrs:{button:"",ripple:!1,nested:"",open:"problem"===t.openSideMenu},on:{"toggle-nested":function(e){t.openSideMenu=e?"problem":""}}},[s("mu-list-item-action",[s("mu-icon",{attrs:{value:"menu"}})],1),s("mu-list-item-title",[t._v("Problem")]),s("mu-list-item-action",[s("mu-icon",{staticClass:"toggle-icon",attrs:{size:"24",value:"keyboard_arrow_down"}})],1),s("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!1,to:"/admin/problems","active-class":"mobile-menu-active"},on:{click:function(e){t.opendrawer=!t.opendrawer}},slot:"nested"},[s("mu-list-item-title",[t._v("Problem List")])],1),s("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!1,to:"/admin/problem/create","active-class":"mobile-menu-active"},on:{click:function(e){t.opendrawer=!t.opendrawer}},slot:"nested"},[s("mu-list-item-title",[t._v("Create Problem")])],1),s("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!1,to:"/admin/problem/batch-operation","active-class":"mobile-menu-active"},on:{click:function(e){t.opendrawer=!t.opendrawer}},slot:"nested"},[s("mu-list-item-title",[t._v("Export&Import Problem")])],1)],1),s("mu-list-item",{attrs:{button:"",ripple:!1,nested:"",open:"contest"===t.openSideMenu},on:{"toggle-nested":function(e){t.openSideMenu=e?"contest":""}}},[s("mu-list-item-action",[s("mu-icon",{attrs:{value:":fa fa-trophy"}})],1),s("mu-list-item-title",[t._v("Contest")]),s("mu-list-item-action",[s("mu-icon",{staticClass:"toggle-icon",attrs:{size:"24",value:"keyboard_arrow_down"}})],1),s("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!1,to:"/admin/contest","active-class":"mobile-menu-active"},on:{click:function(e){t.opendrawer=!t.opendrawer}},slot:"nested"},[s("mu-list-item-title",[t._v("Contest List")])],1),s("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!1,to:"/admin/contest/create","active-class":"mobile-menu-active"},on:{click:function(e){t.opendrawer=!t.opendrawer}},slot:"nested"},[s("mu-list-item-title",[t._v("Create Contest")])],1)],1),s("mu-list-item",{attrs:{button:"",ripple:!1,nested:"",open:"discussion"===t.openSideMenu},on:{"toggle-nested":function(e){t.openSideMenu=e?"discussion":""}}},[s("mu-list-item-action",[s("mu-icon",{attrs:{value:":fa fa-comments"}})],1),s("mu-list-item-title",[t._v("Discussion")]),s("mu-list-item-action",[s("mu-icon",{staticClass:"toggle-icon",attrs:{size:"24",value:"keyboard_arrow_down"}})],1),s("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!1,to:"/admin/discussion","active-class":"mobile-menu-active"},on:{click:function(e){t.opendrawer=!t.opendrawer}},slot:"nested"},[s("mu-list-item-title",[t._v("Discussion Admin")])],1)],1)],1)],1)],1):s("div",[s("el-menu",{staticClass:"vertical_menu",attrs:{router:!0,"default-active":t.currentPath}},[s("div",{staticClass:"logo"},[s("img",{attrs:{src:t.imgUrl,alt:"oj admin"}})]),s("el-menu-item",{attrs:{index:"/admin/"}},[s("i",{staticClass:"fa fa-tachometer",attrs:{"aria-hidden":"true"}}),t._v("Dashboard ")]),t.isSuperAdmin?s("el-submenu",{attrs:{index:"general"}},[s("template",{slot:"title"},[s("i",{staticClass:"el-icon-menu"}),t._v("General")]),s("el-menu-item",{attrs:{index:"/admin/user"}},[t._v("User")]),s("el-menu-item",{attrs:{index:"/admin/announcement"}},[t._v("Announcement")]),s("el-menu-item",{attrs:{index:"/admin/conf"}},[t._v("System Config")])],2):t._e(),s("el-submenu",{attrs:{index:"problem"}},[s("template",{slot:"title"},[s("i",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}}),t._v("Problem")]),s("el-menu-item",{attrs:{index:"/admin/problems"}},[t._v("Problem List")]),s("el-menu-item",{attrs:{index:"/admin/problem/create"}},[t._v("Create Problem")]),s("el-menu-item",{attrs:{index:"/admin/problem/batch-operation"}},[t._v("Export&Import Problem")])],2),s("el-submenu",{attrs:{index:"contest"}},[s("template",{slot:"title"},[s("i",{staticClass:"fa fa-trophy",attrs:{"aria-hidden":"true"}}),t._v("Contest")]),s("el-menu-item",{attrs:{index:"/admin/contest"}},[t._v("Contest List")]),s("el-menu-item",{attrs:{index:"/admin/contest/create"}},[t._v("Create Contest")])],2),s("el-submenu",{attrs:{index:"discussion"}},[s("template",{slot:"title"},[s("i",{staticClass:"fa fa-comments",attrs:{"aria-hidden":"true"}}),t._v("Discussion")]),s("el-menu-item",{attrs:{index:"/admin/discussion"}},[t._v("Discussion Admin")])],2)],1),s("div",{attrs:{id:"header"}},[s("el-row",[s("el-col",{attrs:{span:20}},[s("div",{staticClass:"breadcrumb-container"},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/admin/"}}},[t._v("Home page")]),t._l(t.routeList,(function(e){return s("el-breadcrumb-item",{key:e.path},[t._v(" "+t._s(e.meta.title)+" ")])}))],2)],1)]),s("el-col",{directives:[{name:"show",rawName:"v-show",value:t.isAuthenticated,expression:"isAuthenticated"}],attrs:{span:4}},[s("i",{staticClass:"fa fa-font katex-editor",on:{click:function(e){t.katexVisible=!0}}}),s("avatar",{staticClass:"drop-avatar",attrs:{username:t.userInfo.username,inline:!0,size:30,color:"#FFF",src:t.userInfo.avatar}}),s("el-dropdown",{staticStyle:{"vertical-align":"middle"},on:{command:t.handleCommand}},[s("span",[t._v(t._s(t.userInfo.username)),s("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"logout"}},[t._v("Logout")])],1)],1)],1)],1)],1)],1),s("div",{staticClass:"content-app"},[s("transition",{attrs:{name:"fadeInUp",mode:"out-in"}},[s("router-view")],1)],1),s("el-dialog",{attrs:{title:"Latex Editor",visible:t.katexVisible,width:"350px"},on:{"update:visible":function(e){t.katexVisible=e}}},[s("KatexEditor")],1)],1)}),[],!1,null,"1af04340",null).exports),E=(s("fb6a"),s("b0c0"),s("b085")),I=(s("a9e3"),{name:"inforCard",props:{value:[String,Number],color:String,message:String,icon:String,iconSize:{type:String,default:"35px"},countSize:{type:String,default:"25px"},countWeight:{type:Number,default:700}},computed:{textStyle:function(){return{"font-size":this.countSize,"font-weight":this.countWeight,color:this.color}}}}),D=(s("6497"),{name:"dashboard",components:{InfoCard:Object(v.a)(I,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("el-card",{staticClass:"info-card",attrs:{"body-style":{padding:0,height:"100%"}}},[e("el-row",{staticClass:"info-card-container",attrs:{type:"flex"}},[e("el-col",{staticClass:"height-100",style:{"background-color":t.color},attrs:{span:8}},[e("i",{class:["info-card-icon",t.icon],style:{"font-size":t.iconSize}})]),e("el-col",{staticClass:"info-card-text",attrs:{span:16}},[e("p",{style:t.textStyle},[t._v(t._s(t.value))]),e("p",{staticStyle:{"font-weight":"300"}},[t._v(t._s(t.message))])])],1)],1)}),[],!1,null,"22d18a98",null).exports},data:function(){return{infoData:{userNum:0,recentContestNum:0,todayJudgeNum:0},generalInfo:{backupCores:0,backupPercentCpuLoad:"0%",backupPercentMemoryLoad:"0%",backupService:[],nacos:{}},judgeInfo:[],session:{}}},mounted:function(){var t=this;this.refreshJudgeServerList(),this.refreshGeneralSystemInfo(),this.intervalId=setInterval((function(){t.refreshJudgeServerList(),t.refreshGeneralSystemInfo()}),5e3),Dt.admin_getDashboardInfo().then((function(e){t.infoData=e.data.data}),(function(){})),Dt.getSessions(this.userInfo.uid).then((function(e){t.session=e.data.data}),(function(){}))},methods:{refreshJudgeServerList:function(){var t=this;Dt.getJudgeServer().then((function(e){t.judgeInfo=e.data.data}),(function(e){clearInterval(t.intervalId)}))},refreshGeneralSystemInfo:function(){var t=this;Dt.admin_getGeneralSystemInfo().then((function(e){t.generalInfo=e.data.data,t.generalInfo.backupService[0].backupCores=t.generalInfo.backupCores,t.generalInfo.backupService[0].backupPercentCpuLoad=t.generalInfo.backupPercentCpuLoad,t.generalInfo.backupService[0].backupPercentMemoryLoad=t.generalInfo.backupPercentMemoryLoad}),(function(){clearInterval(t.intervalId)}))}},computed:Object(o.a)(Object(o.a)({},Object(r.mapGetters)(["userInfo","isSuperAdmin"])),{},{https:function(){return"https"===document.URL.slice(0,5)},browser:function(){var t=Object(E.a)(this.session.userAgent);return t.name&&t.version?t.name+" "+t.version:"Unknown"},os:function(){var t=Object(E.a)(this.session.userAgent);return t.os||"Unknown"}}),beforeRouteLeave:function(t,e,s){clearInterval(this.intervalId),s()}}),R=(s("9ce8"),Object(v.a)(D,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{xs:24,md:10,lg:8}},[s("el-card",{staticClass:"admin-info"},[s("div",{attrs:{slot:"header"},slot:"header"},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:10}},[s("img",{staticClass:"avatar",attrs:{src:t.userInfo.avatar}})]),s("el-col",{attrs:{span:14}},[s("span",{staticClass:"panel-title admin-info-name"},[t._v(t._s(t.userInfo.username))]),s("p",[t._v(t._s(1==t.isSuperAdmin?"超级管理员":"管理员"))])])],1)],1),s("div",{staticClass:"last-info"},[s("p",{staticClass:"last-info-title home-title"},[t._v("Last Login")]),s("el-form",{staticClass:"last-info-body",attrs:{"label-width":"80px"}},[s("el-form-item",{attrs:{label:"Time:"}},[s("span",[t._v(t._s(t._f("localtime")(t.session.gmtCreate)))])]),s("el-form-item",{attrs:{label:"IP:"}},[s("span",[t._v(t._s(t.session.ip))])]),s("el-form-item",{attrs:{label:"OS:"}},[s("span",[t._v(t._s(t.os))])]),s("el-form-item",{attrs:{label:"Browser:"}},[s("span",[t._v(t._s(t.browser))])])],1)],1)])],1),s("el-col",{attrs:{xs:24,md:14,lg:16}},[s("div",{staticClass:"info-container"},[s("info-card",{staticClass:"info-item",attrs:{color:"#909399",icon:"fa fa-users",message:"Total Users",iconSize:"30px",value:t.infoData.userNum}}),s("info-card",{staticClass:"info-item",attrs:{color:"#67C23A",icon:"fa fa-list",message:"Today Submissions",value:t.infoData.todayJudgeNum}}),s("info-card",{staticClass:"info-item",attrs:{color:"#409EFF",icon:"fa fa-trophy",message:"Recent 14 Days Contests",value:t.infoData.recentContestNum}})],1),s("el-card",[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title home-title"},[t._v("General System")])]),s("el-row",[s("el-col",{attrs:{xs:24,md:8}},[s("span",[t._v("HOJ Server Num： "),s("el-tag",{attrs:{effect:"dark",color:"#2d8cf0",size:"mini"}},[t._v(t._s(t.generalInfo.backupService.length))])],1)]),s("el-col",{attrs:{xs:24,md:8}},[s("span",[t._v("Nacos Status： "),"UP"==t.generalInfo.nacos.status?s("el-tag",{attrs:{effect:"dark",color:"#19be6b",size:"mini"}},[t._v(t._s(t.generalInfo.nacos.status))]):s("el-tag",{attrs:{effect:"dark",color:"#f90",size:"mini"}},[t._v(t._s(t.generalInfo.nacos.status))])],1)]),s("el-col",{attrs:{xs:24,md:8}},[s("span",[t._v("Https Status： "),s("el-tag",{attrs:{type:t.https?"success":"danger",size:"small",effect:"dark"}},[t._v(" "+t._s(t.https?"Enabled":"Disabled")+" ")])],1)])],1),s("h2",{staticClass:"home-title"},[t._v("Backup Service")]),s("vxe-table",{attrs:{stripe:"","auto-resize":"",data:t.generalInfo.backupService,align:"center"}},[s("vxe-table-column",{attrs:{title:"Name","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",[t._v(t._s(e.serviceId))])]}}])}),s("vxe-table-column",{attrs:{field:"host",title:"Host","min-width":"110"}}),s("vxe-table-column",{attrs:{field:"port",title:"Port","min-width":"80"}}),s("vxe-table-column",{attrs:{"min-width":"80",field:"backupCores",title:"CPU Core"}}),s("vxe-table-column",{attrs:{"min-width":"100",field:"backupPercentCpuLoad",title:"CPU Usage"}}),s("vxe-table-column",{attrs:{"min-width":"100",field:"backupPercentMemoryLoad",title:"Mem Usage"}}),s("vxe-table-column",{attrs:{field:"secure",title:"Secure","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("el-tooltip",{attrs:{content:"是否触发保护阈值",placement:"top"}},[e.secure?s("el-tag",{attrs:{effect:"dark",color:"#ed3f14"}},[t._v("True")]):s("el-tag",{attrs:{effect:"dark",color:"#2d8cf0"}},[t._v("False")])],1)]}}])}),s("vxe-table-column",{attrs:{title:"Healthy","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["true"==e.row.metadata["nacos.healthy"]?s("el-tag",{attrs:{effect:"dark",color:"#19be6b"}},[t._v("Healthy")]):s("el-tag",{attrs:{effect:"dark",color:"#f90"}},[t._v("Unhealthy")])]}}])})],1)],1)],1)],1),s("el-card",{staticStyle:{"margin-top":"10px"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title home-title"},[t._v("Judger Service")])]),s("vxe-table",{attrs:{stripe:"","auto-resize":"",data:t.judgeInfo,align:"center"}},[s("vxe-table-column",{attrs:{type:"seq",width:"50"}}),s("vxe-table-column",{attrs:{title:"Name","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",[t._v(t._s(e.service.serviceId))])]}}])}),s("vxe-table-column",{attrs:{title:"Host","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",[t._v(t._s(e.service.host))])]}}])}),s("vxe-table-column",{attrs:{title:"Port","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",[t._v(t._s(e.service.port))])]}}])}),s("vxe-table-column",{attrs:{"min-width":"80",field:"cpuCores",title:"CPU Core"}}),s("vxe-table-column",{attrs:{"min-width":"100",field:"percentCpuLoad",title:"CPU Usage"}}),s("vxe-table-column",{attrs:{"min-width":"110",field:"percentMemoryLoad",title:"Memory Usage"}}),s("vxe-table-column",{attrs:{title:"Secure","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("el-tooltip",{attrs:{content:"是否触发保护阈值",placement:"top"}},[e.service.secure?s("el-tag",{attrs:{effect:"dark",color:"#ed3f14"}},[t._v("True")]):s("el-tag",{attrs:{effect:"dark",color:"#2d8cf0"}},[t._v("False")])],1)]}}])}),s("vxe-table-column",{attrs:{title:"Healthy","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["true"==e.row.service.metadata["nacos.healthy"]?s("el-tag",{attrs:{effect:"dark",color:"#19be6b"}},[t._v("Healthy")]):s("el-tag",{attrs:{effect:"dark",color:"#f90"}},[t._v("Unhealthy")])]}}])})],1)],1)],1)}),[],!1,null,"4f950bbe",null).exports),O=s("b85c"),A=s("369b"),L=s.n(A),U=(s("c975"),s("4d63"),s("25f0"),s("5319"),s("2b3d"),window.localStorage),$=function(t,e){U.setItem(t,JSON.stringify(e))},j=function(t){return JSON.parse(U.getItem(t))||null},N=function(){U.clear()},z={"-10":{name:"Not Submitted",short:"NS",color:"gray",type:"info",rgb:"#909399"},"-3":{name:"Presentation Error",short:"PE",color:"yellow",type:"warning",rgb:"#f90"},"-2":{name:"Compile Error",short:"CE",color:"yellow",type:"warning",rgb:"#f90"},"-1":{name:"Wrong Answer",short:"WA",color:"red",type:"error",rgb:"#ed3f14"},0:{name:"Accepted",short:"AC",color:"green",type:"success",rgb:"#19be6b"},1:{name:"Time Limit Exceeded",short:"TLE",color:"red",type:"error",rgb:"#ed3f14"},2:{name:"Memory Limit Exceeded",short:"MLE",color:"red",type:"error",rgb:"#ed3f14"},3:{name:"Runtime Error",short:"RE",color:"red",type:"error",rgb:"#ed3f14"},4:{name:"System Error",short:"SE",color:"gray",type:"info",rgb:"#909399"},5:{name:"Pending",color:"yellow",type:"warning",rgb:"#f90"},6:{name:"Compiling",short:"CP",color:"green",type:"info",rgb:"#25bb9b"},7:{name:"Judging",color:"blue",type:"",rgb:"#2d8cf0"},8:{name:"Partial Accepted",short:"PAC",color:"blue",type:"",rgb:"#2d8cf0"},9:{name:"Submitting",color:"yellow",type:"warning",rgb:"#f90"},10:{name:"Submitted Failed",color:"gray",short:"SF",type:"info",rgb:"#909399"}},M={pe:-3,ce:-2,wa:-1,ac:0,tle:1,mle:2,re:3,se:4,Compiling:5,Pending:6,Judging:7,sf:10},q={0:{name:"Easy",color:"green"},1:{name:"Mid",color:"blue"},2:{name:"Hard",color:"red"}},F={Easy:0,Mid:1,Hard:2},V=[{name:"HDU",key:"HDU"},{name:"Codeforces",key:"CF"}],B={SCHEDULED:-1,RUNNING:0,ENDED:1},H={"-1":{name:"Scheduled",color:"#f90"},0:{name:"Running",color:"#19be6b"},1:{name:"Ended",color:"#ed3f14"}},J={ACM:0,OI:1},G={0:{name:"Public",color:"success",tips:"公开赛，每个用户都可查看与提交",submit:!0,look:!0},1:{name:"Private",color:"danger",tips:"私有赛，需要密码才可查看与提交",submit:!1,look:!1},2:{name:"Protect",color:"warning",tips:"保护赛，每个用户都可查看，提交需要密码",submit:!1,look:!0}},W=0,Y=1,K=2,Q="admin",Z="root",X="hojProblemCode",tt="languages";function et(t,e){return e=1<arguments.length&&void 0!==e?e:null,(e?"".concat(X,"_").concat(e,"_"):"".concat(X,"_NoContest_")).concat(t)}function st(t){rt()("pre code").each((function(){var t=rt()(this).text().split("\n").length-1,e=rt()("<ol/>").addClass("pre-numbering"),s=rt()('<i title="copy"> COPY</i>').addClass("el-icon-document-copy code-copy");rt()(this).parent().append(e).append(s);for(var a=0;a<=t;a++)e.append(rt()("<li/>"))})),rt()("pre i.code-copy").click((function(t){t=rt()(t.target).siblings("code").text(),t=rt()("<textarea>"+t+"</textarea>"),rt()("body").append(t),t[0].select(),document.execCommand("Copy"),t.remove(),m.success("success")}))}var at={submissionMemoryFormat:function(t){return null==t||""===t?"--":(t=parseInt(t),String(t.toFixed(0))+"KB")},submissionTimeFormat:function(t){return null==t||""===t?"--":t+"ms"},submissionLengthFormat:function(t){return null==t||""===t?"--":t+"B"},getACRate:function(t,e){return e=0===e?0:(t/e*100).toFixed(2),String(e)+"%"},filterEmptyValue:function(t){var e={};return Object.keys(t).forEach((function(s){!t[s]&&0!==t[s]&&!1!==t[s]||(e[s]=t[s])})),e},breakLongWords:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:16;e=-1===escape(t).indexOf("%u")?new RegExp("(.{"+e+"})","g"):new RegExp("(.{"+(parseInt(e/2)+1)+"})","g");return t.replace(e,"$1\n")},downloadFile:function(t){return new Promise((function(e,s){n.a.prototype.$axios.get(t,{responseType:"blob"}).then((function(t){var s,a=t.headers;-1===a["content-type"].indexOf("json")?((s=document.createElement("a")).href=window.URL.createObjectURL(new window.Blob([t.data],{type:a["content-type"]})),s.download=(a["content-disposition"]||"").split("filename=")[1],document.body.appendChild(s),s.click(),s.remove(),e()):(s=new window.FileReader,t.data.error&&m.error(t.data.error),s.onload=function(t){t=JSON.parse(t.target.result),t.msg?m.info(t.msg):m.error("Invalid file format")},t=new window.Blob([t.data],{type:"application/json"}),s.readAsText(t))})).catch((function(t){s(t)}))}))},getLanguages:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return new Promise((function(e,s){var a=j(tt);a?e(a):Dt.getAllLanguages(t).then((function(t){t=t.data.data,$(tt,t),e(t)}),(function(t){s(t)}))}))},stringToExamples:function(t){for(var e,s=RegExp("<input>([\\s\\S]+?)</input><output>([\\s\\S]+?)</output>","g"),a=[];e=s.exec(t);)a.push({input:e[1],output:e[2]});return a},examplesToString:function(t){var e,s="",a=Object(O.a)(t);try{for(a.s();!(e=a.n()).done;){var i=e.value;s+="<input>"+i.input+"</input><output>"+i.output+"</output>"}}catch(t){a.e(t)}finally{a.f()}return s}},it={name:"user",data:function(){var t=this;return{pageSize:10,total:0,userList:[],uploadUsers:[],uploadUsersPage:[],uploadUsersCurrentPage:1,uploadUsersPageSize:15,keyword:"",showUserDialog:!1,selectUser:{uid:"",username:"",realname:"",email:"",password:"",type:1002,status:0,setNewPwd:!1},updateUserRules:{username:[{required:!0,message:"Username is required",trigger:"blur"},{validator:function(e,s,a){Dt.checkUsernameOrEmail(s,void 0).then((function(e){!0===e.data.data.username&&s!=t.selectUser.username?a(new Error("用户名已存在")):a()}),(function(t){return a()}))},trigger:"blur",message:"The username already exists"},{max:255,message:"The longest length of a username is 255",trigger:"blur"}],realname:[{max:255,message:"The longest length of a username is 255",trigger:"blur"}],email:[{type:"email",message:"The email format is incorrect",trigger:"blur"},{validator:function(e,s,a){Dt.checkUsernameOrEmail(void 0,s).then((function(e){!0===e.data.data.email&&s!=t.selectUser.email?a(new Error("邮箱已存在")):a()}),(function(t){return a()}))},message:"The email already exists",trigger:"blur"}]},loadingTable:!1,loadingGenerate:!1,currentPage:1,selectedUsers:[],formGenerateUser:{prefix:"",suffix:"",number_from:0,number_to:10,password_length:6},formGenerateRules:{number_from:[{required:!0,message:"编号起始不能为空",trigger:"blur"}],number_to:[{required:!0,message:"最大编号不能为空",trigger:"blur"},{validator:function(e,s,a){s<t.formGenerateUser.number_from&&a(new Error("用户结束编号不能小于起始编号")),a()},trigger:"blur"}],password_length:[{required:!0,message:"密码长度不能为空",trigger:"blur"},{type:"number",message:"密码长度必须为数字类型",trigger:"blur"},{validator:function(t,e,s){(e<6||25<e)&&s(new Error("密码长度请选择6~25字符长度")),s()},trigger:"blur"}]}}},mounted:function(){this.getUserList(1)},methods:{currentChange:function(t){this.currentPage=t,this.getUserList(t)},saveUser:function(){var t=this;this.$refs.updateUser.validate((function(e){e&&Dt.admin_editUser(t.selectUser).then((function(e){m.success(e.data.msg),t.getUserList(t.currentPage)})).then((function(){t.showUserDialog=!1})).catch((function(){}))}))},filterByKeyword:function(){this.currentChange(1),this.keyword=""},getRole:function(t){return t[0].id},openUserDialog:function(t){this.showUserDialog=!0,this.selectUser.uid=t.uid,this.selectUser.username=t.username,this.selectUser.realname=t.realname,this.selectUser.email=t.email,this.selectUser.setNewPwd=!1,this.selectUser.password="",this.selectUser.type=this.getRole(t.roles),this.selectUser.status=t.status},getUserList:function(t){var e=this;this.loadingTable=!0,Dt.admin_getUserList(t,this.pageSize,this.keyword).then((function(t){e.loadingTable=!1,e.total=t.data.data.total,e.userList=t.data.data.records}),(function(t){e.loadingTable=!1}))},deleteUsers:function(t){var e=this;0<(t=t||this.selectedUsers).length?this.$confirm("你确定要删除该用户？可能会关联删除该用户创建的公告，题目，比赛等。","确认",{type:"warning"}).then((function(){Dt.admin_deleteUsers(t).then((function(t){m.success(t.data.msg),e.selectedUsers=[],e.getUserList(e.currentPage)})).catch((function(){e.selectedUsers=[],e.getUserList(e.currentPage)}))}),(function(){})):m.warning("勾选的用户不能为空！")},handleSelectionChange:function(t){var e=t.records;this.selectedUsers=[];for(var s=0;s<e.length;s++)this.selectedUsers.push(e[s].uid)},handlechangeAll:function(){var t=this.$refs.xTable.getCheckboxRecords();this.selectedUsers=[];for(var e=0;e<t.length;e++)this.selectedUsers.push(t[e].uid)},generateUser:function(){var t=this;this.$refs.formGenerateUser.validate((function(e){e?(t.loadingGenerate=!0,e=Object.assign({},t.formGenerateUser),Dt.admin_generateUser(e).then((function(e){t.loadingGenerate=!1,m.success(e.data.msg),e="/file/generate-user-excel?key="+e.data.data.key,at.downloadFile(e).then((function(){t.$alert("所有指定格式用户创建成功，用户表已成功下载到您的电脑里了！","提醒")})),t.getUserList(1)})).catch((function(){t.loadingGenerate=!1}))):m.error("请在生成用户名规则中选择或输入正确的值")}))},handleUsersCSV:function(t){var e=this;L.a.parse(t,{complete:function(t){var s=t.data.filter((function(t){return t[0]&&t[1]&&t[2]}));t=t.data.length-s.length;0<t&&m.warning(t+"行用户数据被过滤，原因是可能为空行或某个列值为空"),e.uploadUsersCurrentPage=1,e.uploadUsers=s,e.uploadUsersPage=s.slice(0,e.uploadUsersPageSize)},error:function(t){m.error(t)}})},handleUsersUpload:function(){var t=this;Dt.admin_importUsers(this.uploadUsers).then((function(e){t.getUserList(1),t.handleResetData(),m.success(e.data.msg)})).catch((function(){}))},handleResetData:function(){this.uploadUsers=[]}},computed:{selectedUserIDs:function(){var t,e=[],s=Object(O.a)(this.selectedUsers);try{for(s.s();!(t=s.n()).done;){var a=t.value;e.push(a.id)}}catch(t){s.e(t)}finally{s.f()}return e}},watch:{uploadUsersCurrentPage:function(t){this.uploadUsersPage=this.uploadUsers.slice((t-1)*this.uploadUsersPageSize,t*this.uploadUsersPageSize)}}},nt=(s("66ed"),Object(v.a)(it,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"view"},[s("el-card",[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title home-title"},[t._v("User")]),s("div",{staticClass:"filter-row"},[s("span",[s("el-button",{attrs:{type:"danger",icon:"el-icon-delete-solid",size:"small"},on:{click:function(e){return t.deleteUsers(null)}}},[t._v("Delete ")])],1),s("span",[s("vxe-input",{attrs:{placeholder:"Enter keyword",type:"search",size:"medium"},on:{"search-click":t.filterByKeyword},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterByKeyword(e)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)])]),s("vxe-table",{ref:"xTable",attrs:{stripe:"","auto-resize":"",data:t.userList,loading:t.loadingTable,"checkbox-config":{labelField:"id",highlight:!0,range:!0}},on:{"checkbox-change":t.handleSelectionChange,"checkbox-all":t.handlechangeAll}},[s("vxe-table-column",{attrs:{type:"checkbox",width:"60"}}),s("vxe-table-column",{attrs:{field:"uid",title:"UUID",width:"130"}}),s("vxe-table-column",{attrs:{field:"username",title:"Username","min-width":"140"}}),s("vxe-table-column",{attrs:{field:"realname",title:"Real Name","min-width":"140"}}),s("vxe-table-column",{attrs:{field:"email",title:"Email","min-width":"150"}}),s("vxe-table-column",{attrs:{field:"gmtCreate",title:"Create Time","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[t._v(" "+t._s(t._f("localtime")(e.gmtCreate))+" ")]}}])}),s("vxe-table-column",{attrs:{field:"role",title:"User Type","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[t._v(" "+t._s(t._f("parseRole")(t.getRole(e.roles)))+" ")]}}])}),s("vxe-table-column",{attrs:{field:"status",title:"Status","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?s("el-tag",{attrs:{effect:"dark",color:"#19be6b"}},[t._v("正常")]):s("el-tag",{attrs:{effect:"dark",color:"#ed3f14"}},[t._v("禁用")])]}}])}),s("vxe-table-column",{attrs:{title:"Option","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("el-tooltip",{attrs:{effect:"dark",content:"编辑用户",placement:"top"}},[s("el-button",{attrs:{icon:"el-icon-edit-outline",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.openUserDialog(a)}}})],1),s("el-tooltip",{attrs:{effect:"dark",content:"删除用户",placement:"top"}},[s("el-button",{attrs:{icon:"el-icon-delete-solid",size:"mini",type:"danger"},nativeOn:{click:function(e){return t.deleteUsers([a.uid])}}})],1)]}}])})],1),s("div",{staticClass:"panel-options"},[s("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next","page-size":t.pageSize,total:t.total},on:{"current-change":t.currentChange}})],1)],1),s("el-card",{staticStyle:{"margin-top":"20px"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title home-title"},[t._v("Import Users")])]),s("p",[t._v("1. 用户数据导入仅支持csv格式的用户数据。")]),s("p",[t._v(" 2. 共三列数据: 用户名，密码，邮箱，任一列不能为空，否则该行数据可能导入失败。 ")]),s("p",[t._v("3. 第一行不必写(“用户名”，“密码”，“邮箱”)这三个列名。")]),s("p",[t._v("4. 请导入保存为UTF-8编码的文件，否则中文可能会乱码。")]),t.uploadUsers.length?[s("vxe-table",{attrs:{data:t.uploadUsersPage,stripe:"","auto-resize":""}},[s("vxe-table-column",{attrs:{title:"Username",field:"username","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[t._v(" "+t._s(e[0])+" ")]}}])}),s("vxe-table-column",{attrs:{title:"Password",field:"password","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[t._v(" "+t._s(e[1])+" ")]}}])}),s("vxe-table-column",{attrs:{title:"Email",field:"email","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[t._v(" "+t._s(e[2])+" ")]}}])})],1),s("div",{staticClass:"panel-options"},[s("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-upload"},on:{click:t.handleUsersUpload}},[t._v("Upload All ")]),s("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:t.handleResetData}},[t._v("Clear All ")]),s("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next","page-size":t.uploadUsersPageSize,"current-page":t.uploadUsersCurrentPage,total:t.uploadUsers.length},on:{"update:currentPage":function(e){t.uploadUsersCurrentPage=e},"update:current-page":function(e){t.uploadUsersCurrentPage=e}}})],1)]:s("el-upload",{attrs:{action:"","show-file-list":!1,accept:".csv","before-upload":t.handleUsersCSV}},[s("el-button",{attrs:{size:"small",icon:"el-icon-folder-opened",type:"primary"}},[t._v("Choose File")])],1)],2),s("el-card",{staticStyle:{"margin-top":"20px"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title home-title"},[t._v("Generate Users")])]),s("el-form",{ref:"formGenerateUser",attrs:{model:t.formGenerateUser,rules:t.formGenerateRules}},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{md:5,xs:24}},[s("el-form-item",{attrs:{label:"Prefix",prop:"prefix"}},[s("el-input",{attrs:{placeholder:"Prefix"},model:{value:t.formGenerateUser.prefix,callback:function(e){t.$set(t.formGenerateUser,"prefix",e)},expression:"formGenerateUser.prefix"}})],1)],1),s("el-col",{attrs:{md:5,xs:24}},[s("el-form-item",{attrs:{label:"Suffix",prop:"suffix"}},[s("el-input",{attrs:{placeholder:"Suffix"},model:{value:t.formGenerateUser.suffix,callback:function(e){t.$set(t.formGenerateUser,"suffix",e)},expression:"formGenerateUser.suffix"}})],1)],1),s("el-col",{attrs:{md:5,xs:24}},[s("el-form-item",{attrs:{label:"Start Number",prop:"number_from"}},[s("el-input-number",{staticStyle:{width:"100%"},model:{value:t.formGenerateUser.number_from,callback:function(e){t.$set(t.formGenerateUser,"number_from",e)},expression:"formGenerateUser.number_from"}})],1)],1),s("el-col",{attrs:{md:5,xs:24}},[s("el-form-item",{attrs:{label:"End Number",prop:"number_to"}},[s("el-input-number",{staticStyle:{width:"100%"},model:{value:t.formGenerateUser.number_to,callback:function(e){t.$set(t.formGenerateUser,"number_to",e)},expression:"formGenerateUser.number_to"}})],1)],1),s("el-col",{attrs:{md:4,xs:24}},[s("el-form-item",{attrs:{label:"Password Length",prop:"password_length"}},[s("el-input",{attrs:{placeholder:"Password Length"},model:{value:t.formGenerateUser.password_length,callback:function(e){t.$set(t.formGenerateUser,"password_length",t._n(e))},expression:"formGenerateUser.password_length"}})],1)],1)],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"fa fa-users",loading:t.loadingGenerate,size:"small"},on:{click:t.generateUser}},[t._v(" Generate & Export ")]),t.formGenerateUser.number_from<=t.formGenerateUser.number_to?s("span",{staticClass:"userPreview"},[t._v(" The usernames will be "+t._s(t.formGenerateUser.prefix+t.formGenerateUser.number_from+t.formGenerateUser.suffix)+", "),t.formGenerateUser.number_from+1<t.formGenerateUser.number_to?s("span",[t._v(" "+t._s(t.formGenerateUser.prefix+(t.formGenerateUser.number_from+1)+t.formGenerateUser.suffix+"...")+" ")]):t._e(),t.formGenerateUser.number_from+1<=t.formGenerateUser.number_to?s("span",[t._v(" "+t._s(t.formGenerateUser.prefix+t.formGenerateUser.number_to+t.formGenerateUser.suffix)+" ")]):t._e()]):t._e()],1)],1)],1),s("el-dialog",{attrs:{title:"User Info",visible:t.showUserDialog,width:"350px"},on:{"update:visible":function(e){t.showUserDialog=e}}},[s("el-form",{ref:"updateUser",attrs:{model:t.selectUser,"label-width":"100px","label-position":"left",rules:t.updateUserRules}},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"Username",required:"",prop:"username"}},[s("el-input",{model:{value:t.selectUser.username,callback:function(e){t.$set(t.selectUser,"username",e)},expression:"selectUser.username"}})],1)],1),s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"Real Name",prop:"realname"}},[s("el-input",{model:{value:t.selectUser.realname,callback:function(e){t.$set(t.selectUser,"realname",e)},expression:"selectUser.realname"}})],1)],1),s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"Email",prop:"email"}},[s("el-input",{model:{value:t.selectUser.email,callback:function(e){t.$set(t.selectUser,"email",e)},expression:"selectUser.email"}})],1)],1),s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"Set NewPwd"}},[s("el-switch",{attrs:{"active-value":!0,"inactive-value":!1},model:{value:t.selectUser.setNewPwd,callback:function(e){t.$set(t.selectUser,"setNewPwd",e)},expression:"selectUser.setNewPwd"}})],1)],1),1==t.selectUser.setNewPwd?s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"New Pwd",required:"",prop:"password"}},[s("el-input",{attrs:{placeholder:"Enter the new password"},model:{value:t.selectUser.password,callback:function(e){t.$set(t.selectUser,"password",e)},expression:"selectUser.password"}})],1)],1):t._e(),s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"User Type"}},[s("el-select",{model:{value:t.selectUser.type,callback:function(e){t.$set(t.selectUser,"type",e)},expression:"selectUser.type"}},[s("el-option",{key:1e3,attrs:{label:"超级管理员",value:1e3}}),s("el-option",{key:1001,attrs:{label:"管理员",value:1001}}),s("el-option",{key:1002,attrs:{label:"用户(默认)",value:1002}}),s("el-option",{key:1003,attrs:{label:"用户(禁止提交)",value:1003}}),s("el-option",{key:1004,attrs:{label:"用户(禁止发讨论)",value:1004}}),s("el-option",{key:1005,attrs:{label:"用户(禁言)",value:1005}}),s("el-option",{key:1006,attrs:{label:"用户(禁止提交&禁止发讨论)",value:1006}}),s("el-option",{key:1007,attrs:{label:"用户(禁止提交&禁言)",value:1007}})],1)],1)],1),s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"Status"}},[s("el-switch",{attrs:{"active-value":0,"inactive-value":1},model:{value:t.selectUser.status,callback:function(e){t.$set(t.selectUser,"status",e)},expression:"selectUser.status"}})],1)],1)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"danger"},nativeOn:{click:function(e){t.showUserDialog=!1}}},[t._v("Cancel")]),s("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.saveUser(e)}}},[t._v("Save")])],1)],1)],1)}),[],!1,null,"157845b8",null).exports),ot=(s("9911"),s("1157")),rt=s.n(ot),lt={name:"Editor",props:{value:{type:String,default:""}},data:function(){return{currentValue:this.value,img_file:{}}},methods:{$imgAdd:function(t,e){var s=this,a=new FormData;a.append("image",e),this.$http({url:"/api/file/upload-md-img",method:"post",data:a,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){s.$refs.md.$img2Url(t,e.data.data.link),s.img_file[e.data.data.link]=e.data.data.filePath}))},$imgDel:function(t){this.$http({url:"/api/file/delete-md-img",method:"get",params:{filePath:this.img_file[t[0]]}})}},watch:{value:function(t){this.currentValue!==t&&(this.currentValue=t)},currentValue:function(t,e){t!==e&&(this.$emit("update:value",t),this.$nextTick((function(t){st()})))}}},ct=(s("92bc"),Object(v.a)(lt,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",{staticClass:"mavonEditor"},[e("mavon-editor",{ref:"md",attrs:{ishljs:!0,codeStyle:"arduino-light"},on:{imgAdd:t.$imgAdd,imgDel:t.$imgDel},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}})],1)}),[],!1,null,null,null).exports),ut={name:"announcement",components:{Editor:ct},data:function(){return{contestID:"",showEditAnnouncementDialog:!1,announcementList:[],pageSize:15,total:0,mode:"create",announcement:{id:null,title:"",content:"",status:0,uid:""},announcementDialogTitle:"Edit Announcement",loading:!1,currentPage:0}},mounted:function(){this.init()},methods:{init:function(){this.contestID=this.$route.params.contestId,this.contestID?this.getContestAnnouncementList(1):this.getAnnouncementList(1)},currentChange:function(t){this.currentPage=t,this.contestID?this.getContestAnnouncementList(t):this.getAnnouncementList(t)},getAnnouncementList:function(t){var e=this;this.loading=!0,Dt.admin_getAnnouncementList(t,this.pageSize).then((function(t){e.loading=!1,e.total=t.data.data.total,e.announcementList=t.data.data.records}),(function(t){e.loading=!1}))},getContestAnnouncementList:function(t){var e=this;this.loading=!0,Dt.admin_getContestAnnouncementList(this.contestID,t,this.pageSize).then((function(t){e.loading=!1,e.total=t.data.data.total,e.announcementList=t.data.data.records})).catch((function(){e.loading=!1}))},onOpenEditDialog:function(){setTimeout((function(){var t;document.createEvent?((t=document.createEvent("HTMLEvents")).initEvent("resize",!0,!0),window.dispatchEvent(t)):document.createEventObject&&window.fireEvent("onresize")}),0)},submitAnnouncement:function(){var t,e=this,s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0,a="";s.id||(s=this.announcement),this.contestID?(t={announcement:s,cid:this.contestID},a="edit"===this.mode?"admin_updateContestAnnouncement":"admin_createContestAnnouncement"):(a="edit"===this.mode?"admin_updateAnnouncement":"admin_createAnnouncement",t=s),Dt[a](t).then((function(t){e.showEditAnnouncementDialog=!1,m.success(t.data.msg),e.init()})).catch()},deleteAnnouncement:function(t){var e=this;this.$confirm("你确定要删除该公告?","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0;var s=e.contestID?"admin_deleteContestAnnouncement":"admin_deleteAnnouncement";Dt[s](t).then((function(t){e.loading=!0,m.success(t.data.msg),e.init()}))})).catch((function(){e.loading=!1}))},openAnnouncementDialog:function(t){this.showEditAnnouncementDialog=!0,null!==t?(this.announcementDialogTitle="Edit Announcement",this.announcement=Object.assign({},t),this.mode="edit"):(this.announcementDialogTitle="Create Announcement",this.announcement.title="",this.announcement.status=0,this.announcement.content="",this.announcement.uid=this.userInfo.uid,this.announcement.username=this.userInfo.username,this.mode="create")},handleVisibleSwitch:function(t){this.mode="edit",this.submitAnnouncement({id:t.id,title:t.title,content:t.content,status:t.status,uid:t.uid})}},watch:{$route:function(){this.init()}},computed:Object(o.a)({},Object(r.mapGetters)(["userInfo"]))},dt=(s("34d2"),Object(v.a)(ut,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-card",[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title home-title"},[t._v("Announcement")])]),s("div",{staticClass:"create"},[s("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(e){return t.openAnnouncementDialog(null)}}},[t._v("Create")])],1),s("div",{staticClass:"list"},[s("vxe-table",{ref:"table",attrs:{loading:t.loading,data:t.announcementList,"auto-resize":"",stripe:""}},[s("vxe-table-column",{attrs:{"min-width":"50",field:"id",title:"ID"}}),s("vxe-table-column",{attrs:{"min-width":"150",field:"title",title:"Title"}}),s("vxe-table-column",{attrs:{"min-width":"150",field:"gmtCreate",title:"Create Time"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[t._v(" "+t._s(t._f("localtime")(e.gmtCreate))+" ")]}}])}),s("vxe-table-column",{attrs:{"min-width":"150",field:"gmtModified",title:"Last Update Time"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[t._v(" "+t._s(t._f("localtime")(e.gmtModified))+" ")]}}])}),s("vxe-table-column",{attrs:{"min-width":"150",field:"username",title:"Author"}}),s("vxe-table-column",{attrs:{"min-width":"100",field:"status",title:"Visible"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("el-switch",{attrs:{"active-text":"","inactive-text":"","active-value":0,"inactive-value":1},on:{change:function(e){return t.handleVisibleSwitch(a)}},model:{value:a.status,callback:function(e){t.$set(a,"status",e)},expression:"row.status"}})]}}])}),s("vxe-table-column",{attrs:{title:"Option","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑公告",placement:"top"}},[s("el-button",{attrs:{icon:"el-icon-edit-outline",size:"mini",type:"primary"},nativeOn:{click:function(s){return t.openAnnouncementDialog(e.row)}}})],1),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除公告",placement:"top"}},[s("el-button",{attrs:{icon:"el-icon-delete-solid",size:"mini",type:"danger"},nativeOn:{click:function(s){return t.deleteAnnouncement(e.row.id)}}})],1)]}}])})],1),s("div",{staticClass:"panel-options"},[t.contestID?t._e():s("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next","page-size":t.pageSize,total:t.total},on:{"current-change":t.currentChange}})],1)],1)]),s("el-dialog",{attrs:{title:t.announcementDialogTitle,visible:t.showEditAnnouncementDialog,fullscreen:!0},on:{"update:visible":function(e){t.showEditAnnouncementDialog=e},open:t.onOpenEditDialog}},[s("el-form",{attrs:{"label-position":"top",model:t.announcement}},[s("el-form-item",{attrs:{label:"公告标题",required:""}},[s("el-input",{staticClass:"title-input",attrs:{placeholder:"请输入公告标题"},model:{value:t.announcement.title,callback:function(e){t.$set(t.announcement,"title",e)},expression:"announcement.title"}})],1),s("el-form-item",{attrs:{label:"公告内容",required:""}},[s("Editor",{attrs:{value:t.announcement.content},on:{"update:value":function(e){return t.$set(t.announcement,"content",e)}}})],1),s("div",{staticClass:"visible-box"},[s("span",[t._v("是否显示")]),s("el-switch",{attrs:{"active-value":0,"inactive-value":1,"active-text":"","inactive-text":""},model:{value:t.announcement.status,callback:function(e){t.$set(t.announcement,"status",e)},expression:"announcement.status"}})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"danger"},nativeOn:{click:function(e){t.showEditAnnouncementDialog=!1}}},[t._v("Cancel")]),s("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submitAnnouncement(e)}}},[t._v("Save")])],1)],1)],1)}),[],!1,null,"6e06f53a",null).exports),mt={name:"SystemConfig",data:function(){return{init:!1,saved:!1,loadingBtnTest:!1,smtp:{emailHost:"smtp.example.com",emailPassword:"",emailPort:587,emailBGImg:"",emailUsername:"email@example.com",emailSsl:!0},websiteConfig:{},databaseConfig:{}}},mounted:function(){var t=this;Dt.admin_getSMTPConfig().then((function(e){e.data.data?t.smtp=e.data.data:(t.init=!0,m.warning("请先添加STMP的配置！"))})),Dt.admin_getWebsiteConfig().then((function(e){t.websiteConfig=e.data.data})).catch((function(){})),Dt.admin_getDataBaseConfig().then((function(e){t.databaseConfig=e.data.data})).catch((function(){}))},methods:{saveSMTPConfig:function(){var t=this;Dt.admin_editSMTPConfig(this.smtp).then((function(e){m.success(e.data.msg),t.saved=!0}),(function(){}))},testSMTPConfig:function(){var t=this;this.$prompt("Please input your email","",{inputPattern:/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/,inputErrorMessage:"Error email format"}).then((function(e){e=e.value,t.loadingBtnTest=!0,Dt.admin_testSMTPConfig(e).then((function(e){m.success(e.data.msg),t.loadingBtnTest=!1}),(function(){t.loadingBtnTest=!1}))})).catch((function(){}))},saveWebsiteConfig:function(){Dt.admin_editWebsiteConfig(this.websiteConfig).then((function(t){m.success(t.data.msg)})).catch((function(){}))},saveDataBaseConfig:function(){Dt.admin_editDataBaseConfig(this.databaseConfig).then((function(t){m.success(t.data.msg)})).catch((function(){}))}}},pt=Object(v.a)(mt,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",[e("el-card",[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"panel-title home-title"},[t._v("Website Config")])]),e("el-form",{ref:"form",attrs:{"label-position":"left","label-width":"110px",model:t.websiteConfig}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{attrs:{label:"Base Url",required:""}},[e("el-input",{attrs:{placeholder:"Website Base Url"},model:{value:t.websiteConfig.baseUrl,callback:function(e){t.$set(t.websiteConfig,"baseUrl",e)},expression:"websiteConfig.baseUrl"}})],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{attrs:{label:"Name",required:""}},[e("el-input",{attrs:{placeholder:"Website Name"},model:{value:t.websiteConfig.name,callback:function(e){t.$set(t.websiteConfig,"name",e)},expression:"websiteConfig.name"}})],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{attrs:{label:"Short Name",required:""}},[e("el-input",{attrs:{placeholder:"Website Name Shortcut"},model:{value:t.websiteConfig.shortName,callback:function(e){t.$set(t.websiteConfig,"shortName",e)},expression:"websiteConfig.shortName"}})],1)],1),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:"Record Name",required:""}},[e("el-input",{attrs:{placeholder:"Website Record Name"},model:{value:t.websiteConfig.recordName,callback:function(e){t.$set(t.websiteConfig,"recordName",e)},expression:"websiteConfig.recordName"}})],1)],1),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:"Record Url",required:""}},[e("el-input",{attrs:{placeholder:"Website Record Url"},model:{value:t.websiteConfig.recordUrl,callback:function(e){t.$set(t.websiteConfig,"recordUrl",e)},expression:"websiteConfig.recordUrl"}})],1)],1),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:"Project Name",required:""}},[e("el-input",{attrs:{placeholder:"Website Project Namet"},model:{value:t.websiteConfig.projectName,callback:function(e){t.$set(t.websiteConfig,"projectName",e)},expression:"websiteConfig.projectName"}})],1)],1),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:"Project Url",required:""}},[e("el-input",{attrs:{placeholder:"Website Project Url"},model:{value:t.websiteConfig.projectUrl,callback:function(e){t.$set(t.websiteConfig,"projectUrl",e)},expression:"websiteConfig.projectUrl"}})],1)],1),e("el-col",{attrs:{md:24,xs:24}},[e("el-form-item",{attrs:{label:"Allow Register","label-width":"120px"}},[e("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.websiteConfig.register,callback:function(e){t.$set(t.websiteConfig,"register",e)},expression:"websiteConfig.register"}})],1)],1)],1)],1),e("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){return t.saveWebsiteConfig(e)}}},[t._v("Save")])],1),e("el-card",{staticStyle:{"margin-top":"15px"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"panel-title home-title"},[t._v("SMTP Config")])]),e("el-form",{attrs:{"label-position":"left","label-width":"80px",model:t.smtp}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{md:24,xs:24}},[e("el-form-item",{attrs:{label:"Host",required:"","label-width":"80px"}},[e("el-input",{attrs:{placeholder:"SMTP Host Address"},model:{value:t.smtp.emailHost,callback:function(e){t.$set(t.smtp,"emailHost",e)},expression:"smtp.emailHost"}})],1)],1),e("el-col",{attrs:{md:24,xs:24}},[e("el-form-item",{attrs:{label:"Port",required:"","label-width":"80px"}},[e("el-input",{attrs:{placeholder:"SMTP Port"},model:{value:t.smtp.emailPort,callback:function(e){t.$set(t.smtp,"emailPort",e)},expression:"smtp.emailPort"}})],1)],1),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:"Username",required:"","label-width":"80px"}},[e("el-input",{attrs:{placeholder:"Account Username"},model:{value:t.smtp.emailUsername,callback:function(e){t.$set(t.smtp,"emailUsername",e)},expression:"smtp.emailUsername"}})],1)],1),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:"Password","label-width":"80px",required:""}},[e("el-input",{attrs:{type:"password",placeholder:"SMTP Server Password"},model:{value:t.smtp.emailPassword,callback:function(e){t.$set(t.smtp,"emailPassword",e)},expression:"smtp.emailPassword"}})],1)],1),e("el-col",{attrs:{md:24,xs:24}},[e("el-form-item",{attrs:{label:"BG IMG","label-width":"80px",required:""}},[e("el-input",{attrs:{placeholder:"SMTP Template Background IMG Address"},model:{value:t.smtp.emailBGImg,callback:function(e){t.$set(t.smtp,"emailBGImg",e)},expression:"smtp.emailBGImg"}})],1)],1),e("el-col",{attrs:{md:24,xs:24}},[e("el-form-item",{attrs:{label:"SSL"}},[e("el-switch",{model:{value:t.smtp.emailSsl,callback:function(e){t.$set(t.smtp,"emailSsl",e)},expression:"smtp.emailSsl"}})],1)],1)],1)],1),e("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){return t.saveSMTPConfig(e)}}},[t._v("Save")]),t.saved?e("el-button",{attrs:{type:"warning",loading:t.loadingBtnTest,size:"small"},nativeOn:{click:function(e){return t.testSMTPConfig(e)}}},[t._v("Send Test Email")]):t._e()],1),e("el-card",{staticStyle:{"margin-top":"15px"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"panel-title home-title"},[t._v("DataBase Config")])]),e("el-form",{attrs:{"label-position":"top",model:t.databaseConfig}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:"MySQL Host",required:"","label-width":"80px"}},[e("el-input",{attrs:{placeholder:"MySQL Host Address"},model:{value:t.databaseConfig.dbHost,callback:function(e){t.$set(t.databaseConfig,"dbHost",e)},expression:"databaseConfig.dbHost"}})],1)],1),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:"MySQL Port",required:"","label-width":"80px"}},[e("el-input",{attrs:{type:"number",placeholder:"MySQL Port"},model:{value:t.databaseConfig.dbPost,callback:function(e){t.$set(t.databaseConfig,"dbPost",e)},expression:"databaseConfig.dbPost"}})],1)],1),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:"MySQL Username",required:"","label-width":"80px"}},[e("el-input",{attrs:{placeholder:"MySQL Username"},model:{value:t.databaseConfig.dbUsername,callback:function(e){t.$set(t.databaseConfig,"dbUsername",e)},expression:"databaseConfig.dbUsername"}})],1)],1),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:"MySQL Password","label-width":"80px",required:""}},[e("el-input",{attrs:{type:"password",placeholder:"MySQL Password"},model:{value:t.databaseConfig.dbPassword,callback:function(e){t.$set(t.databaseConfig,"dbPassword",e)},expression:"databaseConfig.dbPassword"}})],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{attrs:{label:"Redis Host","label-width":"80px",required:""}},[e("el-input",{attrs:{type:"password",placeholder:"Redis Host Address"},model:{value:t.databaseConfig.redisHost,callback:function(e){t.$set(t.databaseConfig,"redisHost",e)},expression:"databaseConfig.redisHost"}})],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{attrs:{label:"Redis Port","label-width":"80px",required:""}},[e("el-input",{attrs:{type:"password",placeholder:"Redis Port"},model:{value:t.databaseConfig.redisPort,callback:function(e){t.$set(t.databaseConfig,"redisPort",e)},expression:"databaseConfig.redisPort"}})],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{attrs:{label:"Redis Password","label-width":"80px",required:""}},[e("el-input",{attrs:{type:"password",placeholder:"Redis Password"},model:{value:t.databaseConfig.redisPassword,callback:function(e){t.$set(t.databaseConfig,"redisPassword",e)},expression:"databaseConfig.redisPassword"}})],1)],1)],1)],1),e("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){return t.saveDataBaseConfig(e)}}},[t._v("Save")])],1)],1)}),[],!1,null,null,null).exports,ft={name:"add-problem-from-public",props:["contestID"],data:function(){return{page:1,limit:10,total:0,loading:!1,problems:[],contest:{},keyword:""}},mounted:function(){var t=this;Dt.admin_getContest(this.contestID).then((function(e){t.contest=e.data.data,t.getPublicProblem()})).catch((function(){}))},methods:{getPublicProblem:function(t){var e=this;this.loading=!0,t={keyword:this.keyword,currentPage:t,limit:this.limit,problemType:this.contest.type,cid:this.contest.id},Dt.admin_getContestProblemList(t).then((function(t){e.loading=!1,e.total=t.data.data.total,e.problems=t.data.data.records})).catch((function(){e.loading=!1}))},handleAddProblem:function(t){var e=this;this.$prompt("请输入该题目在比赛中显示的序号ID","确认").then((function(s){s=s.value,s={pid:t,cid:e.contestID,displayId:s},Dt.admin_addProblemFromPublic(s).then((function(t){e.$emit("on-change"),m.success(t.data.msg),e.getPublicProblem(e.page)}),(function(){}))}),(function(){}))},filterByKeyword:function(){this.getPublicProblem(this.page)}}},ht=(e=(s("ab8a"),{name:"ProblemList",components:{ContestAddProblem:Object(v.a)(ft,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{"text-align":"center"}},[s("vxe-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"Enter keyword",type:"search",size:"medium"},on:{"search-click":t.filterByKeyword},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),s("vxe-table",{attrs:{data:t.problems,loading:t.loading,"auto-resize":"",stripe:"",align:"center"}},[s("vxe-table-column",{attrs:{title:"ID","min-width":"100",field:"problemId"}}),s("vxe-table-column",{attrs:{"min-width":"150",title:"Title",field:"title"}}),s("vxe-table-column",{attrs:{title:"option",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("el-tooltip",{attrs:{effect:"dark",content:"添加该题目到比赛中",placement:"top"}},[s("el-button",{attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.handleAddProblem(a.id)}}})],1)]}}])})],1),s("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next","page-size":t.limit,total:t.total},on:{"current-change":t.getPublicProblem}})],1)}),[],!1,null,"52db8a5c",null).exports},data:function(){return{pageSize:10,total:0,problemList:[],keyword:"",loading:!1,currentPage:1,routeName:"",contestId:"",currentProblemID:"",currentRow:{},addProblemDialogVisible:!1,AddRemoteOJProblemDialogVisible:!1,addRemoteOJproblemLoading:!1,otherOJName:"HDU",otherOJProblemId:"",REMOTE_OJ:{}}},mounted:function(){this.routeName=this.$route.name,this.contestId=this.$route.params.contestId,this.getProblemList(this.currentPage),this.REMOTE_OJ=Object.assign({},V)},methods:{handleDblclick:function(t){t.isEditing=!0},goEdit:function(t){"admin-problem-list"===this.routeName?this.$router.push({name:"admin-edit-problem",params:{problemId:t}}):"admin-contest-problem-list"===this.routeName&&this.$router.push({name:"admin-edit-contest-problem",params:{problemId:t,contestId:this.contestId}})},goCreateProblem:function(){"admin-problem-list"===this.routeName?this.$router.push({name:"admin-create-problem"}):"admin-contest-problem-list"===this.routeName&&this.$router.push({name:"admin-create-contest-problem",params:{contestId:this.contestId}})},currentChange:function(t){this.currentPage=t,this.getProblemList(t)},getProblemList:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0;var s="admin-problem-list"===this.routeName?"admin_getProblemList":"admin_getContestProblemList";e={limit:this.pageSize,currentPage:e,keyword:this.keyword,cid:this.contestId};Dt[s](e).then((function(e){t.loading=!1,t.total=e.data.data.total;var s,a=Object(O.a)(e.data.data.records);try{for(a.s();!(s=a.n()).done;)s.value.isEditing=!1}catch(e){a.e(e)}finally{a.f()}t.problemList=e.data.data.records}),(function(e){t.loading=!1}))},changeProblemAuth:function(t){Dt.admin_changeProblemPublic(t).then((function(t){m.success(t.data.msg)}))},deleteProblem:function(t){var e=this;this.$confirm("确定要删除此问题吗？注意：该问题的相关提交数据也将被删除。","删除题目",{type:"warning"}).then((function(){var s="admin-problem-list"===e.routeName?"admin_deleteProblem":"admin_deleteContestProblem";Dt[s](t).then((function(t){m.success(t.data.msg),e.getProblemList(e.currentPage)})).catch((function(){}))}),(function(){}))},updateProblem:function(t){var e=this,s=Object.assign({},t);t="",t=this.contestId?(s.contest_id=this.contestId,"admin_editContestProblem"):"admin_editProblem";Dt[t](s).then((function(t){m.success(t.data.msg),e.getProblemList(e.currentPage)})).catch((function(){}))},downloadTestCase:function(t){var e=this;at.downloadFile("/api/file/download-testcase?pid="+t).then((function(){e.$alert("该题目的测试样例已成功下载！","提醒")}))},filterByKeyword:function(){this.currentChange(1),this.keyword=""},addRemoteOJProblem:function(){var t=this;this.addRemoteOJproblemLoading=!0,Dt.admin_addRemoteOJProblem(this.otherOJName,this.otherOJProblemId).then((function(e){t.addRemoteOJproblemLoading=!1,t.AddRemoteOJProblemDialogVisible=!1,m.success(e.data.msg),t.currentChange(1)}),(function(e){t.addRemoteOJproblemLoading=!1}))}},watch:{$route:function(t,e){this.contestId=t.params.contestId,this.routeName=t.name,this.getProblemList(this.currentPage)}}}),i=(s("3194"),Object(v.a)(e,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-card",[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title home-title"},[t._v(t._s(t.contestId?"Contest Problem List":"Problem List"))]),s("div",{staticClass:"filter-row"},[s("span",[s("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.goCreateProblem}},[t._v("Create ")]),t.contestId?t._e():s("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-plus"},on:{click:function(e){t.AddRemoteOJProblemDialogVisible=!0}}},[t._v("Add Remote OJ Problem ")]),t.contestId?s("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(e){t.addProblemDialogVisible=!0}}},[t._v("Add From Public Problem ")]):t._e()],1),s("span",[s("vxe-input",{attrs:{placeholder:"Enter keyword",type:"search",size:"medium"},on:{"search-click":t.filterByKeyword},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterByKeyword(e)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)])]),s("vxe-table",{ref:"xTable",attrs:{stripe:"","auto-resize":"",data:t.problemList,loading:t.loading,align:"center"},on:{"row-dblclick":t.handleDblclick}},[s("vxe-table-column",{attrs:{"min-width":"100",field:"problemId",title:"ID"}}),s("vxe-table-column",{attrs:{field:"title","min-width":"150",title:"Title"}}),s("vxe-table-column",{attrs:{field:"author","min-width":"150",title:"Author"}}),s("vxe-table-column",{attrs:{"min-width":"150",field:"gmtCreate",title:"Create Time"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[t._v(" "+t._s(t._f("localtime")(e.gmtCreate))+" ")]}}])}),s("vxe-table-column",{attrs:{"min-width":"130",field:"auth",title:"Auth"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("el-select",{attrs:{size:"small",disabled:3==a.auth&&!t.contestId},on:{change:function(e){return t.changeProblemAuth(a)}},model:{value:a.auth,callback:function(e){t.$set(a,"auth",e)},expression:"row.auth"}},[s("el-option",{attrs:{label:"公开",value:1}}),s("el-option",{attrs:{label:"私有",value:2}}),s("el-option",{attrs:{label:"比赛题目",value:3,disabled:!t.contestId}})],1)]}}])}),s("vxe-table-column",{attrs:{title:"Option","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("el-tooltip",{attrs:{effect:"dark",content:"编辑题目",placement:"top"}},[s("el-button",{attrs:{icon:"el-icon-edit-outline",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.goEdit(a.id)}}})],1),s("el-tooltip",{attrs:{effect:"dark",content:"下载测试样例",placement:"top"}},[s("el-button",{attrs:{icon:"el-icon-download",size:"mini",type:"success"},nativeOn:{click:function(e){return t.downloadTestCase(a.id)}}})],1),s("el-tooltip",{attrs:{effect:"dark",content:"删除题目",placement:"top"}},[s("el-button",{attrs:{icon:"el-icon-delete-solid",size:"mini",type:"danger"},nativeOn:{click:function(e){return t.deleteProblem(a.id)}}})],1)]}}])})],1),s("div",{staticClass:"panel-options"},[s("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next","page-size":t.pageSize,total:t.total},on:{"current-change":t.currentChange}})],1)],1),t.contestId?s("el-dialog",{attrs:{title:"Add Contest Problem",width:"90%",visible:t.addProblemDialogVisible},on:{"update:visible":function(e){t.addProblemDialogVisible=e},"close-on-click-modal":!1}},[s("ContestAddProblem",{attrs:{contestID:t.contestId},on:{"on-change":t.getProblemList}})],1):t._e(),s("el-dialog",{attrs:{title:"Add Remote OJ Problem",width:"350px",visible:t.AddRemoteOJProblemDialogVisible},on:{"update:visible":function(e){t.AddRemoteOJProblemDialogVisible=e},"close-on-click-modal":!1}},[s("el-form",[s("el-form-item",{attrs:{label:"Remote OJ"}},[s("el-select",{attrs:{size:"small"},model:{value:t.otherOJName,callback:function(e){t.otherOJName=e},expression:"otherOJName"}},t._l(t.REMOTE_OJ,(function(t,e){return s("el-option",{key:e,attrs:{label:t.name,value:t.key}})})),1)],1),s("el-form-item",{attrs:{label:"Problem ID"}},[s("el-input",{attrs:{size:"small"},model:{value:t.otherOJProblemId,callback:function(e){t.otherOJProblemId=e},expression:"otherOJProblemId"}})],1),s("el-form-item",{staticStyle:{"text-align":"center"}},[s("el-button",{attrs:{type:"primary",icon:"el-icon-plus",loading:t.addRemoteOJproblemLoading},on:{click:t.addRemoteOJProblem}},[t._v("Add ")])],1)],1)],1)],1)}),[],!1,null,"14972ff7",null).exports),s("7db0"),s("a434"),s("96cf"),s("1da1")),gt=(c={name:"Accordion",props:{title:{type:String,required:!0}},data:function(){return{isOpen:!0}}},f=(s("3d5c"),Object(v.a)(c,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",{staticClass:"accordion"},[e("header",[e("span",{staticClass:"title"},[t._v(t._s(t.title))]),e("span",{staticClass:"header_right"},[t._t("header")],2)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}],staticClass:"body"},[t._t("default")],2),e("footer",{on:{click:function(e){t.isOpen=!t.isOpen}}},[e("i",{staticClass:"el-icon-caret-top",class:{rotate:!t.isOpen},staticStyle:{color:"#2d8cf0"}})])])}),[],!1,null,"931f319c",null).exports),s("ade3")),bt=s("c884"),vt=(b=(s("f9d4"),s("4ba6"),s("db91"),s("8c06"),s("31c5"),s("697e"),s("cbc8"),s("aedd"),s("8d70"),s("8c33"),s("8f0a"),s("05dd"),s("10b2"),s("f6b6"),s("9b74"),s("832b"),{name:"CodeMirror",data:function(){var t;return{currentValue:"",options:(t={mode:"text/x-csrc",lineNumbers:!0,lineWrapping:!1,theme:"solarized",tabSize:4,line:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],indentUnit:4,styleActiveLine:!0,autofocus:!0,matchBrackets:!0},Object(gt.a)(t,"styleActiveLine",!0),Object(gt.a)(t,"autoCloseBrackets",!0),Object(gt.a)(t,"autoCloseTags",!0),t)}},components:{codemirror:bt.codemirror},props:{value:{type:String,default:"C"},mode:{type:String,default:"text/x-csrc"}},mounted:function(){this.currentValue=this.value,this.$refs.editor.editor.setOption("mode",this.mode),this.$refs.editor.editor.on("inputRead",(function(t,e){/\w|\./g.test(e.text[0])&&"complete"!==e.origin&&t.showHint({hint:bt.CodeMirror.hint.anyword,completeSingle:!1,range:1e3})}))},watch:{value:function(t){this.currentValue!==t&&(this.currentValue=t)},currentValue:function(t,e){t!==e&&(this.$emit("change",t),this.$emit("input",t))},mode:function(t){this.$refs.editor.editor.setOption("mode",t)}}}),y=(s("6ebf"),{name:"Problem",components:{Accordion:f,CodeMirror:Object(v.a)(b,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("codemirror",{ref:"editor",attrs:{options:t.options},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}})}),[],!1,null,null,null).exports,Editor:ct},data:function(){return{rules:{title:{required:!0,message:"Title is required",trigger:"blur"},input_description:{required:!0,message:"Input Description is required",trigger:"blur"},output_description:{required:!0,message:"Output Description is required",trigger:"blur"}},loadingCompile:!1,mode:"",contest:{},codeTemplate:{},problemIdPrex:"HOJ-",pid:null,contestID:null,contestProblem:{displayId:null,displayTitle:null,cid:null,pid:null},problem:{id:null,title:"",problemId:"",description:"",input:"",output:"",timeLimit:1e3,memoryLimit:256,difficulty:0,auth:1,codeShare:!0,examples:[],spj:!1,spjLanguage:"",spjCode:"",spjCompileOk:!1,uploadTestcaseDir:"",testCaseScore:[],isRemote:!1,type:0,hint:"",source:"",cid:null},problemTags:[],problemLanguages:[],problemSamples:[],problemCodeTemplate:[],reProblem:{},testCaseUploaded:!1,allLanguage:[],allSpjLanguage:[],allTags:[],inputVisible:!1,tagInput:"",title:"",spjMode:"",disableRuleType:!1,routeName:"",isUploadTestCase:!0,uploadTestcaseDir:"",uploadFileUrl:"",error:{tags:"",spj:"",languages:"",testCase:""}}},mounted:function(){var t=this;this.routeName=this.$route.name;var e=this.$route.params.contestId;this.problemIdPrex="HOJ-",e&&(this.problemIdPrex+="C"),this.uploadFileUrl="/api/file/upload-testcase-zip","admin-edit-problem"===this.routeName||"admin-edit-contest-problem"===this.routeName?this.mode="edit":this.mode="add",Dt.getLanguages(this.$route.params.problemId,!1).then((function(s){var a=s.data.data;t.allLanguage=a;for(var i=0;i<a.length;i++)1==a[i].isSpj&&t.allSpjLanguage.push(a[i]);t.problem=t.reProblem={id:null,problemId:"",title:"",description:"",input:"",output:"",timeLimit:1e3,memoryLimit:256,difficulty:0,auth:1,codeShare:!0,examples:[],spj:!1,spjLanguage:"",spjCode:"",spjCompileOk:!1,uploadTestcaseDir:"",testCaseScore:[],contestProblem:{},type:0,hint:"",source:"",cid:null},(t.contestID=e)&&(t.problem.cid=t.reProblem.cid=e,t.problem.auth=t.reProblem.auth=3,t.disableRuleType=!0,Dt.admin_getContest(e).then((function(e){t.problem.type=t.reProblem.type=e.data.data.type,t.contest=e.data.data}))),t.problem.spjLanguage="C",t.init()}))},watch:{$route:function(){this.routeName=this.$route.name,"admin-edit-problem"===this.routeName||"admin-edit-contest-problem"===this.routeName?this.mode="edit":this.mode="add",this.$refs.form.resetFields(),this.problem=this.reProblem,this.problemTags=[],this.problemLanguages=[],this.problemSamples=[],this.init()},problemLanguages:function(t){var e,s=this,a={},i=(t=JSON.parse(JSON.stringify(t)).sort(),Object(O.a)(t));try{for(i.s();!(e=i.n()).done;)!function(){var t,i,n,o=e.value;void 0===s.codeTemplate[o]?(t=s.allLanguage.find((function(t){return t.name===o})),(n=s.problemCodeTemplate)&&(i=n.find((function(e){return e.lid==t.id}))),a[o]=null==i?{id:null,status:!1,code:t.codeTemplate,mode:t.contentType}:{id:i.id,status:!0,code:i.code,mode:t.contentType}):a[o]=s.codeTemplate[o]}()}catch(t){i.e(t)}finally{i.f()}this.codeTemplate=a},"problem.spjLanguage":function(t){var e=this;this.allSpjLanguage.length&&(this.spjMode=this.allSpjLanguage.find((function(t){return t.name==e.problem.spjLanguage&&1==t.isSpj})).contentType)}},methods:{init:function(){var t=this;if("edit"===this.mode){this.pid=this.$route.params.problemId,this.title="Edit Problem";var e={"admin-edit-problem":"admin_getProblem","admin-edit-contest-problem":"admin_getContestProblem"}[this.routeName];Dt[e](this.pid).then((function(e){e=e.data.data,e.spjCompileOk=!1,e.uploadTestcaseDir="",e.testCaseScore=[],e.spj=!0,e.spjCode||(e.spjCode="",e.spj=!1),e.spjLanguage=e.spjLanguage||"C",t.problem=e,t.problem.examples=at.stringToExamples(e.examples),t.testCaseUploaded=!0})),"admin_getContestProblem"===e&&Dt.admin_getContestProblemInfo(this.pid,this.contestID).then((function(e){t.contestProblem=e.data.data})),this.getProblemCodeTemplateAndLanguage(),this.isUploadTestCase||Dt.admin_getProblemCases(this.pid).then((function(e){t.problemSamples=e.data.data})),Dt.admin_getProblemTags(this.pid).then((function(e){t.problemTags=e.data.data}))}else{this.title="Create Problem";var s,a=Object(O.a)(this.allLanguage);try{for(a.s();!(s=a.n()).done;){var i=s.value;this.problemLanguages.push(i.name)}}catch(e){a.e(e)}finally{a.f()}}},getProblemCodeTemplateAndLanguage:function(){var t=this;return Object(ht.a)(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t,e.next=3,Dt.getProblemCodeTemplate(s.pid).then((function(t){s.problemCodeTemplate=t.data.data}));case 3:Dt.getProblemLanguages(s.pid).then((function(t){for(var e=t.data.data,a=0;a<e.length;a++)s.problemLanguages.push(e[a].name)}));case 4:case"end":return e.stop()}}),e)})))()},changeSampleUploadMethod:function(){var t=this;this.isUploadTestCase||0!=this.problemSamples.length||"edit"!=this.mode||this.$confirm("你确定要获取显示该题目的评测数据？可能该题目是使用zip上传，那么数据库默认无该测试数据！","注意",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Dt.admin_getProblemCases(t.pid).then((function(e){t.problemSamples=e.data.data,m.success(e.data.msg)}))})).catch((function(){}))},switchSpj:function(){var t=this;this.testCaseUploaded?this.$confirm("如果你想改变该题目的判题方法，那么你需要重新上传测试数据。","注意",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.problem.spj=!t.problem.spj,t.resetTestCase()})).catch((function(){})):this.problem.spj=!this.problem.spj},querySearch:function(t,e){var s=this;Dt.admin_getAllProblemTagList().then((function(t){var a=[];s.allTags=t.data.data;var i,n=Object(O.a)(t.data.data);try{for(n.s();!(i=n.n()).done;){var o=i.value;a.push({value:o.name})}}catch(t){n.e(t)}finally{n.f()}e(a)})).catch((function(){}))},changeContent:function(t){this.announcement.content=t},resetTestCase:function(){this.testCaseUploaded=!1,this.problem.testCaseScore=[],this.problem.uploadTestcaseDir=""},selectTag:function(t){for(var e=0;e<this.problemTags.length;e++)if(this.problemTags[e].name==t.value)return m.warning("该标签已添加，请不要重复添加！"),void(this.tagInput="");this.tagInput=t.value},addTag:function(t){var e={name:this.tagInput};if(this.tagInput){for(var s=0;s<this.problemTags.length;s++)if(this.problemTags[s].name==this.tagInput)return m.warning("该标签已添加，请不要重复添加！"),void(this.tagInput="");this.problemTags.push(e),this.inputVisible=!1,this.tagInput=""}},closeTag:function(t){this.problemTags.splice(this.problemTags.indexOf(t),1)},addExample:function(){this.problem.examples.push({input:"",output:""})},addSample:function(){"edit"===this.mode?this.problemSamples.push({input:"",output:"",score:0,pid:this.pid}):this.problemSamples.push({input:"",output:"",score:null,pid:this.pid})},deleteExample:function(t){this.problem.examples.splice(t,1)},deleteSample:function(t){this.problemSamples.splice(t,1)},uploadSucceeded:function(t){if(200!=t.status)return m.error(t.msg),void(this.testCaseUploaded=!1);m.success("上传测试数据包成功");var e=t.data.fileList,s=null;this.problem.ioScore&&(s=(this.problem.ioScore/e.length).toFixed(0));var a,i=Object(O.a)(e);try{for(i.s();!(a=i.n()).done;){var n=a.value;s&&(n.score=s),!n.output&&this.problem.spj&&(n.output="-")}}catch(t){i.e(t)}finally{i.f()}this.problem.testCaseScore=e,this.testCaseUploaded=!0,this.problem.uploadTestcaseDir=t.data.fileListDir},uploadFailed:function(){m.error("上传测试数据包失败")},compileSPJ:function(){var t=this,e={pid:this.problem.id,spjSrc:this.problem.spjCode,spjLanguage:this.problem.spjLanguage};this.loadingCompile=!0,Dt.compileSPJ(e).then((function(e){t.loadingCompile=!1,t.problem.spjCompileOk=!0,t.error.spj="",m.success(e.data.msg)}),(function(e){t.loadingCompile=!1,t.problem.spjCompileOk=!1;var s=t.$createElement;t.$msgbox({title:"Compile Error",type:"error",message:s("pre",e.data.msg),showCancelButton:!1,closeOnClickModal:!1,customClass:"dialog-compile-error"})}))},submit:function(){var t=this;if(this.problem.examples.length){var e,s=Object(O.a)(this.problem.examples);try{for(s.s();!(e=s.n()).done;){var a=e.value;if(!a.input||!a.output)return void m.error("每一项题面测试数据的输入输出都不能为空！")}}catch(e){s.e(e)}finally{s.f()}if(!this.problem.isRemote)if(this.isUploadTestCase){if(!this.testCaseUploaded)return this.error.testCase="评测数据不能为空！请先上传评测数据！",void m.error(this.error.testCase);if(1==this.problem.type){var i,n=Object(O.a)(this.problem.testCaseScore);try{for(n.s();!(i=n.n()).done;){var o=i.value;try{if(parseInt(o.score)<=0)return void m.error("测评得分小于0是无效的！")}catch(e){return void m.error("测评得分的结果必须是数字类型！")}}}catch(e){n.e(e)}finally{n.f()}}}else{if(!this.problemSamples.length)return void m.error("评测数据不能为空！请手动输入评测数据！");var r,l=Object(O.a)(this.problemSamples);try{for(l.s();!(r=l.n()).done;){var c=r.value;if(!c.input&&!c.output)return void m.error("每一项评测数据的输入和输出都不能同时为空！")}}catch(e){l.e(e)}finally{l.f()}if(1==this.problem.type){var u,d=Object(O.a)(this.problemSamples);try{for(d.s();!(u=d.n()).done;){var p=u.value;try{if(parseInt(p.score)<0)return void m.error("测评得分小于0是无效的！")}catch(e){return void m.error("测评得分的结果必须是整数类型！")}}}catch(e){d.e(e)}finally{d.f()}}}if(!this.problemTags.length)return this.error.tags="请添加至少一个题目标签！",void m.error(this.error.tags);if(this.problem.spj&&(this.problem.spjCode?this.problem.spjCompileOk||(this.error.spj="特殊判题的程序没有编译成功，请重新编译！"):(this.error.spj="特殊判题的程序代码不能为空！",m.error(this.error.spj)),this.error.spj))m.error(this.error.spj);else{if(!this.problemLanguages.length)return this.error.languages="请至少给题目选择一项编程语言！",void m.error(this.error.languages);var f={"admin-create-problem":"admin_createProblem","admin-edit-problem":"admin_editProblem","admin-create-contest-problem":"admin_createContestProblem","admin-edit-contest-problem":"admin_editContestProblem"}[this.routeName];"editContestProblem"===f&&(this.problem.cid=this.contest.id),"admin_createProblem"!==f&&"admin_createContestProblem"!==f||(this.problem.author=this.userInfo.username);for(var h=Object.assign([],this.problemTags),g=0;g<h.length;g++){var b,v=Object(O.a)(this.allTags);try{for(v.s();!(b=v.n()).done;){var w=b.value;if(h[g].name==w.name){h[g]=w;break}}}catch(e){v.e(e)}finally{v.f()}}this.problemCodeTemplate=[];for(var y=Object.assign([],this.problemLanguages),C=0;C<y.length;C++){y[C]={name:y[C]};var _,k=Object(O.a)(this.allLanguage);try{for(k.s();!(_=k.n()).done;){var x=_.value;if(y[C].name==x.name){y[C]=x,this.codeTemplate[x.name].status&&this.problemCodeTemplate.push({id:this.codeTemplate[x.name].id,pid:this.pid,code:this.codeTemplate[x.name].code,lid:x.id,status:this.codeTemplate[x.name].status});break}}}catch(e){k.e(e)}finally{k.f()}}var S={};S.problem=Object.assign({},this.problem),"add"==this.mode&&(S.problem.problemId=this.problemIdPrex+this.problem.problemId),S.problem.examples=at.examplesToString(this.problem.examples),S.codeTemplates=this.problemCodeTemplate,S.tags=h,S.languages=y,S.isUploadTestCase=this.isUploadTestCase,S.uploadTestcaseDir=this.problem.uploadTestcaseDir,S.isSpj=this.problem.spj,this.isUploadTestCase?S.samples=this.problem.testCaseScore:S.samples=this.problemSamples,Dt[f](S).then((function(e){"admin-create-contest-problem"===t.routeName||"admin-edit-contest-problem"===t.routeName?(e.data.data&&(t.contestProblem.pid=e.data.data.pid,t.contestProblem.cid=t.$route.params.contestId),Dt.admin_setContestProblemInfo(t.contestProblem).then((function(e){m.success(e.data.msg),t.$router.push({name:"admin-contest-problem-list",params:{contestId:t.$route.params.contestId}})}))):(m.success(e.data.msg),t.$router.push({name:"admin-problem-list"}))})).catch((function(){}))}}else m.error("题面测试数据是不能为空！至少输入一项！")}},computed:Object(o.a)({},Object(r.mapGetters)(["userInfo"]))}),_=(s("6d5f"),Object(v.a)(y,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"problem"},[s("el-card",[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title home-title"},[t._v(t._s(t.title))])]),s("el-form",{ref:"form",attrs:{model:t.problem,rules:t.rules,"label-position":"top","label-width":"70px"}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{prop:"problemId",label:"Problem ID",required:""}},[s("el-input",{attrs:{placeholder:"Enter the display id of problem"},model:{value:t.problem.problemId,callback:function(e){t.$set(t.problem,"problemId",e)},expression:"problem.problemId"}},["add"==t.mode?s("template",{slot:"prepend"},[t._v(t._s(t.problemIdPrex))]):t._e()],2)],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{prop:"title",label:"Title",required:""}},[s("el-input",{attrs:{placeholder:"Enter the title of problem"},model:{value:t.problem.title,callback:function(e){t.$set(t.problem,"title",e)},expression:"problem.title"}})],1)],1)],1),t.contestID?s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{md:12,xs:24}},[s("el-form-item",{attrs:{label:"Display Title"}},[s("el-input",{attrs:{placeholder:"Enter the display title of problem in contest"},model:{value:t.contestProblem.displayTitle,callback:function(e){t.$set(t.contestProblem,"displayTitle",e)},expression:"contestProblem.displayTitle"}})],1)],1),s("el-col",{attrs:{md:12,xs:24}},[s("el-form-item",{attrs:{label:"Display ID"}},[s("el-input",{attrs:{placeholder:"Enter the display ID of problem in contest"},model:{value:t.contestProblem.displayId,callback:function(e){t.$set(t.contestProblem,"displayId",e)},expression:"contestProblem.displayId"}})],1)],1)],1):t._e(),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{prop:"description",label:"Description",required:""}},[s("Editor",{attrs:{value:t.problem.description},on:{"update:value":function(e){return t.$set(t.problem,"description",e)}}})],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{md:8,xs:24}},[s("el-form-item",{attrs:{label:"Time Limit(ms)",required:""}},[s("el-input",{attrs:{type:"Number",placeholder:"Enter the time limit of problem",disabled:t.problem.isRemote},model:{value:t.problem.timeLimit,callback:function(e){t.$set(t.problem,"timeLimit",e)},expression:"problem.timeLimit"}})],1)],1),s("el-col",{attrs:{md:8,xs:24}},[s("el-form-item",{attrs:{label:"Memory Limit(mb)",required:""}},[s("el-input",{attrs:{type:"Number",placeholder:"Enter the memory limit of problem",disabled:t.problem.isRemote},model:{value:t.problem.memoryLimit,callback:function(e){t.$set(t.problem,"memoryLimit",e)},expression:"problem.memoryLimit"}})],1)],1),s("el-col",{attrs:{md:8,xs:24}},[s("el-form-item",{attrs:{label:"Level",required:""}},[s("el-select",{staticClass:"difficulty-select",attrs:{placeholder:"Enter the level of problem"},model:{value:t.problem.difficulty,callback:function(e){t.$set(t.problem,"difficulty",e)},expression:"problem.difficulty"}},[s("el-option",{attrs:{label:"Easy",value:0}}),s("el-option",{attrs:{label:"Mid",value:1}}),s("el-option",{attrs:{label:"Hard",value:2}})],1)],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{prop:"input_description",label:"Input Description",required:""}},[s("Editor",{attrs:{value:t.problem.input},on:{"update:value":function(e){return t.$set(t.problem,"input",e)}}})],1)],1),s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{prop:"output_description",label:"Output Description",required:""}},[s("Editor",{attrs:{value:t.problem.output},on:{"update:value":function(e){return t.$set(t.problem,"output",e)}}})],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{md:4,xs:24}},[s("el-form-item",{attrs:{label:"Auth"}},[s("el-select",{attrs:{size:"small"},model:{value:t.problem.auth,callback:function(e){t.$set(t.problem,"auth",e)},expression:"problem.auth"}},[s("el-option",{attrs:{label:"公开",value:1}}),s("el-option",{attrs:{label:"私有",value:2}}),s("el-option",{attrs:{label:"比赛题目",value:3}})],1)],1)],1),s("el-col",{attrs:{md:4,xs:24}},[s("el-form-item",{attrs:{label:"Code Shareable"}},[s("el-switch",{attrs:{"active-text":"","inactive-text":""},model:{value:t.problem.codeShare,callback:function(e){t.$set(t.problem,"codeShare",e)},expression:"problem.codeShare"}})],1)],1),s("el-col",{attrs:{md:16,xs:24}},[s("el-form-item",{attrs:{label:"Tags",required:""}},[t._l(t.problemTags,(function(e){return s("el-tag",{key:e.name,staticStyle:{"margin-right":"7px","margin-top":"4px"},attrs:{closable:"","close-transition":!1,size:"small"},on:{close:function(s){return t.closeTag(e.name)}}},[t._v(t._s(e.name))])})),t.inputVisible?s("el-autocomplete",{staticClass:"input-new-tag",attrs:{size:"mini","trigger-on-focus":!0,"fetch-suggestions":t.querySearch},on:{click:t.selectTag,blur:t.addTag,select:t.addTag},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addTag(e)}},model:{value:t.tagInput,callback:function(e){t.tagInput=e},expression:"tagInput"}}):s("el-tooltip",{attrs:{effect:"dark",content:"添加新标签",placement:"top"}},[s("el-button",{staticClass:"button-new-tag",attrs:{size:"small",icon:"el-icon-plus"},on:{click:function(e){t.inputVisible=!0}}})],1)],2)],1)],1),s("el-row",[s("el-col",{attrs:{md:24,xs:24}},[s("el-form-item",{attrs:{label:"Language",error:t.error.languages,required:""}},[s("el-checkbox-group",{model:{value:t.problemLanguages,callback:function(e){t.problemLanguages=e},expression:"problemLanguages"}},t._l(t.allLanguage,(function(t){return s("el-tooltip",{key:t.name,staticClass:"spj-radio",attrs:{effect:"dark",content:t.description,placement:"top-start"}},[s("el-checkbox",{attrs:{label:t.name}})],1)})),1)],1)],1)],1),s("div",[s("div",{staticClass:"panel-title home-title"},[t._v(" Problem Examples "),s("el-popover",{attrs:{placement:"right",trigger:"hover"}},[s("p",[t._v(" 题目样例：请最好不要超过2个题目样例，题面样例不纳入评测数据。 ")]),s("i",{staticClass:"el-icon-question",attrs:{slot:"reference"},slot:"reference"})])],1),t._l(t.problem.examples,(function(e,a){return s("el-form-item",{key:"example"+a},[s("Accordion",{attrs:{title:"Example"+(a+1)}},[s("el-button",{attrs:{slot:"header",type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(e){return t.deleteExample(a)}},slot:"header"},[t._v(" Delete ")]),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{xs:24,md:12}},[s("el-form-item",{attrs:{label:"Input Example",required:""}},[s("el-input",{staticStyle:{"white-space":"pre-line"},attrs:{rows:5,type:"textarea",placeholder:"Input Example"},model:{value:e.input,callback:function(s){t.$set(e,"input",s)},expression:"example.input"}})],1)],1),s("el-col",{attrs:{xs:24,md:12}},[s("el-form-item",{attrs:{label:"Output Example",required:""}},[s("el-input",{attrs:{rows:5,type:"textarea",placeholder:"Output Example"},model:{value:e.output,callback:function(s){t.$set(e,"output",s)},expression:"example.output"}})],1)],1)],1)],1)],1)}))],2),s("div",{staticClass:"add-example-btn"},[s("el-button",{staticClass:"add-examples",attrs:{icon:"el-icon-plus",type:"small"},on:{click:function(e){return t.addExample()}}},[t._v("Add Example ")])],1),t.problem.isRemote?t._e():[s("div",{staticClass:"panel-title home-title"},[t._v(" Special Judge "),s("el-popover",{attrs:{placement:"right",trigger:"hover"}},[s("p",[t._v("使用特殊判题的原因：")]),s("p",[t._v("1. 题目要求的输出结果可能不唯一，允许不同结果存在。")]),s("p",[t._v(" 2. 题目最终要求输出一个浮点数，而且会告诉只要答案和标准答案相差不超过某个较小的数就可以。 例如题目要求保留几位小数，输出结果后几位小数不相同也是正确的。 ")]),s("i",{staticClass:"el-icon-question",attrs:{slot:"reference"},slot:"reference"})])],1),s("el-form-item",{attrs:{label:"",error:t.error.spj}},[s("el-col",{attrs:{span:24}},[s("el-checkbox",{nativeOn:{click:function(e){return e.preventDefault(),t.switchSpj()}},model:{value:t.problem.spj,callback:function(e){t.$set(t.problem,"spj",e)},expression:"problem.spj"}},[t._v("Use Special Judge")])],1)],1),t.problem.spj?s("el-form-item",[s("Accordion",{attrs:{title:"Special Judge Code"}},[s("template",{slot:"header"},[s("span",{staticStyle:{"margin-right":"5px"}},[t._v("SPJ language：")]),s("el-radio-group",{model:{value:t.problem.spjLanguage,callback:function(e){t.$set(t.problem,"spjLanguage",e)},expression:"problem.spjLanguage"}},t._l(t.allSpjLanguage,(function(e){return s("el-tooltip",{key:e.name,staticClass:"spj-radio",attrs:{effect:"dark",content:e.description,placement:"top-start"}},[s("el-radio",{attrs:{label:e.name}},[t._v(t._s(e.name))])],1)})),1),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small",icon:"el-icon-folder-checked",loading:t.loadingCompile},on:{click:t.compileSPJ}},[t._v("Complie ")])],1),s("code-mirror",{attrs:{mode:t.spjMode},model:{value:t.problem.spjCode,callback:function(e){t.$set(t.problem,"spjCode",e)},expression:"problem.spjCode"}})],2)],1):t._e()],s("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"Hint"}},[s("Editor",{attrs:{value:t.problem.hint},on:{"update:value":function(e){return t.$set(t.problem,"hint",e)}}})],1),s("el-form-item",{attrs:{label:"Code Template"}},[s("el-row",t._l(t.codeTemplate,(function(e,a){return s("el-col",{key:"template"+a,attrs:{span:24}},[s("el-form-item",[s("el-checkbox",{model:{value:e.status,callback:function(s){t.$set(e,"status",s)},expression:"v.status"}},[t._v(t._s(a))]),e.status?s("div",[s("code-mirror",{attrs:{mode:e.mode},model:{value:e.code,callback:function(s){t.$set(e,"code",s)},expression:"v.code"}})],1):t._e()],1)],1)})),1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"Type"}},[s("el-radio-group",{attrs:{disabled:t.disableRuleType||t.problem.isRemote},model:{value:t.problem.type,callback:function(e){t.$set(t.problem,"type",e)},expression:"problem.type"}},[s("el-radio",{attrs:{label:0}},[t._v("ACM")]),s("el-radio",{attrs:{label:1}},[t._v("OI")])],1)],1)],1)],1),t.problem.isRemote?t._e():s("el-row",{attrs:{gutter:20}},[s("div",{staticClass:"panel-title home-title"},[t._v(" Judge Samples "),s("el-popover",{attrs:{placement:"right",trigger:"hover"}},[s("p",[t._v("评测数据：判题机对该题目的相关提交进行评测的数据来源。")]),s("i",{staticClass:"el-icon-question",attrs:{slot:"reference"},slot:"reference"})])],1),s("el-switch",{staticStyle:{margin:"10px 0"},attrs:{"active-text":"Use Upload File","inactive-text":"Use Manual Input"},on:{change:t.changeSampleUploadMethod},model:{value:t.isUploadTestCase,callback:function(e){t.isUploadTestCase=e},expression:"isUploadTestCase"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isUploadTestCase,expression:"isUploadTestCase"}]},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{error:t.error.testcase}},[s("el-upload",{attrs:{action:t.uploadFileUrl,name:"file","show-file-list":!0,"on-success":t.uploadSucceeded,"on-error":t.uploadFailed}},[s("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-upload"}},[t._v("Choose File")])],1)],1)],1),s("el-col",{attrs:{span:24}},[s("vxe-table",{attrs:{stripe:"","auto-resize":"",data:t.problem.testCaseScore,align:"center"}},[s("vxe-table-column",{attrs:{field:"input",title:"Input","min-width":"100"}}),s("vxe-table-column",{attrs:{field:"output",title:"Output","min-width":"100"}}),s("vxe-table-column",{attrs:{field:"score",title:"Score","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("el-input",{attrs:{size:"small",placeholder:"Score",disabled:1!=t.problem.type},model:{value:a.score,callback:function(e){t.$set(a,"score",e)},expression:"row.score"}})]}}],null,!1,2263974520)})],1)],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isUploadTestCase,expression:"!isUploadTestCase"}]},[t._l(t.problemSamples,(function(e,a){return s("el-form-item",{key:"sample"+a},[s("Accordion",{attrs:{title:"Sample"+(a+1)}},[s("el-button",{attrs:{slot:"header",type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(e){return t.deleteSample(a)}},slot:"header"},[t._v(" Delete ")]),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{xs:24,md:12}},[s("el-form-item",{attrs:{label:"Input Sample",required:""}},[s("el-input",{attrs:{rows:5,type:"textarea",placeholder:"Input Sample"},model:{value:e.input,callback:function(s){t.$set(e,"input",s)},expression:"sample.input"}})],1)],1),s("el-col",{attrs:{xs:24,md:12}},[s("el-form-item",{attrs:{label:"Output Sample",required:""}},[s("el-input",{attrs:{rows:5,type:"textarea",placeholder:"Output Sample"},model:{value:e.output,callback:function(s){t.$set(e,"output",s)},expression:"sample.output"}})],1)],1),s("el-col",{directives:[{name:"show",rawName:"v-show",value:1==t.problem.type&&null!=e.score,expression:"problem.type == 1 && sample.score != null"}],attrs:{span:24}},[s("el-form-item",{attrs:{label:"IO Score"}},[s("el-input",{attrs:{type:"number",size:"small",placeholder:"The score of the testcase"},model:{value:e.score,callback:function(s){t.$set(e,"score",s)},expression:"sample.score"}})],1)],1)],1)],1)],1)})),s("div",{staticClass:"add-sample-btn"},[s("el-button",{staticClass:"add-samples",attrs:{icon:"el-icon-plus",type:"small"},on:{click:function(e){return t.addSample()}}},[t._v("Add Sample ")])],1)],2)],1),s("el-form-item",{attrs:{label:"Source"}},[s("el-input",{attrs:{placeholder:"Enter the problem where from"},model:{value:t.problem.source,callback:function(e){t.$set(t.problem,"source",e)},expression:"problem.source"}})],1),t.problem.isRemote?t._e():s("el-form-item",{attrs:{label:"Auto Remove the Blank at the End of Code"}},[s("el-switch",{attrs:{"active-text":"","inactive-text":""},model:{value:t.problem.isRemoveEndBlank,callback:function(e){t.$set(t.problem,"isRemoveEndBlank",e)},expression:"problem.isRemoveEndBlank"}})],1),t.problem.isRemote?t._e():s("el-form-item",{attrs:{label:"Publish the Judging Result of Test Data"}},[s("el-switch",{attrs:{"active-text":"","inactive-text":""},model:{value:t.problem.openCaseResult,callback:function(e){t.$set(t.problem,"openCaseResult",e)},expression:"problem.openCaseResult"}})],1),s("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){return t.submit()}}},[t._v("Save")])],2)],1)],1)}),[],!1,null,"7815aa56",null).exports),x=(s("a15b"),{name:"import_and_export",data:function(){return{fileList1:[],page:1,limit:10,total:0,loadingProblems:!1,loadingImporting:!1,keyword:"",problems:[{id:1001,author:"Himit_ZH",title:"测试题目",gmtCreate:"2020-11-11 11:11:11"}],selected_problems:[]}},mounted:function(){},methods:{handleSelectionChange:function(t){t=t.records,this.selected_problems=t},handlechangeAll:function(){this.selected_problems=this.$refs.xTable.getCheckboxRecords()},getProblems:function(){var t=this,e={keyword:this.keyword,offset:((0<arguments.length&&void 0!==arguments[0]?arguments[0]:1)-1)*this.limit,limit:this.limit};this.loadingProblems=!0,Dt.getProblemList(e).then((function(e){t.problems=e.data.data.results,t.total=e.data.data.total,t.loadingProblems=!1}))},exportProblems:function(){var t,e=[],s=Object(O.a)(this.selected_problems);try{for(s.s();!(t=s.n()).done;){var a=t.value;e.push("problem_id="+a.id)}}catch(t){s.e(t)}finally{s.f()}var i="/admin/export_problem?"+e.join("&");at.downloadFile(i)},submitUpload:function(t){this.$refs[t].submit()},onFile1Change:function(t,e){this.fileList1=e.slice(-1)},onFile2Change:function(t,e){this.fileList2=e.slice(-1)},uploadSucceeded:function(t){t.error?this.$error(t.data):(this.$success("Successfully imported "+t.data.import_count+" problems"),this.getProblems())},uploadFailed:function(){this.$error("Upload failed")},filterByKeyword:function(){this.getProblems()}}}),k=(s("fdd8"),Object(v.a)(x,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",[e("el-card",[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"panel-title home-title"},[t._v("Export Problems(暂不支持使用！)")]),e("div",{staticClass:"filter-row"},[e("span",[e("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-arrow-down"},on:{click:t.exportProblems}},[t._v("Export ")])],1),e("span",[e("vxe-input",{attrs:{placeholder:"Enter keyword",type:"search",size:"medium"},on:{"search-click":t.filterByKeyword},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)])]),e("vxe-table",{ref:"xTable",attrs:{data:t.problems,stripe:"","auto-resize":"",loading:t.loadingProblems,"checkbox-config":{labelField:"",highlight:!0,range:!0}},on:{"checkbox-change":t.handleSelectionChange,"checkbox-all":t.handlechangeAll}},[e("vxe-table-column",{attrs:{type:"checkbox",width:"60"}}),e("vxe-table-column",{attrs:{title:"ID","min-width":"100",field:"id"}}),e("vxe-table-column",{attrs:{"min-width":"150",title:"Title",field:"title"}}),e("vxe-table-column",{attrs:{"min-width":"150",field:"author",title:"Author"}}),e("vxe-table-column",{attrs:{field:"gmtCreate",title:"Create Time"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[t._v(" "+t._s(t._f("localtime")(e.create_time))+" ")]}}])})],1),e("div",{staticClass:"panel-options"},[e("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next","page-size":t.limit,total:t.total},on:{"current-change":t.getProblems}})],1)],1),e("el-card",{staticStyle:{"margin-top":"15px"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"panel-title home-title"},[t._v("Import QDUOJ Problems")])]),e("el-upload",{ref:"QDU",attrs:{action:"/api/admin/import_problem",name:"file","file-list":t.fileList1,"show-file-list":!0,"with-credentials":!0,limit:3,"on-change":t.onFile1Change,"auto-upload":!1,"on-success":t.uploadSucceeded,"on-error":t.uploadFailed}},[e("el-button",{attrs:{slot:"trigger",size:"small",type:"primary",icon:"el-icon-folder-opened"},slot:"trigger"},[t._v("Choose File")]),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success",icon:"el-icon-upload"},on:{click:function(e){return t.submitUpload("QDU")}}},[t._v("Upload")])],1)],1)],1)}),[],!1,null,"4f4fa058",null).exports),T=s("c32d"),s.n(T)),wt={utcToLocal:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD  HH:mm:ss";return vt.a.utc(t).local().format(e)},duration:function(t,e){return t=vt()(t),e=vt()(e),0!==(e=vt.a.duration(t.diff(e,"seconds"),"seconds")).days()?e.humanize():Math.abs(e.asHours().toFixed(1))+" hours"},secondFormat:function(t){var e=vt.a.duration(t,"seconds");t=10<=e.seconds()?e.seconds():"0"+e.seconds();return(10<=Math.floor(e.asHours())?Math.floor(e.asHours()):"0"+Math.floor(e.asHours()))+":"+(10<=e.minutes()?e.minutes():"0"+e.minutes())+":"+t},durationMs:function(t,e){return t=vt()(t),vt()(e).diff(t,"seconds")},formatDuration:function(t){return 0!==(t=vt.a.duration(t)).days()?t.humanize():Math.abs(t.asHours().toFixed(1))+" hours"}},yt=(I={name:"CreateContest",components:{Editor:ct},data:function(){return{title:"Create Contest",disableRuleType:!1,durationText:"",seal_rank_time:0,contest:{title:"",description:"",startTime:"",endTime:"",duration:0,type:0,password:"",sealRank:!0,sealRankTime:"",auth:0}}},mounted:function(){"admin-edit-contest"===this.$route.name&&(this.title="Edit Contest",this.disableRuleType=!0,this.getContestByCid())},watch:{$route:function(){"admin-edit-contest"===this.$route.name?(this.title="Edit Contest",this.disableRuleType=!0,this.getContestByCid()):(this.title="Create Contest",this.disableRuleType=!1,this.contest=[])}},computed:Object(o.a)({},Object(r.mapGetters)(["userInfo"])),methods:{getContestByCid:function(){var t=this;Dt.admin_getContest(this.$route.params.contestId).then((function(e){var s=e.data.data;t.contest=s,t.changeDuration();var a=vt()(t.contest.endTime).subtract(1800,"seconds").toString();e=vt()(t.contest.endTime).subtract(3600,"seconds").toString(),s=vt()(t.contest.startTime).toString();switch(vt()(t.contest.sealRankTime).toString()){case a:t.seal_rank_time=0;break;case e:t.seal_rank_time=1;break;case s:t.seal_rank_time=2}})).catch((function(){}))},saveContest:function(){var t=this,e="admin-edit-contest"===this.$route.name?"admin_editContest":"admin_createContest";switch(this.seal_rank_time){case 0:this.contest.sealRankTime=vt()(this.contest.endTime).subtract(1800,"seconds");break;case 1:this.contest.sealRankTime=vt()(this.contest.endTime).subtract(3600,"seconds");break;case 2:this.contest.sealRankTime=vt()(this.contest.startTime)}var s=Object.assign({},this.contest);"admin_createContest"==e&&(s.uid=this.userInfo.uid,s.author=this.userInfo.username),Dt[e](s).then((function(e){m.success(e.data.msg),t.$router.push({name:"admin-contest-list",query:{refresh:"true"}})})).catch((function(){}))},changeDuration:function(){var t=this.contest.startTime,e=this.contest.endTime,s=wt.durationMs(t,e);if(s<0)return this.durationText="比赛起始时间不应该晚于结束时间！",void(this.contest.duration=0);""!=t&&""!=e&&(this.durationText=wt.duration(t,e),this.contest.duration=s)}}},D=Object(v.a)(I,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",{staticClass:"view"},[e("el-card",[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"panel-title home-title"},[t._v(" "+t._s(t.title)+" ")])]),e("el-form",{attrs:{"label-position":"top"}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"Contest Title",required:""}},[e("el-input",{attrs:{placeholder:"Enter the Contest Title"},model:{value:t.contest.title,callback:function(e){t.$set(t.contest,"title",e)},expression:"contest.title"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"Contest Description",required:""}},[e("Editor",{attrs:{value:t.contest.description},on:{"update:value":function(e){return t.$set(t.contest,"description",e)}}})],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{attrs:{label:"Contest Start Time",required:""}},[e("el-date-picker",{attrs:{type:"datetime",placeholder:"Enter the Contest Start Time"},on:{change:t.changeDuration},model:{value:t.contest.startTime,callback:function(e){t.$set(t.contest,"startTime",e)},expression:"contest.startTime"}})],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{attrs:{label:"Contest End Time",required:""}},[e("el-date-picker",{attrs:{type:"datetime",placeholder:"Enter the Contest End Time"},on:{change:t.changeDuration},model:{value:t.contest.endTime,callback:function(e){t.$set(t.contest,"endTime",e)},expression:"contest.endTime"}})],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{attrs:{label:"Contest Duration",required:""}},[e("el-input",{attrs:{disabled:""},model:{value:t.durationText,callback:function(e){t.durationText=e},expression:"durationText"}})],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{attrs:{label:"Contest Type"}},[e("el-radio",{staticClass:"radio",attrs:{label:0,disabled:t.disableRuleType},model:{value:t.contest.type,callback:function(e){t.$set(t.contest,"type",e)},expression:"contest.type"}},[t._v("ACM")]),e("el-radio",{staticClass:"radio",attrs:{label:1,disabled:t.disableRuleType},model:{value:t.contest.type,callback:function(e){t.$set(t.contest,"type",e)},expression:"contest.type"}},[t._v("OI")])],1)],1),t.contest.sealRank?e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{attrs:{label:"Seal Time Rank"}},[e("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.contest.sealRank,callback:function(e){t.$set(t.contest,"sealRank",e)},expression:"contest.sealRank"}})],1)],1):e("el-col",{attrs:{md:16,xs:24}},[e("el-form-item",{attrs:{label:"Real Time Rank"}},[e("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":""},model:{value:t.contest.sealRank,callback:function(e){t.$set(t.contest,"sealRank",e)},expression:"contest.sealRank"}})],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.contest.sealRank,expression:"contest.sealRank"}],attrs:{label:"Seal Rank Time",required:t.contest.sealRank}},[e("el-select",{model:{value:t.seal_rank_time,callback:function(e){t.seal_rank_time=e},expression:"seal_rank_time"}},[e("el-option",{attrs:{label:"比赛结束前半小时",value:0,disabled:t.contest.duration<1800}}),e("el-option",{attrs:{label:"比赛结束前一小时",value:1,disabled:t.contest.duration<3600}}),e("el-option",{attrs:{label:"比赛全程时间",value:2}})],1)],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{attrs:{label:"Contest Auth",required:""}},[e("el-select",{model:{value:t.contest.auth,callback:function(e){t.$set(t.contest,"auth",e)},expression:"contest.auth"}},[e("el-option",{attrs:{label:"公开赛",value:0}}),e("el-option",{attrs:{label:"私有赛",value:1}}),e("el-option",{attrs:{label:"保护赛",value:2}})],1)],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0!=t.contest.auth,expression:"contest.auth != 0"}],attrs:{label:"Contest Password",required:0!=t.contest.auth}},[e("el-input",{attrs:{placeholder:"Contest Password"},model:{value:t.contest.pwd,callback:function(e){t.$set(t.contest,"pwd",e)},expression:"contest.pwd"}})],1)],1)],1)],1),e("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.saveContest(e)}}},[t._v("Save")])],1)],1)}),[],!1,null,null,null).exports,A={name:"ContestList",data:function(){return{pageSize:10,total:0,contestList:[],keyword:"",loading:!1,excludeAdmin:!0,currentPage:1,currentId:1,downloadDialogVisible:!1,CONTEST_TYPE_REVERSE:{}}},mounted:function(){this.CONTEST_TYPE_REVERSE=Object.assign({},G),this.CONTEST_STATUS_REVERSE=Object.assign({},H),this.getContestList(this.currentPage)},watch:{$route:function(){"true"==this.$route.query.refresh&&this.getContestList(1)}},methods:{currentChange:function(t){this.currentPage=t,this.getContestList(t)},getContestList:function(t){var e=this;this.loading=!0,Dt.admin_getContestList(t,this.pageSize,this.keyword).then((function(t){e.loading=!1,e.total=t.data.data.total,e.contestList=t.data.data.records}),(function(t){e.loading=!1}))},openDownloadOptions:function(t){this.downloadDialogVisible=!0,this.currentId=t},downloadSubmissions:function(){var t="/api/file/download-contest-ac-submission?cid=".concat(this.currentId,"&excludeAdmin=").concat(this.excludeAdmin);at.downloadFile(t),this.downloadDialogVisible=!1},goEdit:function(t){this.$router.push({name:"admin-edit-contest",params:{contestId:t}})},goContestAnnouncement:function(t){this.$router.push({name:"admin-contest-announcement",params:{contestId:t}})},goContestProblemList:function(t){this.$router.push({name:"admin-contest-problem-list",params:{contestId:t}})},filterByKeyword:function(){this.currentChange(1)}}},it=(s("edac"),Object(v.a)(A,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-card",[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title home-title"},[t._v("Contest List")]),s("div",{staticClass:"filter-row"},[s("span",[s("vxe-input",{attrs:{placeholder:"Enter keyword",type:"search",size:"medium"},on:{"search-click":t.filterByKeyword},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterByKeyword(e)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)])]),s("vxe-table",{ref:"xTable",attrs:{loading:t.loading,data:t.contestList,"auto-resize":"",stripe:""}},[s("vxe-table-column",{attrs:{field:"id","min-width":"80",title:"ID"}}),s("vxe-table-column",{attrs:{field:"title","min-width":"150",title:"Title"}}),s("vxe-table-column",{attrs:{title:"Type","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("el-tag",{attrs:{type:"gray"}},[t._v(t._s(t._f("parseContestType")(e.type)))])]}}])}),s("vxe-table-column",{attrs:{title:"Auth","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("el-tooltip",{attrs:{content:t.CONTEST_TYPE_REVERSE[e.auth].tips,placement:"top",effect:"light"}},[s("el-tag",{attrs:{type:t.CONTEST_TYPE_REVERSE[e.auth].color,effect:"plain"}},[t._v(" "+t._s(t.CONTEST_TYPE_REVERSE[e.auth].name)+" ")])],1)]}}])}),s("vxe-table-column",{attrs:{title:"Status","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("el-tag",{attrs:{effect:"dark",color:t.CONTEST_STATUS_REVERSE[e.status].color,size:"medium"}},[t._v(" "+t._s(t.CONTEST_STATUS_REVERSE[e.status].name)+" ")])]}}])}),s("vxe-table-column",{attrs:{"min-width":"210",title:"More"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("p",[t._v("Start Time: "+t._s(t._f("localtime")(e.startTime)))]),s("p",[t._v("End Time: "+t._s(t._f("localtime")(e.endTime)))]),s("p",[t._v("Create Time: "+t._s(t._f("localtime")(e.gmtCreate)))]),s("p",[t._v("Creator: "+t._s(e.author))])]}}])}),s("vxe-table-column",{attrs:{"min-width":"250",title:"Option"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("el-tooltip",{attrs:{effect:"dark",content:"编辑比赛",placement:"top"}},[s("el-button",{attrs:{icon:"el-icon-edit",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.goEdit(a.id)}}})],1),s("el-tooltip",{attrs:{effect:"dark",content:"查看比赛题目列表",placement:"top"}},[s("el-button",{attrs:{icon:"el-icon-tickets",size:"mini",type:"success"},nativeOn:{click:function(e){return t.goContestProblemList(a.id)}}})],1),s("el-tooltip",{attrs:{effect:"dark",content:"查看比赛公告列表",placement:"top"}},[s("el-button",{attrs:{icon:"el-icon-info",size:"mini",type:"info"},nativeOn:{click:function(e){return t.goContestAnnouncement(a.id)}}})],1),s("el-tooltip",{attrs:{effect:"dark",content:"下载通过的提交代码",placement:"top"}},[s("el-button",{attrs:{icon:"el-icon-download",size:"mini",type:"danger"},nativeOn:{click:function(e){return t.openDownloadOptions(a.id)}}})],1)]}}])})],1),s("div",{staticClass:"panel-options"},[s("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next","page-size":t.pageSize,total:t.total},on:{"current-change":t.currentChange}})],1)],1),s("el-dialog",{attrs:{title:"Download Contest Submissions",width:"320px",visible:t.downloadDialogVisible},on:{"update:visible":function(e){t.downloadDialogVisible=e}}},[s("el-switch",{attrs:{"active-text":"Exclude admin submissions"},model:{value:t.excludeAdmin,callback:function(e){t.excludeAdmin=e},expression:"excludeAdmin"}}),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.downloadSubmissions}},[t._v("确 定")])],1)],1)],1)}),[],!1,null,"43e424b1",null).exports),ot={name:"discussion",data:function(){return{pageSize:10,discussionTotal:0,discussionList:[],selectedDiscussions:[],keyword:"",discussionLoadingTable:!1,discussionCurrentPage:1,discussionReportList:[],discussionReportTotal:0,discussionReportCurrentPage:1,discussionReportLoadingTable:!1}},mounted:function(){this.getDiscussionList(1),this.getDiscussionReportList()},methods:{discussionCurrentChange:function(t){this.discussionCurrentPage=t,this.getDiscussionList(t)},discussionReportCurrentChange:function(t){this.discussionReportCurrentPage=t,this.getDiscussionReportList()},getDiscussionList:function(t){var e=this;this.discussionLoadingTable=!0,t={currentPage:t,keyword:this.keyword},Dt.getDiscussionList(this.pageSize,t).then((function(t){e.discussionLoadingTable=!1,e.discussionTotal=t.data.data.total,e.discussionList=t.data.data.records}),(function(t){e.discussionLoadingTable=!1}))},getDiscussionReportList:function(){var t=this;this.discussionReportLoadingTable=!0,Dt.admin_getDiscussionReport(this.discussionReportCurrentPage,this.pageSize).then((function(e){t.discussionReportLoadingTable=!1,t.discussionReportList=e.data.data.records,t.discussionReportTotal=e.data.data.total}),(function(e){t.discussionReportLoadingTable=!1}))},filterByKeyword:function(){this.discussionCurrentChange(1),this.keyword=""},handleSelectionChange:function(t){var e=t.records;this.selectedDiscussions=[];for(var s=0;s<e.length;s++)this.selectedDiscussions.push(e[s].id)},handlechangeAll:function(){var t=this.$refs.xTable.getCheckboxRecords();this.selectedDiscussions=[];for(var e=0;e<t.length;e++)this.selectedDiscussions.push(t[e].id)},changeDiscussionStatus:function(t){t={id:t.id,status:t.status},Dt.admin_updateDiscussion(t).then((function(t){m.success(t.data.msg)}))},handleTopSwitch:function(t){t={id:t.id,topPriority:t.topPriority},Dt.admin_updateDiscussion(t).then((function(t){m.success(t.data.msg)}))},handleCheckedSwitch:function(t){t={id:t.id,status:t.status},Dt.admin_updateDiscussionReport(t).then((function(t){m.success(t.data.msg)}))},toDiscussion:function(t){window.open("/discussion-detail/"+t)},deleteDiscussion:function(t){var e=this;0<(t=t||this.selectedDiscussions).length?this.$confirm("你确定要删除该讨论？这样会关联删除该讨论的评论及回复","确认",{type:"warning"}).then((function(){Dt.admin_deleteDiscussion(t).then((function(t){m.success(t.data.msg),e.selectedDiscussions=[],e.getDiscussionList(e.currentPage)})).catch((function(){e.selectedDiscussions=[],e.getDiscussionList(e.currentPage)}))}),(function(){})):m.warning("勾选的讨论不能为空！")},openReportDialog:function(t){for(var e,s=RegExp("#(.*?)# ","g"),a="<strong>标签</strong>：";e=s.exec(t);)a+=e[1]+" ";a+="<br><br><strong>内容</strong>："+t.replace(/#(.*?)# /g,""),this.$alert(a,"举报内容",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0})}}},lt=(s("4090"),[{path:"/admin/login",name:"admin-login",component:w,meta:{title:"Login"}},{path:"/admin/",component:P,meta:{requireAuth:!0,requireAdmin:!0},children:[{path:"",redirect:"dashboard",component:R,meta:{title:"Dashboard"}},{path:"dashboard",name:"admin-dashboard",component:R,meta:{title:"Dashboard"}},{path:"user",name:"admin-user",component:nt,meta:{requireSuperAdmin:!0,title:"User"}},{path:"announcement",name:"admin-announcement",component:dt,meta:{requireSuperAdmin:!0,title:"Announcement"}},{path:"conf",name:"admin-conf",component:pt,meta:{requireSuperAdmin:!0,title:"System Config"}},{path:"problems",name:"admin-problem-list",component:i,meta:{title:"Problem List"}},{path:"problem/create",name:"admin-create-problem",component:_,meta:{title:"Create Problem"}},{path:"problem/edit/:problemId",name:"admin-edit-problem",component:_,meta:{title:"Edit Problem"}},{path:"problem/batch-operation",name:"admin-problem_batch_operation",component:k,meta:{title:"Problem Operation"}},{path:"contest/create",name:"admin-create-contest",component:D,meta:{title:"Create Contest"}},{path:"contest",name:"admin-contest-list",component:it,meta:{title:"Contest List"}},{path:"contest/:contestId/edit",name:"admin-edit-contest",component:D,meta:{title:"Edit Contest"}},{path:"contest/:contestId/announcement",name:"admin-contest-announcement",component:dt,meta:{title:"Create Contest Announcement"}},{path:"contest/:contestId/problems",name:"admin-contest-problem-list",component:i,meta:{title:"Contest Problem List"}},{path:"contest/:contestId/problem/create",name:"admin-create-contest-problem",component:_,meta:{title:"Create Contest Problem"}},{path:"contest/:contestId/problem/:problemId/edit",name:"admin-edit-contest-problem",component:_,meta:{title:"Edit Contest Problem"}},{path:"discussion",name:"admin-discussion-list",component:Object(v.a)(ot,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-card",[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title home-title"},[t._v("Discussion List")]),s("div",{staticClass:"filter-row"},[s("span",[s("el-button",{attrs:{type:"danger",icon:"el-icon-delete-solid",size:"small"},on:{click:function(e){return t.deleteDiscussion(null)}}},[t._v("Delete ")])],1),s("span",[s("vxe-input",{attrs:{placeholder:"Enter keyword",type:"search",size:"medium"},on:{"search-click":t.filterByKeyword},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterByKeyword(e)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)])]),s("vxe-table",{ref:"xTable",attrs:{stripe:"","auto-resize":"",data:t.discussionList,loading:t.discussionLoadingTable,"checkbox-config":{highlight:!0,range:!0}},on:{"checkbox-change":t.handleSelectionChange,"checkbox-all":t.handlechangeAll}},[s("vxe-table-column",{attrs:{type:"checkbox",width:"60"}}),s("vxe-table-column",{attrs:{field:"id",title:"ID",width:"60"}}),s("vxe-table-column",{attrs:{field:"title",title:"Title","min-width":"150"}}),s("vxe-table-column",{attrs:{field:"author",title:"Author","min-width":"150"}}),s("vxe-table-column",{attrs:{field:"likeNum",title:"Like Num","min-width":"96"}}),s("vxe-table-column",{attrs:{field:"viewNum",title:"View Num","min-width":"96"}}),s("vxe-table-column",{attrs:{field:"gmtCreate",title:"Create Time","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[t._v(" "+t._s(t._f("localtime")(e.gmtCreate))+" ")]}}])}),s("vxe-table-column",{attrs:{field:"status",title:"Status","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("el-select",{attrs:{size:"small"},on:{change:function(e){return t.changeDiscussionStatus(a)}},model:{value:a.status,callback:function(e){t.$set(a,"status",e)},expression:"row.status"}},[s("el-option",{key:0,attrs:{label:"正常",value:0}}),s("el-option",{key:1,attrs:{label:"封禁",value:1}})],1)]}}])}),s("vxe-table-column",{attrs:{"min-width":"100",field:"topPriority",title:"Top"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("el-switch",{attrs:{"active-text":"","inactive-text":"","active-value":!0,"inactive-value":!1},on:{change:function(e){return t.handleTopSwitch(a)}},model:{value:a.topPriority,callback:function(e){t.$set(a,"topPriority",e)},expression:"row.topPriority"}})]}}])}),s("vxe-table-column",{attrs:{title:"Option","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("el-tooltip",{attrs:{effect:"dark",content:"删除讨论",placement:"top"}},[s("el-button",{attrs:{icon:"el-icon-delete-solid",size:"mini",type:"danger"},nativeOn:{click:function(e){return t.deleteDiscussion([a.id])}}})],1),s("el-tooltip",{attrs:{effect:"dark",content:"查看讨论",placement:"top"}},[s("el-button",{attrs:{icon:"el-icon-search",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.toDiscussion(a.id)}}})],1)]}}])})],1),s("div",{staticClass:"panel-options"},[s("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next","page-size":t.pageSize,total:t.discussionTotal},on:{"current-change":t.discussionCurrentChange}})],1)],1),s("el-card",{staticStyle:{"margin-top":"20px"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title home-title"},[t._v("Discussion Report")])]),s("vxe-table",{ref:"table",attrs:{loading:t.discussionReportLoadingTable,align:"center",data:t.discussionReportList,"auto-resize":"",stripe:""}},[s("vxe-table-column",{attrs:{"min-width":"60",field:"id",title:"ID"}}),s("vxe-table-column",{attrs:{"min-width":"150",field:"did",title:"Discussion ID"}}),s("vxe-table-column",{attrs:{"min-width":"150",field:"reporter",title:"Reporter Name"}}),s("vxe-table-column",{attrs:{"min-width":"150",field:"gmtCreate",title:"Report Time"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[t._v(" "+t._s(t._f("localtime")(e.gmtCreate))+" ")]}}])}),s("vxe-table-column",{attrs:{"min-width":"100",field:"status",title:"Checked"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("el-switch",{attrs:{"active-text":"","inactive-text":"","active-value":!0,"inactive-value":!1},on:{change:function(e){return t.handleCheckedSwitch(a)}},model:{value:a.status,callback:function(e){t.$set(a,"status",e)},expression:"row.status"}})]}}])}),s("vxe-table-column",{attrs:{title:"Content","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击查看举报内容",placement:"top"}},[s("el-button",{attrs:{icon:"el-icon-document",size:"mini",type:"success"},nativeOn:{click:function(e){return t.openReportDialog(a.content)}}})],1),s("el-tooltip",{attrs:{effect:"dark",content:"查看讨论",placement:"top"}},[s("el-button",{attrs:{icon:"el-icon-search",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.toDiscussion(a.did)}}})],1)]}}])})],1),s("div",{staticClass:"panel-options"},[s("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next","page-size":t.pageSize,total:t.discussionReportTotal},on:{"current-change":t.discussionReportCurrentChange}})],1)],1)],1)}),[],!1,null,"6ffe8faf",null).exports,meta:{title:"Discussion List"}}]},{path:"/admin/*",redirect:"/admin/login"}]),ut=(s("a4d3"),s("e01a"),{name:"pagination",props:{total:{required:!0,type:Number},pageSize:{required:!1,type:Number},showSizer:{required:!1,type:Boolean,default:!1},current:{required:!1,type:Number}},methods:{onChange:function(t){this.$emit("update:current",t=t<1?1:t),this.$emit("on-change",t)},onPageSizeChange:function(t){this.$emit("update:pageSize",t),this.$emit("on-page-size-change",t)}}}),mt=(s("d3d3"),Object(v.a)(ut,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",{staticClass:"page"},[e("el-pagination",{attrs:{background:"",total:t.total,"page-size":t.pageSize,layout:"prev, pager, next","page-sizes":[10,30,50,100,200],"current-page":t.current},on:{"current-change":t.onChange,"size-change":t.onPageSizeChange}})],1)}),[],!1,null,"6be592ce",null).exports),ft={name:"Announcement",components:{Pagination:mt},data:function(){return{limit:5,total:0,btnLoading:!1,announcements:[],announcement:"",listVisible:!0}},mounted:function(){this.init()},methods:{init:function(){this.isContest?this.getContestAnnouncementList():this.getAnnouncementList()},getAnnouncementList:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.btnLoading=!0,Dt.getAnnouncementList(e,this.limit).then((function(e){t.btnLoading=!1,t.announcements=e.data.data.records,t.total=e.data.data.total}),(function(){t.btnLoading=!1}))},getContestAnnouncementList:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.btnLoading=!0,Dt.getContestAnnouncementList(e,this.limit,this.$route.params.contestID).then((function(e){t.btnLoading=!1,t.announcements=e.data.data.records,t.total=e.data.data.total}),(function(){t.btnLoading=!1}))},goAnnouncement:function(t){this.announcement=t,this.announcement.content=this.$markDown.render(t.content),this.listVisible=!1,this.$nextTick((function(t){st()}))},goBack:function(){this.listVisible=!0,this.announcement=""}},computed:{title:function(){return this.listVisible?this.isContest?"Contest Announcements":"Announcements":this.announcement.title},isContest:function(){return!!this.$route.params.contestID}}},e=(s("2fa9"),Object(v.a)(ft,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-card",{attrs:{shadow:"",padding:10}},[s("div",{attrs:{slot:"header"},slot:"header"},[t.isContest?s("span",{staticClass:"panel-title"},[t._v(t._s(t.title))]):s("span",{staticClass:"home-title panel-title"},[t._v(t._s(t.title))]),s("span",{staticStyle:{float:"right"}},[t.listVisible?s("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-refresh",loading:t.btnLoading},on:{click:t.init}},[t._v("Refresh")]):s("el-button",{attrs:{type:"primary",icon:"el-icon-back",size:"small"},on:{click:t.goBack}},[t._v("Back")])],1)]),s("transition-group",{attrs:{name:"el-zoom-in-bottom"}},[t.announcements.length?t._e():s("div",{key:"no-announcement",staticClass:"no-announcement"},[s("p",[t._v("暂无公告")])]),t.listVisible?[s("ul",{key:"list",staticClass:"announcements-container"},t._l(t.announcements,(function(e){return s("li",{key:e.title},[s("div",{staticClass:"flex-container"},[s("div",{staticClass:"title"},[s("a",{staticClass:"entry",on:{click:function(s){return t.goAnnouncement(e)}}},[t._v(" "+t._s(e.title))])]),s("div",{staticClass:"info"},[s("span",{staticClass:"date"},[s("i",{staticClass:"el-icon-edit"}),t._v(" "+t._s(t._f("localtime")(e.gmtCreate))+" ")]),s("span",{staticClass:"creator"},[s("i",{staticClass:"el-icon-user"}),t._v(" "+t._s(e.username)+" ")])])])])})),0),t.isContest?t._e():s("Pagination",{key:"page",attrs:{total:t.total,"page-size":t.limit},on:{"on-change":t.getAnnouncementList}})]:[s("div",{directives:[{name:"katex",rawName:"v-katex"},{name:"highlight",rawName:"v-highlight"}],key:"content",staticClass:"content-container markdown-body",domProps:{innerHTML:t._s(t.announcement.content)}})]],2)],1)}),[],!1,null,"5ef90598",null).exports),c={name:"home",components:{Announcements:e,Avatar:S.a},data:function(){return{interval:6e3,otherContests:[],recentUserACRecord:[],CONTEST_STATUS_REVERSE:{},contests:[],index:0,loading:{recent7ACRankLoading:!1,recentOtherContestsLoading:!1},srcList:["https://cdn.jsdelivr.net/gh/HimitZH/CDN/images/home1.jfif","https://cdn.jsdelivr.net/gh/HimitZH/CDN/images/home2.jpeg"],srcHight:"440px"}},mounted:function(){var t=window.screen.width;this.srcHight=t<768?"200px":"440px",this.CONTEST_STATUS_REVERSE=Object.assign({},H),this.getRecentContests(),this.getRecent7ACRank(),this.getRecentOtherContests()},methods:{getRecentContests:function(){var t=this;Dt.getRecentContests().then((function(e){t.contests=e.data.data;for(var s=0;s<t.contests.length;s++)t.contests[s].description=t.$markDown.render(t.contests[s].description);0<t.contests.length&&t.$nextTick((function(t){st()}))}))},getRecentOtherContests:function(){var t=this;this.loading.recentOtherContestsLoading=!0,Dt.getRecentOtherContests().then((function(e){t.otherContests=e.data.data,t.loading.recentOtherContestsLoading=!1}),(function(e){t.loading.recentOtherContestsLoading=!1}))},getRecent7ACRank:function(){var t=this;this.loading.recent7ACRankLoading=!0,Dt.getRecent7ACRank().then((function(e){t.recentUserACRecord=e.data.data,t.loading.recent7ACRankLoading=!1}),(function(e){t.loading.recent7ACRankLoading=!1}))},goContest:function(){this.$router.push({name:"ContestDetails",params:{contestID:this.contests[this.index].id}})},goOtherOJContest:function(t){window.open(t.row.url)},goUserHome:function(t,e){this.$router.push({path:"/user-home",query:{uid:e,username:t}})},getDuration:function(t,e){return wt.duration(t,e)},getRankTagClass:function(t){return"rank-tag no"+(t+1)}},computed:Object(o.a)({},Object(r.mapState)(["websiteConfig"]))},f=(s("d015"),Object(v.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{md:14,sm:24}},[t.contests.length?s("el-card",[s("div",{staticClass:"clearfix title content-center",attrs:{slot:"header"},slot:"header"},[s("el-link",{attrs:{underline:!1},on:{click:t.goContest}},[t._v(t._s(t.contests[t.index].title))]),s("div",{staticClass:"contest-status"},[s("el-tag",{attrs:{effect:"dark",size:"medium",color:t.CONTEST_STATUS_REVERSE[t.contests[t.index].status].color}},[s("i",{staticClass:"fa fa-circle",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.CONTEST_STATUS_REVERSE[t.contests[t.index].status].name)+" ")])],1)],1),s("el-carousel",{attrs:{"indicator-position":"outside",height:"460px",interval:t.interval},model:{value:t.index,callback:function(e){t.index=e},expression:"index"}},t._l(t.contests,(function(e,a){return s("el-carousel-item",{key:a},[s("div",{staticClass:"contest-info"},[s("div",{staticClass:"contest-tags content-center"},[s("el-button",{staticStyle:{"margin-top":"4px"},attrs:{type:"primary",round:"",size:"mini"}},[s("i",{staticClass:"fa fa-calendar"}),t._v(" "+t._s(t._f("localtime")(e.startTime))+" ")]),s("el-button",{staticStyle:{"margin-top":"4px"},attrs:{type:"success",round:"",size:"mini"}},[s("i",{staticClass:"fa fa-clock-o"}),t._v(" "+t._s(t.getDuration(e.startTime,e.endTime))+" ")]),s("el-button",{staticStyle:{"margin-top":"4px"},attrs:{type:"warning",round:"",size:"mini"}},[s("i",{staticClass:"fa fa-trophy"}),t._v(" "+t._s(t._f("parseContestType")(e.type))+" ")])],1),s("div",{staticClass:"contest-description"},[s("blockquote",{directives:[{name:"katex",rawName:"v-katex"},{name:"highlight",rawName:"v-highlight"}],staticClass:"markdown-body",domProps:{innerHTML:t._s(e.description)}})])])])})),1)],1):s("el-card",[s("div",{staticClass:"content-center",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title home-title welcome-title"},[t._v("Welcome to HOJ")])]),s("el-carousel",{staticClass:"img-carousel",attrs:{interval:4e3,height:t.srcHight,arrow:"always","indicator-position":"outside"}},t._l(t.srcList,(function(t){return s("el-carousel-item",{key:t},[s("el-image",{attrs:{src:t,fit:"fill"}})],1)})),1)],1)],1),s("el-col",{staticClass:"phone-margin",attrs:{md:10,sm:24}},[s("el-card",[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title home-title"},[t._v("Recent 7 Days AC Top 10 Rank")])]),s("vxe-table",{attrs:{border:"inner",stripe:"","auto-resize":"",align:"center",data:t.recentUserACRecord,"max-height":"500px",loading:t.loading.recent7ACRankLoading}},[s("vxe-table-column",{attrs:{type:"seq","min-width":"30"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.rowIndex,[s("span",{class:t.getRankTagClass(e)},[t._v(t._s(e+1)+" ")]),s("span",{class:"cite no"+e})]}}])}),s("vxe-table-column",{attrs:{field:"username",title:"Username","min-width":"130",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("avatar",{staticClass:"user-avatar",attrs:{username:a.username,inline:!0,size:25,color:"#FFF",src:a.avatar}}),s("a",{staticStyle:{color:"rgb(87, 163, 243)"},on:{click:function(e){return t.goUserHome(a.username,a.uid)}}},[t._v(t._s(a.username))])]}}])}),s("vxe-table-column",{attrs:{field:"ac",title:"AC","min-width":"30",align:"left"}}),s("vxe-table-column",{attrs:{field:"solved",title:"Solved","min-width":"50",align:"left"}})],1)],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{staticStyle:{"margin-top":"20px"},attrs:{md:14,sm:24}},[s("el-card",[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title home-title"},[t._v("Other Online Judge Contest")])]),s("vxe-table",{attrs:{border:"inner","highlight-hover-row":"",stripe:"",loading:t.loading.recentOtherContestsLoading,"auto-resize":"",data:t.otherContests},on:{"cell-click":t.goOtherOJContest}},[s("vxe-table-column",{attrs:{field:"oj",title:"OJ","min-width":"100"}}),s("vxe-table-column",{attrs:{field:"title",title:"Title","min-width":"200"}}),s("vxe-table-column",{attrs:{field:"beginTime",title:"Begin Time","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",[t._v(t._s(t._f("localtime")(e.beginTime)))])]}}])}),s("vxe-table-column",{attrs:{field:"endTime",title:"End Time","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",[t._v(t._s(t._f("localtime")(e.endTime)))])]}}])})],1)],1)],1),s("el-col",{staticStyle:{"margin-top":"20px"},attrs:{md:10,sm:24}},[s("Announcements")],1)],1)],1)}),[],!1,null,"53f1ca5c",null).exports),b={data:function(){var t=this;return{btnLoading:!1,formResetPassword:{username:"",password:"",passwordAgain:"",code:""},rules:{username:[{required:!0,message:"The username is required",trigger:"blur"},{validator:function(t,e,s){Dt.checkUsernameOrEmail(e,void 0).then((function(t){!1===t.data.data.username?s(new Error("The username does not exists")):s()}),(function(t){return s()}))},trigger:"blur"}],password:[{required:!0,message:"The password is required",trigger:"blur"},{min:6,max:20,trigger:"blur",message:"The length of the password is between 6 and 20"},{validator:function(e,s,a){""!==t.formResetPassword.password&&t.$refs.formResetPassword.validateField("passwordAgain"),a()},trigger:"blur"}],passwordAgain:[{required:!0,message:"The password again is required",trigger:"blur"},{validator:function(e,s,a){s!==t.formResetPassword.password&&a(new Error("Password does not match")),a()},trigger:"change"}]}}},created:function(){var t=this.$route.query.username,e=this.$route.query.code;t&&(this.formResetPassword.username=t),e&&(this.formResetPassword.code=e)},methods:Object(o.a)(Object(o.a)({},Object(r.mapActions)(["changeModalStatus"])),{},{handleResetPwd:function(){var t=this;this.$refs.formResetPassword.validate((function(e){e&&(t.btnLoading=!0,delete(e=Object.assign({},t.formResetPassword)).passwordAgain,Dt.resetPassword(e).then((function(e){t.btnLoading=!1,m.success("重置密码成功"),t.$router.replace({path:"/"}),t.changeModalStatus({mode:"Login",visible:!0})}),(function(e){t.btnLoading=!1})))}))}})},y=(s("1fb8"),Object(v.a)(b,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",[e("div",{staticClass:"container"},[e("el-card",{attrs:{shadow:"always","body-style":"{backgroud-color:gray}"}},[e("h2",{staticStyle:{"text-align":"center"}},[t._v("Set New Password - HOJ")]),e("el-form",{ref:"formResetPassword",attrs:{model:t.formResetPassword,rules:t.rules}},[e("el-form-item",{attrs:{prop:"username"}},[e("el-input",{attrs:{"prefix-icon":"el-icon-user-solid",disabled:!0},model:{value:t.formResetPassword.username,callback:function(e){t.$set(t.formResetPassword,"username",e)},expression:"formResetPassword.username"}})],1),e("el-form-item",{attrs:{prop:"password"}},[e("el-input",{attrs:{"prefix-icon":"el-icon-lock",type:"password",placeholder:"Please Enter New Password"},model:{value:t.formResetPassword.password,callback:function(e){t.$set(t.formResetPassword,"password",e)},expression:"formResetPassword.password"}})],1),e("el-form-item",{attrs:{prop:"passwordAgain"}},[e("el-input",{attrs:{"prefix-icon":"el-icon-lock",type:"password",placeholder:"Please Enter New Password Again"},model:{value:t.formResetPassword.passwordAgain,callback:function(e){t.$set(t.formResetPassword,"passwordAgain",e)},expression:"formResetPassword.passwordAgain"}})],1)],1),e("div",{staticClass:"footer"},[e("el-button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:t.handleResetPwd}},[t._v(" 重置密码 ")])],1)],1)],1)])}),[],!1,null,"73e546fc",null).exports),x={components:{Avatar:S.a},data:function(){return{profile:{username:"暂无数据",avatar:"",school:"暂无数据",signature:"暂无数据",total:0,rating:0,score:0,solvedList:[]}}},mounted:function(){this.init()},methods:Object(o.a)(Object(o.a)({},Object(r.mapActions)(["changeDomTitle"])),{},{init:function(){var t=this;this.uid=this.$route.query.uid,Dt.getUserInfo(this.uid).then((function(e){t.changeDomTitle({title:e.data.username}),t.profile=e.data.data}))},goProblem:function(t){this.$router.push({name:"ProblemDetails",params:{problemID:t}})},freshProblemDisplayID:function(){this.init(),m.success("更新成功！")}}),watch:{$route:function(t,e){t!==e&&this.init()}}},T=(s("438a"),Object(v.a)(x,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"avatar-container"},[s("avatar",{attrs:{username:t.profile.username,inline:!0,size:130,color:"#FFF",src:t.profile.avatar}})],1),s("el-card",{staticClass:"box-card"},[s("div",[s("p",{staticStyle:{"margin-top":"50px"}},[s("span",{staticClass:"emphasis"},[s("i",{staticClass:"fa fa-user-circle-o",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.profile.username))])]),s("p",[s("span",[s("i",{staticClass:"fa fa-graduation-cap",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.profile.school||"暂未设置"))])]),s("p",{staticClass:"mood"},[s("i",{staticClass:"fa fa-pencil-square-o",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.profile.signature||"暂无个性签名")+" ")]),s("hr",{attrs:{id:"split"}}),s("el-row",{attrs:{gutter:12}},[s("el-col",{attrs:{md:6,sm:24}},[s("el-card",{staticClass:"submission",attrs:{shadow:"always"}},[s("p",[s("i",{staticClass:"fa fa-th",attrs:{"aria-hidden":"true"}}),t._v(" Submissions")]),s("p",{staticClass:"data-number"},[t._v(t._s(t.profile.total))])])],1),s("el-col",{attrs:{md:6,sm:24}},[s("el-card",{staticClass:"solved",attrs:{shadow:"always"}},[s("p",[s("i",{staticClass:"fa fa-check-circle",attrs:{"aria-hidden":"true"}}),t._v(" Solved ")]),s("p",{staticClass:"data-number"},[t._v(t._s(t.profile.solvedList.length))])])],1),s("el-col",{attrs:{md:6,sm:24}},[s("el-card",{staticClass:"score",attrs:{shadow:"always"}},[s("p",[s("i",{staticClass:"fa fa-star",attrs:{"aria-hidden":"true"}}),t._v(" Score")]),s("p",{staticClass:"data-number"},[t._v(t._s(t.profile.score))])])],1),s("el-col",{attrs:{md:6,sm:24}},[s("el-card",{staticClass:"rating",attrs:{shadow:"always"}},[s("p",[s("i",{staticClass:"fa fa-user-secret",attrs:{"aria-hidden":"true"}}),t._v(" Rating")]),s("p",{staticClass:"data-number"},[t._v(" "+t._s(t.profile.rating||"--")+" ")])])],1)],1),s("div",{attrs:{id:"problems"}},[t.profile.solvedList.length?s("div",[t._v(" List of AC problems "),s("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",circle:"",size:"mini"},on:{click:t.freshProblemDisplayID}})],1):s("p",[t._v("暂无数据")]),s("div",{staticClass:"btns"},t._l(t.profile.solvedList,(function(e){return s("div",{key:e,staticClass:"problem-btn"},[s("el-button",{attrs:{type:"success"},on:{click:function(s){return t.goProblem(e)}}},[t._v(t._s(e))])],1)})),0)]),s("div",{attrs:{id:"icons"}},[t.profile.github?s("a",{staticClass:"icon",attrs:{href:t.profile.github,target:"_blank"}},[s("i",{staticClass:"fa fa-github"})]):t._e(),t.profile.blog?s("a",{staticClass:"icon",attrs:{href:t.profile.blog,target:"_blank"}},[s("i",{staticClass:"fa fa-pencil"})]):t._e()])],1)])],1)}),[],!1,null,"214d30da",null).exports),I=(s("e05f"),{data:function(){var t=this,e=[{required:!0,trigger:"blur",message:"The old password is required"},{trigger:"blur",min:6,max:20,message:"The length of the password is between 6 and 20"}];return{loading:{btnPassword:!1,btnEmail:!1},disabled:{btnPassword:!1,btnEmail:!1},verify:{passwordSuccess:!1,passwordMsg:"",emailSuccess:!1,emailMsg:""},visible:{passwordAlert:{type:"success",show:!1,title:"",description:""},emailAlert:{type:"success",show:!1,title:"",description:""},passwordSlideBlock:!1,emailSlideBlock:!1},formPassword:{oldPassword:"",newPassword:"",againPassword:""},formEmail:{password:"",oldEmail:"",newEmail:""},rulePassword:{oldPassword:e,newPassword:[{required:!0,trigger:"blur",message:"The new password is required"},{trigger:"blur",min:6,max:20,message:"The length of the password is between 6 and 20"},{validator:function(e,s,a){""!==t.formPassword.oldPassword&&(t.formPassword.oldPassword===t.formPassword.newPassword?a(new Error("The new password doesn't change")):t.$refs.formPassword.validateField("again_password")),a()},trigger:"blur"}],againPassword:[{required:!0,trigger:"blur",message:"The again password is required"},{validator:function(e,s,a){s!==t.formPassword.newPassword&&a(new Error("Password does not match")),a()},trigger:"blur"}]},ruleEmail:{password:e,newEmail:[{required:!0,message:"The new email is required",trigger:"blur"},{type:"email",trigger:"change",message:"The email format is incorrect"},{validator:function(e,s,a){""!==t.formEmail.oldEmail&&t.formEmail.oldEmail===t.formEmail.newEmail&&a(new Error("The new email doesn't change")),a()},trigger:"blur"}]}}},mounted:function(){this.formEmail.oldEmail=this.$store.getters.userInfo.email||""},methods:{changePassword:function(t){var e=this;this.verify.passwordSuccess=!0,t=(t/1e3).toFixed(1),this.verify.passwordMsg="本次耗时"+t+"s",setTimeout((function(){e.visible.passwordSlideBlock=!1,e.verify.passwordSuccess=!1,e.$refs.passwordSlideBlock.reset()}),1e3),this.$refs.formPassword.validate((function(t){t&&(e.loading.btnPassword=!0,delete(t=Object.assign({},e.formPassword)).againPassword,Dt.changePassword(t).then((function(t){e.loading.btnPassword=!1,200==t.data.data.code?(m.success(t.data.msg),e.visible.passwordAlert={show:!0,title:"修改成功",type:"success",description:t.data.data.msg},setTimeout((function(){e.visible.passwordAlert=!1,e.$router.push({name:"Logout"})}),5e3)):(m.error(t.data.msg),e.visible.passwordAlert={show:!0,title:"修改失败",type:"warning",description:t.data.data.msg},403==t.data.data.code&&(e.visible.passwordAlert.type="error",e.disabled.btnPassword=!0))}),(function(t){e.loading.btnPassword=!1})))}))},changeEmail:function(t){var e=this;this.verify.emailSuccess=!0,t=(t/1e3).toFixed(1),this.verify.emailMsg="本次耗时"+t+"s",setTimeout((function(){e.visible.emailSlideBlock=!1,e.verify.emailSuccess=!1,e.$refs.emailSlideBlock.reset()}),1e3),this.$refs.formEmail.validate((function(t){t&&(e.loading.btnEmail=!0,t=Object.assign({},e.formEmail),Dt.changeEmail(t).then((function(t){e.loading.btnEmail=!1,200==t.data.data.code?(m.success(t.data.msg),e.visible.emailAlert={show:!0,title:"修改成功",type:"success",description:t.data.data.msg},e.$store.dispatch("setUserInfo",t.data.data.userInfo),e.$refs.formEmail.resetFields(),e.formEmail.oldEmail=t.data.data.userInfo.email):(m.error(t.data.msg),e.visible.emailAlert={show:!0,title:"修改失败",type:"warning",description:t.data.data.msg},403==t.data.data.code&&(e.visible.emailAlert.type="error",e.disabled.btnEmail=!0))}),(function(t){e.loading.btnEmail=!1})))}))},onAgain:function(t){this.$refs.passwordSlideBlock.reset(),m.warning("速度过快，可能为机器操作！请重新验证！")}}}),A=(s("05c1"),Object(v.a)(I,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",{staticClass:"setting-main"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{sm:24,md:10,lg:10}},[e("div",{staticClass:"left"},[e("p",{staticClass:"section-title"},[t._v("Change Password")]),e("el-form",{ref:"formPassword",staticClass:"setting-content",attrs:{model:t.formPassword,rules:t.rulePassword}},[e("el-form-item",{attrs:{label:"Old Password",prop:"oldPassword"}},[e("el-input",{attrs:{type:"password"},model:{value:t.formPassword.oldPassword,callback:function(e){t.$set(t.formPassword,"oldPassword",e)},expression:"formPassword.oldPassword"}})],1),e("el-form-item",{attrs:{label:"New Password",prop:"newPassword"}},[e("el-input",{attrs:{type:"password"},model:{value:t.formPassword.newPassword,callback:function(e){t.$set(t.formPassword,"newPassword",e)},expression:"formPassword.newPassword"}})],1),e("el-form-item",{attrs:{label:"Confirm New Password",prop:"againPassword"}},[e("el-input",{attrs:{type:"password"},model:{value:t.formPassword.againPassword,callback:function(e){t.$set(t.formPassword,"againPassword",e)},expression:"formPassword.againPassword"}})],1)],1),e("el-popover",{attrs:{placement:"top",width:"350",trigger:"click"},model:{value:t.visible.passwordSlideBlock,callback:function(e){t.$set(t.visible,"passwordSlideBlock",e)},expression:"visible.passwordSlideBlock"}},[e("el-button",{attrs:{slot:"reference",type:"primary",loading:t.loading.btnPassword,disabled:t.disabled.btnPassword},slot:"reference"},[t._v("Update Password")]),e("slide-verify",{directives:[{name:"show",rawName:"v-show",value:!t.verify.passwordSuccess,expression:"!verify.passwordSuccess"}],ref:"passwordSlideBlock",attrs:{l:42,r:10,w:325,h:100,accuracy:3,"slider-text":"请向右滑动验证"},on:{success:t.changePassword,again:function(e){return t.onAgain("password")}}}),e("el-alert",{directives:[{name:"show",rawName:"v-show",value:t.verify.passwordSuccess,expression:"verify.passwordSuccess"}],attrs:{title:"验证成功",type:"success",description:t.verify.passwordMsg,center:!0,closable:!1,"show-icon":""}})],1)],1),e("el-alert",{directives:[{name:"show",rawName:"v-show",value:t.visible.passwordAlert.show,expression:"visible.passwordAlert.show"}],staticStyle:{"margin-top":"15px"},attrs:{title:t.visible.passwordAlert.title,type:t.visible.passwordAlert.type,description:t.visible.passwordAlert.description,closable:!1,effect:"dark","show-icon":""}})],1),e("el-col",{attrs:{md:4,lg:4}},[e("div",{staticClass:"separator hidden-md-and-down"}),e("p")]),e("el-col",{attrs:{sm:24,md:10,lg:10}},[e("div",{staticClass:"right"},[e("p",{staticClass:"section-title"},[t._v("Change Email")]),e("el-form",{ref:"formEmail",staticClass:"setting-content",attrs:{model:t.formEmail,rules:t.ruleEmail}},[e("el-form-item",{attrs:{label:"Current Password",prop:"password"}},[e("el-input",{attrs:{type:"password"},model:{value:t.formEmail.password,callback:function(e){t.$set(t.formEmail,"password",e)},expression:"formEmail.password"}})],1),e("el-form-item",{attrs:{label:"Old Email"}},[e("el-input",{attrs:{disabled:""},model:{value:t.formEmail.oldEmail,callback:function(e){t.$set(t.formEmail,"oldEmail",e)},expression:"formEmail.oldEmail"}})],1),e("el-form-item",{attrs:{label:"New Email",prop:"newEmail"}},[e("el-input",{model:{value:t.formEmail.newEmail,callback:function(e){t.$set(t.formEmail,"newEmail",e)},expression:"formEmail.newEmail"}})],1)],1),e("el-popover",{attrs:{placement:"top",width:"350",trigger:"click"},model:{value:t.visible.emailSlideBlock,callback:function(e){t.$set(t.visible,"emailSlideBlock",e)},expression:"visible.emailSlideBlock"}},[e("el-button",{attrs:{slot:"reference",type:"primary",loading:t.loading.btnEmailLoading,disabled:t.disabled.btnEmail},slot:"reference"},[t._v("Update Email")]),e("slide-verify",{directives:[{name:"show",rawName:"v-show",value:!t.verify.emailSuccess,expression:"!verify.emailSuccess"}],ref:"emailSlideBlock",attrs:{l:42,r:10,w:325,h:100,accuracy:3,"slider-text":"请向右滑动验证"},on:{success:t.changeEmail,again:function(e){return t.onAgain("email")}}}),e("el-alert",{directives:[{name:"show",rawName:"v-show",value:t.verify.emailSuccess,expression:"verify.emailSuccess"}],attrs:{title:"验证成功",type:"success",description:t.verify.emailMsg,center:!0,closable:!1,"show-icon":""}})],1)],1),e("el-alert",{directives:[{name:"show",rawName:"v-show",value:t.visible.emailAlert.show,expression:"visible.emailAlert.show"}],staticStyle:{"margin-top":"15px"},attrs:{title:t.visible.emailAlert.title,type:t.visible.emailAlert.type,description:t.visible.emailAlert.description,closable:!1,effect:"dark","show-icon":""}})],1)],1)],1)}),[],!1,null,"1bdb5274",null).exports),w=s("7e79"),P=s.n(w),R={components:{Avatar:S.a,VueCropper:w.VueCropper},data:function(){return{loadingSaveBtn:!1,loadingUploadBtn:!1,uploadModalVisible:!1,preview:{},uploadImgSrc:"",avatarOption:{imgSrc:"",size:.8,outputType:"png"},formProfile:{realname:"",username:"",cfUsername:"",nickname:"",signature:"",number:"",blog:"",school:"",github:""}}},mounted:function(){var t=this,e=this.$store.getters.userInfo;Object.keys(this.formProfile).forEach((function(s){void 0!==e[s]&&(t.formProfile[s]=e[s])}))},methods:{checkFileType:function(t){return!!/\.(gif|jpg|jpeg|png|bmp|webp|GIF|JPG|PNG|WEBP)$/.test(t.name)||(this.$notify.warning({title:"文件类型不支持",message:t.name+"的文件格式不正确，请选择.gif,.jpg,.jpeg,.png,.bmp,.webp的图片文件。"}),!1)},checkFileSize:function(t){return!(2097152<t.size)||(this.$notify.warning({title:"超出最大文件大小限制",message:"文件["+t.name+"]太大, 您只能上传不大于2MB的图片文件！"}),!1)},handleSelectFile:function(t){var e=this;if(!this.checkFileType(t)||!this.checkFileSize(t))return!1;var s=new window.FileReader;return s.onload=function(t){e.avatarOption.imgSrc=t.target.result},s.readAsDataURL(t),!1},realTime:function(t){this.preview=t},rotate:function(t){"left"===t?this.$refs.cropper.rotateLeft():this.$refs.cropper.rotateRight()},reselect:function(){var t=this;this.$confirm("您确定取消该图像的截取？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.avatarOption.imgSrc=""}))},finishCrop:function(){var t=this;this.$refs.cropper.getCropData((function(e){t.uploadImgSrc=e,t.uploadModalVisible=!0}))},uploadAvatar:function(){var t=this;this.$refs.cropper.getCropBlob((function(e){var s=new window.FormData;e=new window.File([e],"avatar."+t.avatarOption.outputType);s.append("image",e),t.loadingUploadBtn=!0,t.$http({method:"post",url:"/api/file/upload-avatar",data:s,headers:{"content-type":"multipart/form-data"}}).then((function(e){t.loadingUploadBtn=!1,m.success(e.data.msg),t.uploadModalVisible=!1,t.avatarOption.imgSrc="",t.$store.dispatch("setUserInfo",e.data.data)}),(function(){t.loadingUploadBtn=!1}))}))},updateUserInfo:function(){var t=this;this.loadingSaveBtn=!0;var e=at.filterEmptyValue(Object.assign({},this.formProfile));Dt.changeUserInfo(e).then((function(e){m.success(e.data.msg),t.$store.dispatch("setUserInfo",e.data.data),t.loadingSaveBtn=!1}),(function(e){t.loadingSaveBtn=!1}))}},computed:{avatar:function(){return this.$store.getters.userInfo.avatar},previewStyle:function(){return{width:this.preview.w+"px",height:this.preview.h+"px",overflow:"hidden"}}}},nt=(s("a307"),{components:{Account:A,UserInfo:Object(v.a)(R,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",[e("div",{staticClass:"section-title"},[t._v("Avatar Setting")]),e("div",{staticClass:"section-main"},[e("avatar",{staticStyle:{"margin-bottom":"15px"},attrs:{username:t.formProfile.username,inline:!0,size:130,color:"#FFF",src:t.avatar}}),t.avatarOption.imgSrc?[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{xs:24,md:12}},[e("div",{staticClass:"cropper-main inline"},[e("vueCropper",{ref:"cropper",attrs:{autoCrop:"",fixed:"",autoCropWidth:200,autoCropHeight:200,img:t.avatarOption.imgSrc,outputSize:t.avatarOption.size,outputType:t.avatarOption.outputType,info:!0},on:{realTime:t.realTime}})],1),e("div",{staticClass:"cropper-btn"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"向左旋转90°",trigger:"hover",placement:"bottom"}},[e("el-button",{attrs:{icon:"el-icon-refresh-left",size:"mini"},on:{click:function(e){return t.rotate("left")}}})],1),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"向右旋转90°",trigger:"hover",placement:"bottom"}},[e("el-button",{attrs:{icon:"el-icon-refresh-right",size:"mini"},on:{click:function(e){return t.rotate("right")}}})],1),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"关闭图像截取",trigger:"hover",placement:"bottom"}},[e("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:t.reselect}})],1),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",trigger:"hover",content:"确定图像截取",placement:"bottom"}},[e("el-button",{attrs:{icon:"el-icon-check",size:"mini"},on:{click:t.finishCrop}})],1)],1)]),e("el-col",{attrs:{xs:24,md:12}},[e("div",{staticClass:"cropper-preview",style:t.previewStyle},[e("div",{style:t.preview.div},[e("img",{style:t.preview.img,attrs:{src:t.avatarOption.imgSrc}})])])])],1)]:[e("el-upload",{staticClass:"upload-container",attrs:{action:"",drag:"","before-upload":t.handleSelectFile}},[e("div",{staticStyle:{padding:"20px 0"}},[e("i",{staticClass:"el-icon-upload",staticStyle:{color:"#3399ff","font-size":"52px"}}),e("p",[t._v("将头像图片拖放到此处，或者单击手动选择。")])])])],e("el-dialog",{attrs:{visible:t.uploadModalVisible,title:"上传头像",width:"350px"},on:{"update:visible":function(e){t.uploadModalVisible=e}}},[e("div",{staticClass:"upload-modal"},[e("p",{staticClass:"notice"},[t._v("你的头像将被设置为如下:")]),e("img",{attrs:{src:t.uploadImgSrc}})]),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{loading:t.loadingUploadBtn,type:"primary"},on:{click:t.uploadAvatar}},[t._v("Upload")])],1)])],2),e("div",{staticClass:"section-title"},[t._v("UserInfo Setting")]),e("el-form",{ref:"formProfile",attrs:{model:t.formProfile}},[e("el-row",{attrs:{gutter:30,justify:"space-around"}},[e("el-col",{attrs:{md:10,xs:24}},[e("el-form-item",{attrs:{label:"Real Name"}},[e("el-input",{attrs:{maxlength:50},model:{value:t.formProfile.realname,callback:function(e){t.$set(t.formProfile,"realname",e)},expression:"formProfile.realname"}})],1),e("el-form-item",{attrs:{label:"Nickname"}},[e("el-input",{attrs:{maxlength:50},model:{value:t.formProfile.nickname,callback:function(e){t.$set(t.formProfile,"nickname",e)},expression:"formProfile.nickname"}})],1),e("el-form-item",{attrs:{label:"School"}},[e("el-input",{attrs:{maxlength:50},model:{value:t.formProfile.school,callback:function(e){t.$set(t.formProfile,"school",e)},expression:"formProfile.school"}})],1),e("el-form-item",{attrs:{label:"Student Number"}},[e("el-input",{attrs:{maxlength:25},model:{value:t.formProfile.number,callback:function(e){t.$set(t.formProfile,"number",e)},expression:"formProfile.number"}})],1)],1),e("el-col",{attrs:{md:4,lg:4}},[e("div",{staticClass:"separator hidden-md-and-down"}),e("p")]),e("el-col",{attrs:{md:10,xs:24}},[e("el-form-item",{attrs:{label:"Signature"}},[e("el-input",{attrs:{maxlength:50},model:{value:t.formProfile.signature,callback:function(e){t.$set(t.formProfile,"signature",e)},expression:"formProfile.signature"}})],1),e("el-form-item",{attrs:{label:"Codeforces Username"}},[e("el-input",{attrs:{maxlength:50},model:{value:t.formProfile.cfUsername,callback:function(e){t.$set(t.formProfile,"cfUsername",e)},expression:"formProfile.cfUsername"}})],1),e("el-form-item",{attrs:{label:"Blog"}},[e("el-input",{model:{value:t.formProfile.blog,callback:function(e){t.$set(t.formProfile,"blog",e)},expression:"formProfile.blog"}})],1),e("el-form-item",{attrs:{label:"Github"}},[e("el-input",{model:{value:t.formProfile.github,callback:function(e){t.$set(t.formProfile,"github",e)},expression:"formProfile.github"}})],1)],1)],1)],1),e("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[e("el-button",{attrs:{type:"primary",loading:t.loadingSaveBtn},on:{click:t.updateUserInfo}},[t._v("Save All")])],1)],1)}),[],!1,null,"f55752c2",null).exports},data:function(){return{Account:"Account",UserInfo:"UserInfo",activeName:"Account"}}}),pt=(s("55c6"),Object(v.a)(nt,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("el-card",{staticClass:"box-card"},[e("el-collapse",{attrs:{accordion:""},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-collapse-item",{attrs:{name:"Account"}},[e("template",{slot:"title"},[e("i",{staticClass:"fa fa-gear"},[t._v(" Account Setting")])]),e(t.Account,{tag:"component"})],2),e("el-collapse-item",{attrs:{name:"UserInfo"}},[e("template",{slot:"title"},[e("i",{staticClass:"fa fa-gear"},[t._v(" UserInfo Setting")])]),e(t.UserInfo,{tag:"component"})],2)],1)],1)}),[],!1,null,"1796521d",null).exports),k={name:"ProblemList",components:{Pagination:mt},data:function(){return{PROBLEM_LEVEL:{},PROBLEM_LEVEL_RESERVE:{},JUDGE_STATUS:{},JUDGE_STATUS_RESERVE:{},REMOTE_OJ:{},OJ_NAME:"",tagList:[],currentProblemTitle:"请触碰或鼠标悬浮到指定题目行即可查看提交情况",problemRecord:[],problemList:[],limit:20,total:100,isGetStatusOk:!1,loadings:{table:!0,tag:!0},page:{currentPage:1,pageSize:10,totalResult:300},filterConfig:{remote:!0},routeName:"",query:{keyword:"",difficulty:"All",oj:"",tagId:"",currentPage:1}}},mounted:function(){this.PROBLEM_LEVEL=Object.assign({},q),this.PROBLEM_LEVEL_RESERVE=Object.assign({},F),this.JUDGE_STATUS_RESERVE=Object.assign({},M),this.JUDGE_STATUS=Object.assign({},z),this.REMOTE_OJ=Object.assign({},V),this.OJ_NAME="HOJ",this.problemRecord=[{status:0,count:100},{status:-1,count:100},{status:1,count:100},{status:2,count:100},{status:3,count:100},{status:-3,count:100},{status:-2,count:100},{status:4,count:100}],this.init()},methods:{init:function(){this.routeName=this.$route.name;var t=this.$route.query;this.query.difficulty=t.difficulty||"",this.query.oj=t.oj||"",this.query.keyword=t.keyword||"",this.query.tagId=t.tagId||"",this.query.currentPage=parseInt(t.currentPage)||1,this.query.currentPage<1&&(this.query.currentPage=1),this.getTagList(),this.getProblemList()},pushRouter:function(){this.$router.push({path:"/problem",query:this.query})},getPercentage:function(t,e){return 0==t?0:Math.round(t/e*1e4)/100},cellHover:function(t){var e=t.data[t.rowIndex];t=0==e.type?[{status:0,count:this.getPercentage(e.ac,e.total)},{status:-1,count:this.getPercentage(e.wa,e.total)},{status:1,count:this.getPercentage(e.tle,e.total)},{status:2,count:this.getPercentage(e.mle,e.total)},{status:3,count:this.getPercentage(e.re,e.total)},{status:-3,count:this.getPercentage(e.pe,e.total)},{status:-2,count:this.getPercentage(e.ce,e.total)},{status:4,count:this.getPercentage(e.se,e.total)}]:[{status:0,count:this.getPercentage(e.ac,e.total)},{status:8,count:this.getPercentage(e.pa,e.total)},{status:-1,count:this.getPercentage(e.wa,e.total)},{status:1,count:this.getPercentage(e.tle,e.total)},{status:2,count:this.getPercentage(e.mle,e.total)},{status:3,count:this.getPercentage(e.re,e.total)},{status:-3,count:this.getPercentage(e.pe,e.total)},{status:-2,count:this.getPercentage(e.ce,e.total)},{status:4,count:this.getPercentage(e.se,e.total)}];this.problemRecord=t,this.currentProblemTitle=e.title},getProblemList:function(){var t=this;this.loadings.table=!0;var e=Object.assign({},this.query);"All"==e.difficulty?e.difficulty="":e.difficulty=this.PROBLEM_LEVEL_RESERVE[e.difficulty],"All"==e.oj?e.oj="":e.oj||(e.oj="HOJ"),Dt.getProblemList(this.limit,e).then((function(e){if(t.loadings.table=!1,t.total=e.data.data.total,t.problemList=e.data.data.records,t.isAuthenticated){for(var s=[],a=0;a<t.problemList.length;a++)s.push(t.problemList[a].pid);0<s.length&&(t.isGetStatusOk=!1,Dt.getUserProblemStatus(s,!1).then((function(e){for(var s=e.data.data,a=0;a<t.problemList.length;a++)t.problemList[a].myStatus=s[t.problemList[a].pid];t.isGetStatusOk=!0})))}}),(function(e){t.loadings.table=!1}))},getTagList:function(){var t=this;Dt.getProblemTagList().then((function(e){t.tagList=e.data.data,t.loadings.tag=!1}),(function(e){t.loadings.tag=!1}))},onReset:function(){"{}"!=JSON.stringify(this.$route.query)&&this.$router.push({name:"ProblemList"})},filterByTag:function(t){this.query.tagId=t,this.query.currentPage=1,this.pushRouter()},filterByDifficulty:function(t){this.query.difficulty=t,this.query.currentPage=1,this.pushRouter()},filterByOJ:function(t){this.query.oj=t,this.query.currentPage=1,this.pushRouter()},filterByKeyword:function(){this.query.currentPage=1,this.pushRouter()},pickone:function(){var t=this;Dt.pickone().then((function(e){m.success("随机题目获取成功，祝你好运"),t.$router.push({name:"ProblemDetails",params:{problemID:e.data.data.problemId}})}))},getProblemUri:function(t){this.$router.push({name:"ProblemDetails",params:{problemID:t}})},getLevelColor:function(t){return"el-tag el-tag--small status-"+q[t].color},getIconColor:function(t){return"font-weight: 600;font-size: 16px;color:"+z[t].rgb}},computed:Object(o.a)({},Object(r.mapGetters)(["isAuthenticated"])),watch:{$route:function(t,e){t!==e&&this.init()},isAuthenticated:function(t){!0===t&&this.init()}}},it=(s("dd21"),Object(v.a)(k,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",{attrs:{gutter:18}},[s("el-col",{attrs:{sm:24,md:18,lg:18}},[s("el-card",{attrs:{shadow:""}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("el-row",{attrs:{gutter:18}},[s("el-col",{attrs:{sm:5,md:7,lg:10}},[s("span",{staticClass:"panel-title hidden-xs-only"},[t._v("Problem List")])]),s("el-col",{staticStyle:{"padding-top":"6px"},attrs:{xs:24,sm:4,md:3,lg:3}},[s("el-dropdown",{staticClass:"drop-menu",attrs:{placement:"bottom",trigger:"hover"},on:{command:t.filterByOJ}},[s("span",{staticClass:"el-dropdown-link"},[t._v(" "+t._s("HOJ"===t.query.oj||""===t.query.oj?"HOJ":t.query.oj)+" "),s("i",{staticClass:"el-icon-caret-bottom"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"All"}},[t._v("All")]),s("el-dropdown-item",{attrs:{command:t.OJ_NAME}},[t._v(t._s(t.OJ_NAME))]),t._l(t.REMOTE_OJ,(function(e,a){return s("el-dropdown-item",{key:a,attrs:{command:e.key}},[t._v(t._s(e.name))])}))],2)],1)],1),s("el-col",{staticStyle:{"padding-top":"6px"},attrs:{xs:6,sm:4,md:3,lg:3}},[s("el-dropdown",{staticClass:"drop-menu",attrs:{placement:"bottom",trigger:"hover"},on:{command:t.filterByDifficulty}},[s("span",{staticClass:"el-dropdown-link"},[t._v(" "+t._s("All"===t.query.difficulty||""===t.query.difficulty?"Level":t.query.difficulty)+" "),s("i",{staticClass:"el-icon-caret-bottom"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"All"}},[t._v("All")]),s("el-dropdown-item",{attrs:{command:"Easy"}},[t._v("Easy")]),s("el-dropdown-item",{attrs:{command:"Mid"}},[t._v("Mid")]),s("el-dropdown-item",{attrs:{command:"Hard"}},[t._v("Hard")])],1)],1)],1),s("el-col",{attrs:{xs:15,sm:7,md:7,lg:5}},[s("vxe-input",{attrs:{placeholder:"Enter keyword",type:"search",size:"medium"},on:{"search-click":t.filterByKeyword},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterByKeyword(e)}},model:{value:t.query.keyword,callback:function(e){t.$set(t.query,"keyword",e)},expression:"query.keyword"}})],1),s("el-col",{staticClass:"hidden-xs-only",attrs:{sm:4,md:4,lg:3}},[s("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-refresh",round:""},on:{click:t.onReset}},[t._v("Reset")])],1),s("el-col",{staticClass:"hidden-sm-and-up",attrs:{xs:3}},[s("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-refresh",circle:""},on:{click:t.onReset}})],1)],1)],1),s("vxe-table",{attrs:{border:"inner",stripe:"","auto-resize":"",loading:t.loadings.table,data:t.problemList},on:{"cell-mouseenter":t.cellHover}},[t.isAuthenticated&&t.isGetStatusOk?s("vxe-table-column",{attrs:{title:"",width:"30"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("el-tooltip",{attrs:{content:t.JUDGE_STATUS[e.myStatus].name,placement:"top"}},[0==e.myStatus?s("i",{staticClass:"el-icon-check",style:t.getIconColor(e.myStatus)}):-10!=e.myStatus?s("i",{staticClass:"el-icon-minus",style:t.getIconColor(e.myStatus)}):t._e()])]}}],null,!1,2893057313)}):t._e(),s("vxe-table-column",{attrs:{field:"problemId",title:"Problem ID","min-width":"100"}}),s("vxe-table-column",{attrs:{field:"title",title:"Title","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("a",{staticClass:"title-a",on:{click:function(e){return t.getProblemUri(a.problemId)}}},[t._v(t._s(a.title))])]}}])}),s("vxe-table-column",{attrs:{field:"difficulty",title:"Level","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",{class:t.getLevelColor(e.difficulty)},[t._v(t._s(t.PROBLEM_LEVEL[e.difficulty].name))])]}}])}),s("vxe-table-column",{attrs:{field:"tag",title:"Tag","min-width":"250"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,t._l(e.tags,(function(e){return s("span",{key:e.id,staticClass:"el-tag el-tag--medium el-tag--light is-hit",staticStyle:{"margin-right":"7px","margin-top":"4px"}},[t._v(t._s(e.name))])}))}}])}),s("vxe-table-column",{attrs:{field:"total",title:"Total","min-width":"80"}}),s("vxe-table-column",{attrs:{title:"AC Rate","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",[t._v(t._s(t.getPercentage(e.ac,e.total))+"%")])]}}])})],1)],1),s("Pagination",{attrs:{total:t.total,"page-size":t.limit,current:t.query.currentPage},on:{"on-change":t.pushRouter,"update:current":function(e){return t.$set(t.query,"currentPage",e)}}})],1),s("el-col",{attrs:{sm:24,md:6,lg:6}},[s("el-card",{staticStyle:{"text-align":"center"}},[s("span",{staticClass:"panel-title"},[t._v(t._s(t.currentProblemTitle))]),t._l(t.problemRecord,(function(e,a){return s("el-row",{key:a},[s("el-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:5,sm:4,md:6,lg:4}},[s("el-tag",{attrs:{effect:"dark",size:"small",color:t.JUDGE_STATUS[e.status].rgb}},[t._v(t._s(t.JUDGE_STATUS[e.status].short))])],1),s("el-col",{attrs:{xs:19,sm:20,md:18,lg:20}},[s("el-progress",{attrs:{"text-inside":!0,"stroke-width":20,percentage:e.count,color:t.JUDGE_STATUS[e.status].rgb}})],1)],1)}))],2),s("el-card",{staticStyle:{"margin-top":"20px"},attrs:{padding:10}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"taglist-title"},[t._v("Tags")])]),t._l(t.tagList,(function(e){return s("el-button",{key:e.id,staticClass:"tag-btn",attrs:{type:"ghost",disabled:t.query.tagId==e.id,size:"mini"},on:{click:function(s){return t.filterByTag(e.id)}}},[t._v(t._s(e.name)+" ")])})),s("el-button",{attrs:{long:"",id:"pick-one"},on:{click:t.pickone}},[s("i",{staticClass:"fa fa-random"}),t._v(" Pick a random question ")])],2)],1)],1)}),[],!1,null,"ec1e5778",null).exports),D={mounted:function(){var t=this;Dt.logout().then((function(e){t.$store.dispatch("clearUserInfoAndToken"),t.$router.replace({path:"/home"})}))}},dt=Object(v.a)(D,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,null,null).exports,i={name:"submissionList",components:{Pagination:mt},data:function(){return{formFilter:{onlyMine:!1,status:"",username:"",problemID:""},loadingTable:!1,submissions:[],needCheckSubmitIds:{},total:30,limit:15,currentPage:1,contestID:"",routeName:"",checkStatusNum:0,JUDGE_STATUS:"",JUDGE_STATUS_LIST:"",autoCheckOpen:!1,JUDGE_STATUS_RESERVE:{},CONTEST_STATUS:{}}},mounted:function(){this.JUDGE_STATUS=Object.assign({},z),this.JUDGE_STATUS_LIST=Object.assign({},z),this.JUDGE_STATUS_RESERVE=Object.assign({},M),this.CONTEST_STATUS=Object.assign({},B),delete this.JUDGE_STATUS_LIST[5],delete this.JUDGE_STATUS_LIST[6],delete this.JUDGE_STATUS_LIST[7],delete this.JUDGE_STATUS_LIST[-10],this.init()},methods:Object(o.a)(Object(o.a)({init:function(){this.contestID=this.$route.params.contestID;var t=this.$route.query;this.formFilter.problemID=t.problemID,this.formFilter.username=t.username||"",this.formFilter.onlyMine=t.onlyMine+""=="true",this.formFilter.status=t.status,this.formFilter.onlyMine&&(this.formFilter.username=""),this.currentPage=parseInt(t.currentPage)||1,this.currentPage<1&&(this.currentPage=1),this.routeName=this.$route.name,this.getSubmissions()},buildQuery:function(){return{onlyMine:this.formFilter.onlyMine,status:this.formFilter.status,username:this.formFilter.username,problemID:this.formFilter.problemID,currentPage:this.currentPage}},submissionTimeFormat:function(t){return at.submissionTimeFormat(t)},submissionMemoryFormat:function(t){return at.submissionMemoryFormat(t)},submissionLengthFormat:function(t){return at.submissionLengthFormat(t)},reSubmit:function(t){var e=this;Dt.reSubmitRemoteJudge(t.submitId).then((function(s){var a=e.$refs.xTable;t.status=s.data.data.status,t.time=s.data.data.time,t.memory=s.data.data.memory,t.errorMessage=s.data.data.errorMessage,t.judger=s.data.data.judger,a.reloadRow(t,null,null),e.submissions[t.index]=s.data.data,m.success(s.data.msg),e.needCheckSubmitIds[t.submitId]=t.index,e.checkStatusNum=0,e.autoCheckOpen||e.checkSubmissionsStatus()}))},getSubmissions:function(){var t=this,e=this.buildQuery();if(e.contestID=this.contestID,this.contestID&&(this.contestStatus==B.SCHEDULED?e.beforeContestSubmit=!0:e.beforeContestSubmit=!1),this.formFilter.onlyMine){if(!this.isAuthenticated)return this.formFilter.onlyMine=!1,void m.error("请您先登陆！");e.username="",this.formFilter.username=""}this.loadingTable=!0,this.submissions=[],this.needCheckSubmitIds={};var s=this.contestID?"getContestSubmissionList":"getSubmissionList";Dt[s](this.limit,at.filterEmptyValue(e)).then((function(e){e=e.data.data;var s,a=0,i=Object(O.a)(e.records);try{for(i.s();!(s=i.n()).done;){var n=s.value;n.status!=M.Pending&&n.status!=M.Compiling&&n.status!=M.Judging||(t.needCheckSubmitIds[n.submitId]=a),n.loading=!1,n.index=a,a+=1}}catch(e){i.e(e)}finally{i.f()}t.loadingTable=!1,t.submissions=e.records,t.total=e.total,0<Object.keys(t.needCheckSubmitIds).length&&t.checkSubmissionsStatus()})).catch((function(){t.loadingTable=!1}))},checkSubmissionsStatus:function(){var t=this;function e(){var s=t.needCheckSubmitIds;Dt.checkSubmissonsStatus(Object.keys(s)).then((function(a){var i=a.data.data;if(t.$refs.xTable){var n,o=t.$refs.xTable.getTableData().tableData;for(n in s){var r=parseInt(n);t.submissions[s[n]]=i[r],o[s[n]].status=i[r].status,o[s[n]].time=i[r].time,o[s[n]].memory=i[r].memory,o[s[n]].judger=i[r].judger,t.$refs.xTable.reloadRow(o[s[n]],null,null),i[r].status!=M.Pending&&i[r].status!=M.Compiling&&i[r].status!=M.Judging&&delete t.needCheckSubmitIds[n]}0==Object.keys(t.needCheckSubmitIds).length||30==t.checkStatusNum?(clearTimeout(t.refreshStatus),t.autoCheckOpen=!1):(t.checkStatusNum+=1,t.refreshStatus=setTimeout(e,2e3))}}),(function(e){clearTimeout(t.refreshStatus),t.autoCheckOpen=!1}))}this.refreshStatus&&(clearTimeout(this.refreshStatus),this.autoCheckOpen=!1),this.checkStatusNum+=1,this.refreshStatus=setTimeout(e,2e3),this.autoCheckOpen=!0},changeRoute:function(){var t=this.buildQuery();t.contestID=this.contestID;var e,s=at.filterEmptyValue(t),a=!0;for(e in s)if(s[e]!=this.$route.query[e]){a=!1;break}(a=(!a||Object.keys(s).length==Object.keys(this.$route.query).length)&&a)||(t=s.contestID?"ContestSubmissionList":"SubmissionList",this.$router.push({name:t,query:s}))},goRoute:function(t){this.$router.push(t)},goUserHome:function(t,e){this.$router.push({path:"/user-home",query:{uid:e,username:t}})},handleStatusChange:function(t){this.formFilter.status="All"==t?"":t,this.currentPage=1,this.changeRoute()},handleQueryChange:function(){this.currentPage=1,this.changeRoute()},handleRejudge:function(t){var e=this;this.submissions[t.index].loading=!0,Dt.submissionRejudge(t.submitId).then((function(s){var a=e.$refs.xTable;t.status=s.data.data.status,t.time=s.data.data.time,t.memory=s.data.data.memory,t.errorMessage=s.data.data.errorMessage,t.judger=s.data.data.judger,t.loading=!1,a.reloadRow(t,null,null),e.submissions[t.index]=s.data.data,e.submissions[t.index].loading=!1,m.success(s.data.msg),e.needCheckSubmitIds[t.submitId]=t.index,e.checkStatusNum=0,e.autoCheckOpen||e.checkSubmissionsStatus()}),(function(){e.submissions[t.index].loading=!1}))},handleOnlyMine:function(){if(this.formFilter.onlyMine){if(!this.isAuthenticated)return this.formFilter.onlyMine=!1,void m.error("请您先登陆！");this.formFilter.username=""}this.currentPage=1,this.changeRoute()}},Object(r.mapActions)(["changeModalStatus"])),{},{showSubmitDetail:function(t){if(!this.isAuthenticated)return this.changeModalStatus({mode:"Login",visible:!0}),void m.warning("请先登录后再查看代码！");0!=t.cid?this.$router.push({name:"ContestSubmissionDeatil",params:{contestID:this.$route.params.contestID,problemID:t.displayId,submitID:t.submitId}}):this.$router.push({name:"SubmissionDeatil",params:{submitID:t.submitId}})},getProblemUri:function(t,e){e?this.$router.push({name:"ContestProblemDetails",params:{contestID:this.$route.params.contestID,problemID:t}}):this.$router.push({name:"ProblemDetails",params:{problemID:t}})},getStatusColor:function(t){return"el-tag el-tag--medium status-"+z[t].color},tableRowClassName:function(t){var e=t.row;if(t.rowIndex,e.username==this.userInfo.username&&this.isAuthenticated)return"own-submit-row"}}),computed:Object(o.a)(Object(o.a)({},Object(r.mapGetters)(["isAuthenticated","userInfo","isSuperAdmin","isAdminRole","contestStatus"])),{},{title:function(){return this.contestID?this.problemID?"Problem Submissions":"Submissions":"Status"},status:function(){return""!==this.formFilter.status&&z[this.formFilter.status]?z[this.formFilter.status].name:"Status"},rejudgeColumnVisible:function(){return this.isSuperAdmin&&!this.contestID}}),watch:{$route:function(t,e){t!==e&&(this.autoCheckOpen&&clearInterval(this.refreshStatus),this.init())},isAuthenticated:function(){this.init()}},beforeRouteLeave:function(t,e,s){clearInterval(this.refreshStatus),s()}},_=(s("0b08"),Object(v.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",{staticClass:"flex-container"},[s("div",{attrs:{id:"main"}},[s("el-card",{attrs:{shadow:""}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("el-row",{attrs:{gutter:18}},[s("el-col",{attrs:{md:4,lg:2}},[s("span",{staticClass:"panel-title hidden-md-and-down"},[t._v("Status")])]),s("el-col",{attrs:{xs:10,sm:8,md:4,lg:4}},[s("el-switch",{staticStyle:{display:"block"},attrs:{"active-text":"Mine",width:40,"inactive-text":"All"},on:{change:t.handleOnlyMine},model:{value:t.formFilter.onlyMine,callback:function(e){t.$set(t.formFilter,"onlyMine",e)},expression:"formFilter.onlyMine"}})],1),s("el-col",{staticStyle:{"padding-top":"5px"},attrs:{xs:10,sm:8,md:5,lg:4}},[s("el-dropdown",{staticClass:"drop-menu",attrs:{placement:"bottom",trigger:"hover"},on:{command:t.handleStatusChange}},[s("span",{staticClass:"el-dropdown-link"},[t._v(" "+t._s(t.status)+" "),s("i",{staticClass:"el-icon-caret-bottom"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"All"}},[t._v("All")]),t._l(Object.keys(t.JUDGE_STATUS_LIST),(function(e){return s("el-dropdown-item",{key:e,attrs:{command:e}},[t._v(" "+t._s(t.JUDGE_STATUS_LIST[e].name)+" ")])}))],2)],1)],1),s("el-col",{staticClass:"hidden-xs-only",attrs:{sm:8,md:5,lg:4}},[s("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-refresh",round:""},on:{click:t.getSubmissions}},[t._v("Refresh")])],1),s("el-col",{staticClass:"hidden-sm-and-up",attrs:{xs:4}},[s("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-refresh",circle:""},on:{click:t.getSubmissions}})],1),s("el-col",{staticClass:"search",attrs:{xs:24,sm:12,md:5,lg:5}},[s("vxe-input",{attrs:{placeholder:"Enter Problem ID",type:"search",size:"medium"},on:{"search-click":t.handleQueryChange},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQueryChange(e)}},model:{value:t.formFilter.problemID,callback:function(e){t.$set(t.formFilter,"problemID",e)},expression:"formFilter.problemID"}})],1),s("el-col",{staticClass:"search",attrs:{xs:24,sm:12,md:5,lg:5}},[s("vxe-input",{attrs:{disabled:t.formFilter.onlyMine,placeholder:"Enter Author",type:"search",size:"medium"},on:{"search-click":t.handleQueryChange},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQueryChange(e)}},model:{value:t.formFilter.username,callback:function(e){t.$set(t.formFilter,"username",e)},expression:"formFilter.username"}})],1)],1)],1),s("vxe-table",{ref:"xTable",attrs:{border:"inner",stripe:"","keep-source":"","highlight-current-row":"","highlight-hover-row":"",align:"center","auto-resize":"","row-class-name":t.tableRowClassName,data:t.submissions,loading:t.loadingTable}},[s("vxe-table-column",{attrs:{field:"submitId",title:"Run ID","min-width":"100"}}),s("vxe-table-column",{attrs:{field:"pid",title:"Problem ID","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t.contestID?s("span",{staticStyle:{color:"rgb(87, 163, 243)"},on:{click:function(e){return t.getProblemUri(a.displayId,!0)}}},[t._v(t._s(a.displayId)+" ")]):s("span",{staticStyle:{color:"rgb(87, 163, 243)"},on:{click:function(e){return t.getProblemUri(a.displayPid,!1)}}},[t._v(t._s(a.displayPid)+" ")])]}}])}),s("vxe-table-column",{attrs:{field:"status",title:"Status","min-width":"170"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",{class:t.getStatusColor(a.status)},[a.status==t.JUDGE_STATUS_RESERVE.Pending||a.status==t.JUDGE_STATUS_RESERVE.Compiling||a.status==t.JUDGE_STATUS_RESERVE.Judging?s("i",{staticClass:"el-icon-loading"}):t._e(),a.status==t.JUDGE_STATUS_RESERVE.sf&&a.uid==t.userInfo.uid?s("i",{staticClass:"el-icon-refresh",on:{click:function(e){return t.reSubmit(a)}}}):t._e(),t._v(" "+t._s(t.JUDGE_STATUS[a.status].name)+" ")])]}}])}),s("vxe-table-column",{attrs:{field:"time",title:"Time","min-width":"96"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",[t._v(t._s(t.submissionTimeFormat(e.time)))])]}}])}),s("vxe-table-column",{attrs:{field:"memory",title:"Memory","min-width":"96"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",[t._v(t._s(t.submissionMemoryFormat(e.memory)))])]}}])}),s("vxe-table-column",{attrs:{field:"length",title:"Length","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",[t._v(t._s(t.submissionLengthFormat(e.length)))])]}}])}),s("vxe-table-column",{attrs:{field:"language",title:"Language","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[a.share||a.uid==t.userInfo.uid||t.isAdminRole?s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看提交详情",placement:"top"}},[s("el-button",{attrs:{type:"text"},on:{click:function(e){return t.showSubmitDetail(a)}}},[t._v(t._s(a.language))])],1):s("span",[t._v(t._s(a.language))])]}}])}),s("vxe-table-column",{attrs:{field:"judger",title:"Judger","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[e.judger?s("span",[t._v(t._s(e.judger))]):s("span",[t._v("--")])]}}])}),s("vxe-table-column",{attrs:{field:"username",title:"Author","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("a",{staticStyle:{color:"rgb(87, 163, 243)"},on:{click:function(e){return t.goUserHome(a.username,a.uid)}}},[t._v(t._s(a.username))])]}}])}),s("vxe-table-column",{attrs:{field:"submitTime",title:"Submit Time","min-width":"96"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",[s("el-tooltip",{attrs:{content:t._f("localtime")(e.submitTime),placement:"top"}},[s("span",[t._v(t._s(t._f("fromNow")(e.submitTime)))])])],1)]}}])}),t.rejudgeColumnVisible?s("vxe-table-column",{attrs:{title:"Option","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("vxe-button",{attrs:{status:"primary",size:"mini",loading:a.loading},on:{click:function(e){return t.handleRejudge(a)}}},[t._v("Rejudge")])]}}],null,!1,4167061124)}):t._e()],1)],1),s("Pagination",{attrs:{total:t.total,"page-size":t.limit,current:t.currentPage},on:{"on-change":t.changeRoute,"update:current":function(e){t.currentPage=e}}})],1)])}),[],!1,null,"0e219c62",null).exports),ot={name:"highlight",data:function(){return{styleObject:{"border-left":"3px solid "+this.borderColor}}},props:{language:{type:String},code:{required:!0,type:String},borderColor:{type:String,default:"#19be6b"}},watch:{borderColor:function(t,e){t!=e&&(this.styleObject["border-left"]="3px solid "+t)}}},ut=(s("0cd9"),Object(v.a)(ot,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",{staticClass:"markdown-body"},[e("pre",{directives:[{name:"highlight",rawName:"v-highlight",value:t.code,expression:"code"}],style:t.styleObject},[e("code",{class:t.language})])])}),[],!1,null,null,null).exports),ft={name:"submissionDetails",components:{Highlight:ut},data:function(){return{submission:{code:"",submitId:"",submitTime:"",pid:"",cid:"",displayPid:"",status:0,time:"",memory:"",language:"",author:"",errorMessage:"",share:!0},tableData:[],testCaseResult:[],codeShare:!0,isIOProblem:!1,loadingTable:!1,JUDGE_STATUS:"",JUDGE_STATUS_RESERVE:""}},mounted:function(){this.getSubmission(),this.getAllCaseResult(),this.JUDGE_STATUS=Object.assign({},z),this.JUDGE_STATUS_RESERVE=Object.assign({},M)},methods:{doCopy:function(){this.$copyText(this.submission.code).then((function(t){m.success("Code copied successfully")}),(function(t){m.success("Code copy failed")}))},submissionTimeFormat:function(t){return at.submissionTimeFormat(t)},submissionMemoryFormat:function(t){return at.submissionMemoryFormat(t)},submissionLengthFormat:function(t){return at.submissionLengthFormat(t)},getProblemUri:function(t){0!=t.cid?this.$router.push({name:"ContestProblemDetails",params:{contestID:t.cid,problemID:t.displayPid}}):this.$router.push({name:"ProblemDetails",params:{problemID:t.displayPid}})},getStatusColor:function(t){return"el-tag el-tag--medium status-"+z[t].color},getTestCaseResultColor:function(t){return"color:"+z[t].rgb+"!important;border-color:"+z[t].rgb+"!important"},getbackgroudColor:function(t){return"status-"+z[t].color},getSubmission:function(){var t=this;this.loadingTable=!0,Dt.getSubmission(this.$route.params.submitID).then((function(e){t.loadingTable=!1,e=e.data.data,e.submission.memory&&e.submission.score&&!t.isIOProblem&&null!==e.submission.score&&(t.isIOProblem=!0),t.$route.params.problemID&&0!=e.submission.cid&&(e.submission.displayPid=t.$route.params.problemID),t.submission=e.submission,t.tableData=[e.submission],0!=e.submission.cid?t.codeShare=!1:t.codeShare=e.codeShare,t.$nextTick((function(t){st()}))}),(function(){t.loadingTable=!1}))},getAllCaseResult:function(){var t=this;Dt.getAllCaseResult(this.$route.params.submitID).then((function(e){t.testCaseResult=e.data.data}))},shareSubmission:function(t){var e=this;t={submitId:this.submission.submitId,share:t,uid:this.submission.uid};Dt.updateSubmission(t).then((function(t){e.getSubmission(),m.success(t.data.msg)}),(function(){}))}},computed:{status:function(){return{type:z[this.submission.status].type,statusName:z[this.submission.status].name,color:z[this.submission.status].rgb}},isCE:function(){return this.submission.status===M.ce},isSE:function(){return this.submission.status===M.se},isSF:function(){return this.submission.status===M.sf},isAdminRole:function(){return this.$store.getters.isAdminRole},isAuthenticated:function(){return this.$store.getters.isAuthenticated},isMeSubmisson:function(){return this.$store.getters.userInfo.uid===this.submission.uid}}},c=(s("1b0b"),Object(v.a)(ft,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",{attrs:{type:"flex",justify:"space-around"}},[s("el-col",{attrs:{span:24,id:"status"}},[s("el-alert",{class:t.getbackgroudColor(t.submission.status),staticStyle:{padding:"18px"},attrs:{type:t.status.type,"show-icon":"",closable:!1,effect:"dark"}},[s("template",{slot:"title"},[s("span",{staticClass:"title"},[t._v(t._s(t.status.statusName))])]),s("template",{slot:"default"},[t.isCE||t.isSE||t.isSF?s("div",{staticClass:"content"},[s("pre",[t._v(t._s(t.submission.errorMessage))])]):s("div",{staticClass:"content"},[s("span",{staticClass:"span-row"},[t._v("Time: "+t._s(t.submissionTimeFormat(t.submission.time)))]),s("span",{staticClass:"span-row"},[t._v("Memory: "+t._s(t.submissionMemoryFormat(t.submission.memory)))]),s("span",{staticClass:"span-row"},[t._v("Length: "+t._s(t.submissionLengthFormat(t.submission.length)))]),s("span",{staticClass:"span-row"},[t._v("Language: "+t._s(t.submission.language))]),s("span",{staticClass:"span-row"},[t._v("Author: "+t._s(t.submission.username))])])])],2)],1),t.tableData&&!t.isCE?s("el-col",{attrs:{span:24}},[s("vxe-table",{staticStyle:{"padding-top":"13px"},attrs:{align:"center",data:t.tableData,stripe:"","auto-resize":"",loading:t.loadingTable}},[s("vxe-table-column",{attrs:{field:"submitId",title:"ID","min-width":"100"}}),s("vxe-table-column",{attrs:{title:"Submit time","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",[t._v(t._s(t._f("localtime")(e.submitTime)))])]}}],null,!1,1043994308)}),s("vxe-table-column",{attrs:{field:"pid",title:"Problem ID","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("a",{staticStyle:{color:"rgb(87, 163, 243)"},on:{click:function(e){return t.getProblemUri(a)}}},[t._v(t._s(a.displayPid))])]}}],null,!1,1169308018)}),s("vxe-table-column",{attrs:{field:"status",title:"Status","min-width":"170"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",{class:t.getStatusColor(e.status)},[t._v(t._s(t.JUDGE_STATUS[e.status].name))])]}}],null,!1,3298978685)}),s("vxe-table-column",{attrs:{title:"Time","min-width":"96"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",[t._v(t._s(t.submissionTimeFormat(e.time)))])]}}],null,!1,3772463182)}),s("vxe-table-column",{attrs:{title:"Memory","min-width":"96"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",[t._v(t._s(t.submissionMemoryFormat(e.memory)))])]}}],null,!1,640197390)}),t.isIOProblem?s("vxe-table-column",{attrs:{title:"Score","min-width":"64"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",[t._v(t._s(e.score))])]}}],null,!1,2063086924)}):t._e(),s("vxe-table-column",{attrs:{title:"Length","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",[t._v(t._s(t.submissionLengthFormat(e.length)))])]}}],null,!1,1071386094)})],1)],1):t._e(),s("el-col",{staticStyle:{"margin-top":"13px"},attrs:{span:24}},[s("Highlight",{attrs:{code:t.submission.code,language:t.submission.language,"border-color":t.status.color},on:{"update:borderColor":function(e){return t.$set(t.status,"color",e)},"update:border-color":function(e){return t.$set(t.status,"color",e)}}})],1),s("el-col",{attrs:{span:24}},[s("div",{attrs:{id:"share-btn"}},[t.submission.code?s("el-button",{attrs:{type:"primary",icon:"el-icon-document-copy",size:"large"},on:{click:t.doCopy}},[t._v("Copy")]):t._e(),t.codeShare?[t.submission.share&&t.isAuthenticated&&t.isMeSubmisson?s("el-button",{attrs:{type:"warning",size:"large",icon:"el-icon-circle-close"},on:{click:function(e){return t.shareSubmission(!1)}}},[t._v(" Unshared ")]):t.isAuthenticated&&!t.submission.share&&t.isMeSubmisson?s("el-button",{attrs:{type:"primary",size:"large",icon:"el-icon-share"},on:{click:function(e){return t.shareSubmission(!0)}}},[t._v(" Shared ")]):t._e()]:t._e()],2)]),t.testCaseResult?s("el-col",{attrs:{span:24}},[s("el-card",{staticStyle:{"margin-top":"20px"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title home-title"},[t._v("测试点详情")])]),s("el-row",{attrs:{gutter:10}},t._l(t.testCaseResult,(function(e,a){return s("el-col",{key:a,attrs:{xs:24,md:12,lg:6}},[e.status==t.JUDGE_STATUS_RESERVE.ac?s("div",{staticClass:"test-detail-item",style:t.getTestCaseResultColor(e.status)},[s("span",[t._v("Test #"+t._s(a+1)+":")]),s("span",[t._v(t._s(e.time)+"ms/"+t._s(e.memory)+"KB")]),null!=e.score?s("span",{staticClass:"test-run-static"},[t._v(" "+t._s(e.score)+"分 "),s("i",{staticClass:"el-icon-success"})]):s("span",{staticClass:"test-run-static"},[s("i",{staticClass:"el-icon-success"})])]):s("div",{staticClass:"test-detail-item",style:t.getTestCaseResultColor(e.status)},[s("span",[t._v("Test #"+t._s(a+1)+":")]),s("span",[t._v(t._s(e.time)+"ms/"+t._s(e.memory)+"KB")]),null!=e.score?s("span",{staticClass:"test-run-static"},[t._v(" "+t._s(e.score)+"分 "),s("i",{staticClass:"el-icon-error"})]):s("span",{staticClass:"test-run-static"},[s("i",{staticClass:"el-icon-error"})])])])})),1)],1)],1):t._e()],1)}),[],!1,null,"54dcd9f6",null).exports),b={name:"contest-list",components:{Pagination:mt},data:function(){return{currentPage:1,query:{status:"",keyword:"",type:""},limit:10,total:0,rows:"",contests:[],CONTEST_STATUS_REVERSE:{},CONTEST_TYPE_REVERSE:G,acmSrc:s("dc5f"),oiSrc:s("74e1")}},mounted:function(){this.CONTEST_STATUS_REVERSE=Object.assign({},H),this.CONTEST_TYPE_REVERSE=Object.assign({},G),this.init()},methods:{init:function(){var t=this.$route.query;this.query.status=t.status||"",this.query.type=t.type||"",this.query.keyword=t.keyword||"",this.currentPage=parseInt(t.currentPage)||1,this.getContestList()},getContestList:function(){var t=this;Dt.getContestList(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,this.limit,this.query).then((function(e){t.contests=e.data.data.records,t.total=e.data.data.total}))},filterByChange:function(){var t=Object.assign({},this.query);t.currentPage=this.currentPage,this.$router.push({name:"ContestList",query:at.filterEmptyValue(t)})},parseContestType:function(t){return 0==t?"ACM":1==t?"OI":void 0},onRuleChange:function(t){this.query.type=t,this.currentPage=1,this.filterByChange()},onStatusChange:function(t){this.query.status=t,this.currentPage=1,this.filterByChange()},toContest:function(t){t.type===W||this.isAuthenticated?this.$router.push({name:"ContestDetails",params:{contestID:t.id}}):(m.warning("请先登录"),this.$store.dispatch("changeModalStatus",{visible:!0}))},getDuration:function(t,e){return wt.duration(t,e)},getborderColor:function(t){return"border-left: 4px solid "+H[t.status].color}},computed:Object(o.a)({},Object(r.mapGetters)(["isAuthenticated","userInfo"])),watch:{$route:function(t,e){t!==e&&this.init()}}},x=(s("fb94"),Object(v.a)(b,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",{attrs:{type:"flex",justify:"space-around"}},[s("el-col",{attrs:{span:24}},[s("el-card",{attrs:{shadow:""}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title"},[t._v(t._s(""===t.query.type?"All":t.parseContestType(t.query.type))+" Contests")]),s("div",{staticClass:"filter-row"},[s("span",[s("el-dropdown",{staticClass:"drop-menu",attrs:{placement:"bottom",trigger:"hover"},on:{command:t.onRuleChange}},[s("span",{staticClass:"el-dropdown-link"},[t._v(" "+t._s(""==t.query.type?"Rule":t.parseContestType(t.query.type))+" "),s("i",{staticClass:"el-icon-caret-bottom"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:""}},[t._v("All")]),s("el-dropdown-item",{attrs:{command:"0"}},[t._v("ACM")]),s("el-dropdown-item",{attrs:{command:"1"}},[t._v("OI")])],1)],1)],1),s("span",[s("el-dropdown",{staticClass:"drop-menu",attrs:{placement:"bottom",trigger:"hover"},on:{command:t.onStatusChange}},[s("span",{staticClass:"el-dropdown-link"},[t._v(" "+t._s(""===t.query.status?"Status":t.CONTEST_STATUS_REVERSE[t.query.status].name)+" "),s("i",{staticClass:"el-icon-caret-bottom"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:""}},[t._v("All")]),s("el-dropdown-item",{attrs:{command:"-1"}},[t._v("Scheduled")]),s("el-dropdown-item",{attrs:{command:"0"}},[t._v("Running")]),s("el-dropdown-item",{attrs:{command:"1"}},[t._v("Ended")])],1)],1)],1),s("span",[s("vxe-input",{attrs:{placeholder:"Enter keyword",type:"search",size:"medium"},on:{"search-click":t.filterByChange},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterByChange(e)}},model:{value:t.query.keyword,callback:function(e){t.$set(t.query,"keyword",e)},expression:"query.keyword"}})],1)])]),s("p",{directives:[{name:"show",rawName:"v-show",value:0==t.contests.length,expression:"contests.length == 0"}],attrs:{id:"no-contest"}},[t._v("暂无比赛")]),s("ol",{attrs:{id:"contest-list"}},t._l(t.contests,(function(e){return s("li",{key:e.title,style:t.getborderColor(e)},[s("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[s("el-col",{attrs:{xs:10,sm:4,md:3,lg:2}},[s("img",{directives:[{name:"show",rawName:"v-show",value:0==e.type,expression:"contest.type == 0"}],staticClass:"trophy",attrs:{src:t.acmSrc,width:"95px"}}),s("img",{directives:[{name:"show",rawName:"v-show",value:1==e.type,expression:"contest.type == 1"}],staticClass:"trophy",attrs:{src:t.oiSrc,width:"95px"}})]),s("el-col",{staticClass:"contest-main",attrs:{xs:10,sm:16,md:19,lg:20}},[s("p",{staticClass:"title"},[s("a",{staticClass:"entry",on:{click:function(s){return s.stopPropagation(),t.toContest(e)}}},[t._v(" "+t._s(e.title)+" ")]),1==e.auth?[s("i",{staticClass:"el-icon-lock",staticStyle:{color:"#d9534f"},attrs:{size:"20"}})]:t._e(),2==e.auth?[s("i",{staticClass:"el-icon-lock",staticStyle:{color:"#f0ad4e"},attrs:{size:"20"}})]:t._e()],2),s("ul",{staticClass:"detail"},[s("li",[s("i",{staticClass:"fa fa-calendar",staticStyle:{color:"#3091f2"},attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t._f("localtime")(e.startTime))+" ")]),s("li",[s("i",{staticClass:"fa fa-clock-o",staticStyle:{color:"#3091f2"},attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.getDuration(e.startTime,e.endTime))+" ")]),s("li",[s("el-button",{attrs:{size:"mini",round:""},on:{click:function(s){return t.onRuleChange(e.type)}}},[t._v(" "+t._s(t._f("parseContestType")(e.type))+" ")])],1),s("li",[s("el-tooltip",{attrs:{content:t.CONTEST_TYPE_REVERSE[e.auth].tips,placement:"top",effect:"light"}},[s("el-tag",{attrs:{type:t.CONTEST_TYPE_REVERSE[e.auth].color,effect:"plain"}},[t._v(" "+t._s(t.CONTEST_TYPE_REVERSE[e.auth].name)+" ")])],1)],1)])]),s("el-col",{staticStyle:{"text-align":"center"},attrs:{xs:4,sm:4,md:2,lg:2}},[s("el-tag",{attrs:{effect:"dark",color:t.CONTEST_STATUS_REVERSE[e.status].color,size:"medium"}},[s("i",{staticClass:"fa fa-circle",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.CONTEST_STATUS_REVERSE[e.status].name)+" ")])],1)],1)],1)})),0)]),s("Pagination",{attrs:{total:t.total,pageSize:t.limit,current:t.currentPage},on:{"on-change":t.getContestList,"update:current":function(e){t.currentPage=e}}})],1)],1)}),[],!1,null,"6f18e80b",null).exports),I=(s("d81d"),s("498a"),s("7a7a"),s("d2e8"),s("9c7b"),s("715d"),s("2aed"),s("d72f"),s("b933"),s("0b6c"),s("23de"),s("941f"),s("4ff4"),s("cd1c"),s("d3e0"),s("354f"),s("906f"),s("44d5"),s("8536"),s("b18e"),s("9948"),{name:"CodeMirror",components:{codemirror:bt.codemirror},props:{value:{type:String,default:""},languages:{type:Array,default:function(){return["C","C++","Java","Python3","Python2"]}},language:{type:String,default:"C"},theme:{type:String,default:"solarized"}},data:function(){return{options:{tabSize:4,mode:"text/x-csrc",theme:"solarized",lineNumbers:!0,line:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],lineWrapping:!0,styleSelectedText:!0,showCursorWhenSelecting:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},autoFocus:!0,matchBrackets:!0,indentUnit:4,styleActiveLine:!0,autoCloseBrackets:!0,autoCloseTags:!0,hintOptions:{completeSingle:!1}},mode:{C:"text/x-csrc"},themes:[{label:"monokai",value:"monokai"},{label:"solarized",value:"solarized"},{label:"material",value:"material"}]}},mounted:function(){var t=this;at.getLanguages().then((function(e){var s={};e.forEach((function(t){s[t.name]=t.contentType})),t.mode=s,t.editor.setOption("mode",t.mode[t.language])})),this.editor.on("inputRead",(function(t,e){/\w|\./g.test(e.text[0])&&"complete"!==e.origin&&t.showHint({hint:bt.CodeMirror.hint.anyword,completeSingle:!1,range:1e3})}))},methods:{onEditorCodeChange:function(t){this.$emit("update:value",t)},onLangChange:function(t){this.editor.setOption("mode",this.mode[t]),this.$emit("changeLang",t)},onThemeChange:function(t){this.editor.setOption("theme",t),this.$emit("changeTheme",t)},onResetClick:function(){this.$emit("resetCode")},onUploadFile:function(){document.getElementById("file-uploader").click()},onUploadFileDone:function(){var t=document.getElementById("file-uploader").files[0],e=new window.FileReader,s=this;e.onload=function(t){t=t.target.result,s.editor.setValue(t),document.getElementById("file-uploader").value=""},e.readAsText(t,"UTF-8")}},computed:{editor:function(){return this.$refs.myEditor.editor},currentLanguage:function(){return this.language}},watch:{theme:function(t,e){this.editor.setOption("theme",t)}}}),w=(s("3992"),s("684a"),Object(v.a)(I,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{margin:"0px 0px 15px 0px","font-size":"14px"}},[s("el-row",{staticClass:"header"},[s("el-col",{attrs:{xs:24,sm:14,md:14,lg:14}},[s("div",{staticClass:"select-row"},[s("span",[t._v("Lang:")]),s("span",[s("el-select",{staticClass:"adjust",attrs:{value:this.language,size:"small"},on:{change:t.onLangChange}},t._l(t.languages,(function(e){return s("el-option",{key:e,attrs:{value:e}},[t._v(t._s(e)+" ")])})),1)],1),s("span",[s("el-tooltip",{attrs:{content:"重置代码",placement:"top"}},[s("el-button",{attrs:{icon:"el-icon-refresh",size:"small"},on:{click:t.onResetClick}})],1)],1),s("span",[s("el-tooltip",{attrs:{content:"上传文件",placement:"top"}},[s("el-button",{attrs:{icon:"el-icon-upload",size:"small"},on:{click:t.onUploadFile}})],1)],1),s("span",[s("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file-uploader"},on:{change:t.onUploadFileDone}})])])]),s("el-col",{attrs:{xs:24,sm:10,md:10,lg:10}},[s("div",{staticClass:"select-row fl-right"},[s("span",[t._v("Theme:")]),s("el-select",{staticClass:"adjust",attrs:{value:this.theme,size:"small"},on:{change:t.onThemeChange}},t._l(t.themes,(function(e){return s("el-option",{key:e.label,attrs:{value:e.value}},[t._v(t._s(e.label)+" ")])})),1)],1)])],1),s("codemirror",{ref:"myEditor",attrs:{value:t.value,options:t.options},on:{change:t.onEditorCodeChange}})],1)}),[],!1,null,"01e5d69d",null).exports),{AC:{color:"#19be6b"},WA:{color:"#ed3f14"},TLE:{color:"#ff9300"},MLE:{color:"#f7de00"},RE:{color:"#ff6104"},CE:{color:"#80848f"},PAC:{color:"#2d8cf0"},PE:{color:"#f90"}});function Ct(t){return yt[t.name].color}var _t={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{left:"center",top:"10",orient:"horizontal",data:["AC","WA"]},series:[{name:"Summary",type:"pie",radius:"60%",center:["53%","55%"],itemStyle:{normal:{color:Ct}},data:[{value:0,name:"WA"},{value:0,name:"AC"}],label:{normal:{position:"inner",show:!0,formatter:"{b}: {c}\n {d}%",textStyle:{fontWeight:"bold"}}}}]},kt={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{left:"center",top:0,orient:"horizontal",itemGap:10,data:["AC","RE","WA","TLE","PAC","MLE","PE"]},series:[{name:"Detail",type:"pie",radius:["50%","65%"],center:["50%","55%"],itemStyle:{normal:{color:Ct}},data:[{value:0,name:"RE"},{value:0,name:"WA"},{value:0,name:"TLE"},{value:0,name:"AC"},{value:0,name:"MLE"},{value:0,name:"PAC"},{value:0,name:"PE"}],label:{normal:{formatter:"{b}: \n{d}%\n {c}",textStyle:{fontSize:10,fontWeight:"bold"}}},labelLine:{normal:{}}},{name:"Summary",type:"pie",radius:"35%",center:["52%","55%"],itemStyle:{normal:{color:Ct}},data:[{value:0,name:"WA"},{value:0,name:"AC",selected:!0}],label:{normal:{position:"inner",formatter:"{b}: {c}\n {d}%"}}}]},xt=["wa","ce","ac","tle","mle","re","pe"],St=(A={name:"ProblemDetails",components:{CodeMirror:w},data:function(){return{statusVisible:!1,captchaRequired:!1,graphVisible:!1,submissionExists:!1,captchaCode:"",captchaSrc:"",contestID:0,problemID:"",submitting:!1,code:"",language:"C",isRemote:!1,theme:"solarized",submissionId:"",submitted:!1,submitPwdVisible:!1,submitPwd:"",result:{status:9},problemData:{problem:{},problemCount:{},tags:[],languages:[],codeTemplate:{}},pie:_t,largePie:kt,largePieInitOpts:{width:"380",height:"380"},JUDGE_STATUS_RESERVE:{},RULE_TYPE:{}}},beforeRouteEnter:function(t,e,s){var a=j(et(t.params.problemID,t.params.contestID));a?s((function(t){t.language=a.language,t.code=a.code,t.theme=a.theme})):s()},mounted:function(){this.init(),this.JUDGE_STATUS_RESERVE=Object.assign({},M),this.RULE_TYPE=Object.assign({},J)},methods:Object(o.a)(Object(o.a)({},Object(r.mapActions)(["changeDomTitle"])),{},{init:function(){var t=this;this.$route.params.contestID&&(this.contestID=this.$route.params.contestID),this.problemID=this.$route.params.problemID;var e="ProblemDetails"===this.$route.name?"getProblem":"getContestProblem";Dt[e](this.problemID,this.contestID).then((function(e){var s,a=e.data.data;t.changeDomTitle({title:a.problem.title}),a.myStatus=-10,t.isAuthenticated&&(s=[a.problem.id],Dt.getUserProblemStatus(s,!1).then((function(e){e=e.data.data,-10!=e[a.problem.id]?(t.submissionExists=!0,a.myStatus=e[a.problem.id]):t.submissionExists=!1}))),a.problem.examples=at.stringToExamples(a.problem.examples),a.problem.description&&(a.problem.description=t.$markDown.render(a.problem.description.toString())),a.problem.input&&(a.problem.input=t.$markDown.render(a.problem.input.toString())),a.problem.output&&(a.problem.output=t.$markDown.render(a.problem.output.toString())),a.problem.hint&&(a.problem.hint=t.$markDown.render(a.problem.hint.toString())),t.problemData=a,t.isRemote=a.problem.isRemote,t.changePie(a.problemCount),""===t.code&&(t.language=t.problemData.languages[0],(s=t.problemData.codeTemplate)&&s[t.language]&&(t.code=s[t.language]))}),(function(){}))},changePie:function(t){var e,s=t.total,a=t.ac;for(e in t)0!=t[e]&&-1!==xt.indexOf(e)||delete t[e];a=[{name:"WA",value:s-a},{name:"AC",value:a}],this.pie.series[0].data=a,a=JSON.parse(JSON.stringify(a)),a[1].selected=!0,this.largePie.series[1].data=a,a=Object.keys(t).map((function(t){return(t+"").toUpperCase()})),0===a.length&&a.push("AC","WA"),this.largePie.legend.data=a,a=t.ac,delete t.ac;var i=[];Object.keys(t).forEach((function(e){i.push({name:(e+"").toUpperCase(),value:t[e]})})),i.push({name:"AC",value:a}),this.largePie.series[0].data=i},goProblemSubmission:function(){this.contestID?this.$router.push({name:"ContestSubmissionList",params:{contestID:this.contestID},query:{problemID:this.problemID}}):this.$router.push({name:"SubmissionList",query:{problemID:this.problemID}})},goProblemDiscussion:function(){this.$router.push({name:"ProblemDiscussion",params:{problemID:this.problemID}})},handleRoute:function(t){this.$router.push(t)},onChangeLang:function(t){""!=this.code.trim()&&this.code==this.problemData.codeTemplate[this.language]&&(this.problemData.codeTemplate[t]?this.code=this.problemData.codeTemplate[t]:this.code=""),this.language=t},onChangeTheme:function(t){this.theme=t},onResetToTemplate:function(){var t=this;this.$confirm("是否确定要重置代码模板？","提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"warning"}).then((function(){var e=t.problemData.codeTemplate;e&&e[t.language]?t.code=e[t.language]:t.code=""})).catch((function(){}))},checkSubmissionStatus:function(){var t=this;function e(){var s=t.submissionId;Dt.getSubmission(s).then((function(s){t.result.status=s.data.data.submission.status,0!==Object.keys(s.data.data.submission).length&&s.data.data.submission.status!=M.Pending&&s.data.data.submission.status!=M.Compiling&&s.data.data.submission.status!=M.Judging?(t.submitting=!1,t.submitted=!1,clearTimeout(t.refreshStatus),t.init()):t.refreshStatus=setTimeout(e,2e3)}),(function(e){t.submitting=!1,clearTimeout(t.refreshStatus)}))}this.refreshStatus&&clearTimeout(this.refreshStatus),this.refreshStatus=setTimeout(e,2e3)},submitCode:function(){var t=this;if(""!==this.code.trim()){if(!this.canSubmit&&this.$route.params.contestID){if(!this.submitPwd)return void(this.submitPwdVisible=!0);this.submitPwdVisible=!1}this.submissionId="",this.result={status:9},this.submitting=!0;var e={pid:this.problemID,language:this.language,code:this.code,cid:this.contestID,protectContestPwd:this.submitPwd,isRemote:this.isRemote};this.captchaRequired&&(e.captcha=this.captchaCode);var s=function(e,s){t.statusVisible=!0,Dt.submitCode(e).then((function(e){t.submissionId=e.data.data&&e.data.data.submitId,t.submitting=!1,t.submissionExists=!0,s?(m.success(e.data.msg),t.canSubmit||t.$store.commit("contestIntoAccess",{access:!0}),t.submitted=!0,t.checkSubmissionStatus()):t.$Modal.success({title:"Success",content:"代码提交成功！"})}),(function(e){t.submitting=!1,t.statusVisible=!1}))};this.contestRuleType!==J.OI||this.ContestRealTimePermission?s(e,!0):this.submissionExists?this.$confirm("你已经有该题目的提交了，确定要再一次提交覆盖之前的提交记录？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){setTimeout((function(){s(e,!1)}),1e3)})).catch((function(){t.submitting=!1})):s(e,!1)}else m.error("提交的代码不能为空！")},reSubmit:function(t){var e=this;this.result={status:9},this.submitting=!0,Dt.reSubmitRemoteJudge(t).then((function(t){m.success(t.data.msg),e.submitted=!0,e.checkSubmissionStatus()}),(function(t){e.submitting=!1,e.statusVisible=!1}))},onCopy:function(t){m.success("Sample copied successfully")},onCopyError:function(t){m.success("Sample copy failed")}}),computed:Object(o.a)(Object(o.a)({},Object(r.mapGetters)(["problemSubmitDisabled","contestRuleType","ContestRealTimePermission","contestStatus","isAuthenticated","canSubmit"])),{},{contest:function(){return this.$store.state.contest.contest},contestEnded:function(){return this.contestStatus===B.ENDED},submissionStatus:function(){return{text:z[this.result.status].name,color:z[this.result.status].rgb}},submissionRoute:function(){this.contestID?this.$router.push({name:"ContestSubmissionDeatil",params:{contestID:this.contestID,problemID:this.problemID,submitID:this.submissionId}}):this.$router.push({name:"SubmissionDeatil",params:{submitID:this.submissionId}})}}),beforeRouteLeave:function(t,e,s){clearInterval(this.refreshStatus),$(et(this.problemData.problem.problemId,e.params.contestID),{code:this.code,language:this.language,theme:this.theme}),s()},watch:{$route:function(){this.init()},isAuthenticated:function(t){!0===t&&this.init()}}},R=(s("3656"),Object(v.a)(A,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-container"},[s("div",{attrs:{id:"problem-main"}},[s("el-row",[s("el-col",{attrs:{sm:24,md:24,lg:12}},[s("el-card",{staticClass:"problem-detail",attrs:{padding:10,shadow:""}},[s("div",{staticClass:"panel-title",attrs:{slot:"header"},slot:"header"},[s("span",[t._v(t._s(t.problemData.problem.title))]),s("br"),t.contestID&&!t.contestEnded?s("span",[s("el-tag",{attrs:{effect:"plain",size:"small"}},[t._v("比赛题目")])],1):0<t.problemData.tags.length?s("div",{staticClass:"problem-tag"},t._l(t.problemData.tags,(function(e){return s("el-tag",{key:e,staticStyle:{"margin-right":"10px"},attrs:{effect:"plain",size:"small"}},[t._v(t._s(e))])})),1):0==t.problemData.tags.length?s("div",{staticClass:"problem-tag"},[s("el-tag",{attrs:{effect:"plain",size:"small"}},[t._v("暂无标签")])],1):t._e(),s("div",{staticClass:"problem-menu"},[t.contestID?t._e():s("span",[s("el-link",{attrs:{type:"primary",underline:!1},on:{click:t.goProblemDiscussion}},[s("i",{staticClass:"fa fa-comments",attrs:{"aria-hidden":"true"}}),t._v(" Discussion")])],1),s("span",[s("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(e){t.graphVisible=!t.graphVisible}}},[s("i",{staticClass:"fa fa-pie-chart",attrs:{"aria-hidden":"true"}}),t._v(" Statistic")])],1),s("span",[s("el-link",{attrs:{type:"primary",underline:!1},on:{click:t.goProblemSubmission}},[s("i",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}}),t._v(" Solution")])],1)]),s("div",{staticClass:"question-intr"},[s("span",[t._v("Time Limit：C/C++ "+t._s(t.problemData.problem.timeLimit)+"MS，Other "+t._s(2*t.problemData.problem.timeLimit)+"MS")]),s("br"),s("span",[t._v("Memory Limit：C/C++ "+t._s(t.problemData.problem.memoryLimit)+"MB，Other "+t._s(2*t.problemData.problem.memoryLimit)+"MB")]),s("br"),s("span",[t._v("Level："+t._s(t._f("parseProblemLevel")(t.problemData.problem.difficulty)))]),1==t.problemData.problem.type?s("span",{staticStyle:{"margin-left":"10px"}},[t._v("Score："+t._s(t.problemData.problem.ioScore))]):t._e(),s("br"),s("span",{directives:[{name:"show",rawName:"v-show",value:t.problemData.problem.author,expression:"problemData.problem.author"}]},[t._v("Create By："+t._s(t.problemData.problem.author))]),s("br")])]),s("div",{attrs:{id:"problem-content"}},[s("p",{staticClass:"title"},[t._v("Description")]),s("p",{directives:[{name:"katex",rawName:"v-katex"},{name:"highlight",rawName:"v-highlight"}],staticClass:"content markdown-body",domProps:{innerHTML:t._s(t.problemData.problem.description)}}),s("p",{staticClass:"title"},[t._v("Input")]),s("p",{directives:[{name:"katex",rawName:"v-katex"},{name:"highlight",rawName:"v-highlight"}],staticClass:"content markdown-body",domProps:{innerHTML:t._s(t.problemData.problem.input)}}),s("p",{staticClass:"title"},[t._v("Output")]),s("p",{directives:[{name:"katex",rawName:"v-katex"},{name:"highlight",rawName:"v-highlight"}],staticClass:"content markdown-body",domProps:{innerHTML:t._s(t.problemData.problem.output)}}),t._l(t.problemData.problem.examples,(function(e,a){return s("div",{key:a},[s("div",{staticClass:"flex-container example"},[s("div",{staticClass:"example-input"},[s("p",{staticClass:"title"},[t._v(" Sample Input "+t._s(a+1)+" "),s("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.input,expression:"example.input",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onCopyError,expression:"onCopyError",arg:"error"}],staticClass:"copy"},[s("i",{staticClass:"el-icon-document-copy"})])]),s("pre",[t._v(t._s(e.input))])]),s("div",{staticClass:"example-output"},[s("p",{staticClass:"title"},[t._v(" Sample Output "+t._s(a+1)+" "),s("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.output,expression:"example.output",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onCopyError,expression:"onCopyError",arg:"error"}],staticClass:"copy"},[s("i",{staticClass:"el-icon-document-copy"})])]),s("pre",[t._v(t._s(e.output))])])])])})),t.problemData.problem.hint?s("div",[s("p",{staticClass:"title"},[t._v("Hint")]),s("el-card",{attrs:{"dis-hover":""}},[s("div",{directives:[{name:"katex",rawName:"v-katex"},{name:"highlight",rawName:"v-highlight"}],staticClass:"content",domProps:{innerHTML:t._s(t.problemData.problem.hint)}})])],1):t._e(),t.problemData.problem.source&&!t.contestID?s("div",[s("p",{staticClass:"title"},[t._v("Source")]),s("p",{staticClass:"content",domProps:{innerHTML:t._s(t.problemData.problem.source)}})]):t._e()],2)])],1),s("el-col",{attrs:{sm:24,md:24,lg:12}},[s("el-card",{staticClass:"submit-detail",attrs:{padding:10,id:"submit-code",shadow:"always"}},[s("CodeMirror",{attrs:{value:t.code,languages:t.problemData.languages,language:t.language,theme:t.theme},on:{"update:value":function(e){t.code=e},"update:language":function(e){t.language=e},"update:theme":function(e){t.theme=e},resetCode:t.onResetToTemplate,changeTheme:t.onChangeTheme,changeLang:t.onChangeLang}}),s("el-row",[s("el-col",{staticStyle:{"margin-top":"4px"},attrs:{sm:24,md:10,lg:10}},[t.isAuthenticated?t._e():s("div",[s("el-alert",{attrs:{type:"info","show-icon":"",effect:"dark",closable:!1}},[t._v("Please login first")])],1),t.statusVisible?s("div",{staticClass:"status"},[t.result.status==t.JUDGE_STATUS_RESERVE.sf?[s("span",[t._v("Status:")]),s("el-tag",{attrs:{effect:"dark",color:t.submissionStatus.color},nativeOn:{click:function(e){return t.reSubmit(t.submissionId)}}},[s("i",{staticClass:"el-icon-refresh"}),t._v(" "+t._s(t.submissionStatus.text)+" ")])]:!this.contestID||this.contestID&&t.ContestRealTimePermission&&this.contestRuleType==t.RULE_TYPE.OI||this.contestID&&this.contestRuleType==t.RULE_TYPE.ACM?[s("span",[t._v("Status:")]),s("el-tag",{attrs:{effect:"dark",color:t.submissionStatus.color},nativeOn:{click:function(e){return t.submissionRoute(e)}}},[s("i",{staticClass:"fa fa-circle",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.submissionStatus.text)+" ")])]:this.contestID&&!t.ContestRealTimePermission&&this.contestRuleType==t.RULE_TYPE.OI?[s("el-alert",{attrs:{type:"success","show-icon":"",effect:"dark",closable:!1}},[t._v("Submitted successfully")])]:t._e()],2):this.contestID||t.problemData.myStatus!=t.JUDGE_STATUS_RESERVE.ac?this.contestID&&!t.ContestRealTimePermission&&this.contestRuleType==t.RULE_TYPE.OI&&t.submissionExists?s("div",[s("el-alert",{attrs:{type:"success","show-icon":"",effect:"dark",closable:!1}},[t._v("You have submitted a solution")])],1):t._e():s("div",[s("el-alert",{attrs:{type:"success","show-icon":"",effect:"dark",closable:!1}},[t._v("You have solved the problem")])],1),t.contestEnded?s("div",[s("el-alert",{attrs:{type:"warning","show-icon":"",effect:"dark",closable:!1}},[t._v("Contest has ended")])],1):t._e()]),s("el-col",{staticStyle:{"margin-top":"4px"},attrs:{sm:24,md:14,lg:14}},[t.captchaRequired?[s("div",{staticClass:"captcha-container"},[t.captchaRequired?s("el-tooltip",{attrs:{content:"Click to refresh",placement:"top"}},[s("img",{attrs:{src:t.captchaSrc},on:{click:t.getCaptchaSrc}})]):t._e(),s("el-input",{staticClass:"captcha-code",model:{value:t.captchaCode,callback:function(e){t.captchaCode=e},expression:"captchaCode"}})],1)]:t._e(),s("el-button",{staticClass:"fl-right",attrs:{type:"primary",icon:"el-icon-edit-outline",size:"small",loading:t.submitting,disabled:t.problemSubmitDisabled||t.submitted},on:{click:t.submitCode}},[t.submitting?s("span",[t._v("Submitting")]):s("span",[t._v("Submit")])])],2)],1)],1)],1)],1)],1),s("el-dialog",{attrs:{visible:t.graphVisible,width:"400px"},on:{"update:visible":function(e){t.graphVisible=e}}},[s("div",{attrs:{id:"pieChart-detail"}},[s("ECharts",{attrs:{options:t.largePie,initOptions:t.largePieInitOpts}})],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"ghost",size:"small"},on:{click:function(e){t.graphVisible=!1}}},[t._v("Close")])],1)]),s("el-dialog",{attrs:{visible:t.submitPwdVisible,width:"340px"},on:{"update:visible":function(e){t.submitPwdVisible=e}}},[s("el-form",[s("el-form-item",{attrs:{label:"Please Enter the Contest Protect Password"}},[s("el-input",{attrs:{placeholder:"Please Enter the Contest Protect Password","show-password":""},model:{value:t.submitPwd,callback:function(e){t.submitPwd=e},expression:"submitPwd"}})],1),s("el-button",{staticStyle:{"margin-left":"130px"},attrs:{type:"primary",round:""},on:{click:t.submitCode}},[t._v(" OK ")])],1)],1)],1)}),[],!1,null,"3793a914",null).exports),nt={name:"acm-rank",components:{Pagination:mt},data:function(){var t=this;return{page:1,limit:30,total:0,loadingTable:!1,screenWidth:768,dataRank:[],options:{tooltip:{trigger:"axis"},legend:{data:["AC","Total"]},grid:{x:"3%",x2:"3%",left:"8%",right:"8%"},toolbox:{show:!0,feature:{dataView:{show:!0,readOnly:!0},magicType:{show:!0,type:["line","bar","stack"]},saveAsImage:{show:!0}},right:"8%",top:"5%"},calculable:!0,xAxis:[{type:"category",data:["root"],axisLabel:{interval:0,showMinLabel:!0,showMaxLabel:!0,align:"center",formatter:function(e,s){return!(t.screenWidth<768)||t.isAuthenticated&&t.userInfo.username==e?at.breakLongWords(e,14):""}}}],yAxis:[{type:"value",axisLabel:{rotate:50,textStyle:{fontSize:"12em"}}}],series:[{name:"AC",type:"bar",data:[0],itemStyle:{color:"#91c7ae"},markPoint:{data:[{type:"max",name:"max"}]}},{name:"Total",type:"bar",data:[0],itemStyle:{color:"#6ab0b8"},markPoint:{data:[{type:"max",name:"max"}]}}]}}},created:function(){this.screenWidth=window.screen.width;var t=this;window.onresize=function(){t.screenWidth=document.documentElement.clientWidth}},mounted:function(){this.getRankData(1)},methods:{getRankData:function(t){var e=this,s=this.$refs.chart;s.showLoading({maskColor:"rgba(250, 250, 250, 0.8)"}),this.loadingTable=!0,Dt.getUserRank(t,this.limit,J.ACM).then((function(a){e.loadingTable=!1,1===t&&e.changeCharts(a.data.data.records.slice(0,10)),e.total=a.data.data.total,e.dataRank=a.data.data.records,s.hideLoading()})).catch((function(){e.loadingTable=!1,s.hideLoading()}))},changeCharts:function(t){var e=[],s=[],a=[];t.forEach((function(t){e.push(t.username),s.push(t.ac),a.push(t.total)})),this.options.xAxis[0].data=e,this.options.series[0].data=s,this.options.series[1].data=a},getInfoByUsername:function(t,e){this.$router.push({path:"/user-home",query:{uid:t,username:e}})},goUserACStatus:function(t){this.$router.push({path:"/status",query:{username:t,status:0}})},getACRate:function(t,e){return at.getACRate(t,e)}},computed:Object(o.a)({},Object(r.mapGetters)(["isAuthenticated","userInfo"]))},k=(s("9153"),Object(v.a)(nt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",{attrs:{type:"flex",justify:"space-around"}},[s("el-col",{attrs:{span:24}},[s("el-card",{attrs:{padding:10}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title"},[t._v("ACM Ranklist")])]),s("div",{staticClass:"echarts"},[s("ECharts",{ref:"chart",attrs:{options:t.options,autoresize:!0}})],1)]),s("vxe-table",{staticStyle:{"font-weight":"500"},attrs:{data:t.dataRank,loading:t.loadingTable,align:"center","highlight-hover-row":"","auto-resize":""}},[s("vxe-table-column",{attrs:{type:"seq","min-width":"50"}}),s("vxe-table-column",{attrs:{field:"username",title:"User","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("a",{staticStyle:{color:"rgb(87, 163, 243)"},on:{click:function(e){return t.getInfoByUsername(a.uid,a.username)}}},[t._v(t._s(a.username))])]}}])}),s("vxe-table-column",{attrs:{field:"nickname",title:"Nickname","min-width":"180"}}),s("vxe-table-column",{attrs:{field:"signature",title:"Mood","min-width":"180"}}),s("vxe-table-column",{attrs:{field:"solved",title:"Solved","min-width":"80"}}),s("vxe-table-column",{attrs:{title:"AC","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("a",{staticStyle:{color:"rgb(87, 163, 243)"},on:{click:function(e){return t.goUserACStatus(a.username)}}},[t._v(t._s(a.ac))])]}}])}),s("vxe-table-column",{attrs:{field:"total",title:"Total","min-width":"80"}}),s("vxe-table-column",{attrs:{title:"Rating","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",[t._v(t._s(t.getACRate(e.ac,e.total)))])]}}])})],1),s("Pagination",{attrs:{total:t.total,"page-size":t.limit,current:t.page,"show-sizer":""},on:{"update:pageSize":function(e){t.limit=e},"update:page-size":function(e){t.limit=e},"update:current":function(e){t.page=e},"on-change":t.getRankData,"on-page-size-change":function(e){return t.getRankData(1)}}})],1)],1)}),[],!1,null,"72f387ae",null).exports),D={name:"acm-rank",components:{Pagination:mt},data:function(){var t=this;return{page:1,limit:30,total:0,dataRank:[],loadingTable:!1,screenWidth:768,options:{tooltip:{trigger:"axis"},legend:{data:["Score"]},grid:{x:"3%",x2:"3%",left:"8%",right:"8%"},toolbox:{show:!0,feature:{dataView:{show:!0,readOnly:!0},magicType:{show:!0,type:["line","bar"]},saveAsImage:{show:!0}},right:"8%",top:"5%"},calculable:!0,xAxis:[{type:"category",data:["root"],boundaryGap:!0,axisLabel:{interval:0,showMinLabel:!0,showMaxLabel:!0,align:"center",formatter:function(e,s){return!(t.screenWidth<768)||t.isAuthenticated&&t.userInfo.username==e?at.breakLongWords(e,14):""}},axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value",axisLabel:{rotate:50,textStyle:{fontSize:"12em"}}}],series:[{name:"Score",type:"bar",data:[0],barMaxWidth:"80",markPoint:{data:[{type:"max",name:"max"}]}}]}}},created:function(){this.screenWidth=window.screen.width;var t=this;window.onresize=function(){t.screenWidth=document.documentElement.clientWidth}},mounted:function(){this.getRankData(1)},methods:{getRankData:function(t){var e=this,s=this.$refs.chart;s.showLoading({maskColor:"rgba(250, 250, 250, 0.8)"}),this.loadingTable=!0,Dt.getUserRank(t,this.limit,J.OI).then((function(a){1===t&&e.changeCharts(a.data.data.records.slice(0,10)),e.total=a.data.data.total,e.dataRank=a.data.data.records,e.loadingTable=!1,s.hideLoading()}),(function(t){e.loadingTable=!1,s.hideLoading()}))},changeCharts:function(t){var e=[],s=[];t.forEach((function(t){e.push(t.username),s.push(t.score)})),this.options.xAxis[0].data=e,this.options.series[0].data=s},getInfoByUsername:function(t,e){this.$router.push({path:"/user-home",query:{uid:t,username:e}})},goUserACStatus:function(t){this.$router.push({path:"/status",query:{username:t,status:0}})},getACRate:function(t,e){return at.getACRate(t,e)}},computed:Object(o.a)({},Object(r.mapGetters)(["isAuthenticated","userInfo"]))},i=(s("9a0d"),Object(v.a)(D,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",{attrs:{type:"flex",justify:"space-around"}},[s("el-col",{attrs:{span:24}},[s("el-card",{attrs:{padding:10}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title"},[t._v("OI Ranklist")])]),s("div",{staticClass:"echarts"},[s("ECharts",{ref:"chart",attrs:{options:t.options,"auto-resize":""}})],1)]),s("vxe-table",{staticStyle:{"font-weight":"500"},attrs:{data:t.dataRank,loading:t.loadingTable,align:"center","highlight-hover-row":"","auto-resize":""}},[s("vxe-table-column",{attrs:{type:"seq","min-width":"50"}}),s("vxe-table-column",{attrs:{field:"username",title:"User","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("a",{staticStyle:{color:"rgb(87, 163, 243)"},on:{click:function(e){return t.getInfoByUsername(a.uid,a.username)}}},[t._v(t._s(a.username))])]}}])}),s("vxe-table-column",{attrs:{field:"nickname",title:"Nickname","min-width":"180"}}),s("vxe-table-column",{attrs:{field:"signature",title:"Mood","min-width":"180"}}),s("vxe-table-column",{attrs:{field:"score",title:"Score","min-width":"80"}}),s("vxe-table-column",{attrs:{title:"AC","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("a",{staticStyle:{color:"rgb(87, 163, 243)"},on:{click:function(e){return t.goUserACStatus(a.username)}}},[t._v(t._s(a.ac))])]}}])}),s("vxe-table-column",{attrs:{field:"total",title:"Total","min-width":"80"}}),s("vxe-table-column",{attrs:{title:"Rating","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",[t._v(t._s(t.getACRate(e.ac,e.total)))])]}}])})],1),s("Pagination",{attrs:{total:t.total,"page-size":t.limit,current:t.page,"show-sizer":""},on:{"update:pageSize":function(e){t.limit=e},"update:page-size":function(e){t.limit=e},"update:current":function(e){t.page=e},"on-change":t.getRankData,"on-page-size-change":function(e){return t.getRankData(1)}}})],1)],1)}),[],!1,null,"4ea0b32e",null).exports),ot={name:"",data:function(){return{route_name:"contestDetails",timer:null,CONTEST_STATUS:{},CONTEST_STATUS_REVERSE:{},CONTEST_TYPE_REVERSE:{},RULE_TYPE:{},btnLoading:!1,contestPassword:""}},created:function(){var t=this;this.contestID=this.$route.params.contestID,this.route_name=this.$route.name,"ContestProblemDetails"==this.route_name&&(this.route_name="ContestProblemList"),"ContestSubmissionDeatil"==this.route_name&&(this.route_name="ContestSubmissionList"),this.CONTEST_TYPE_REVERSE=Object.assign({},G),this.CONTEST_STATUS=Object.assign({},B),this.CONTEST_STATUS_REVERSE=Object.assign({},H),this.RULE_TYPE=Object.assign({},J),this.$store.dispatch("getContest").then((function(e){t.changeDomTitle({title:e.data.data.title}),e=e.data.data,vt()(e.endTime).isAfter(vt()(e.now))&&(t.timer=setInterval((function(){t.$store.commit("nowAdd1s")}),1e3)),t.$nextTick((function(t){st()}))}))},methods:Object(o.a)(Object(o.a)({},Object(r.mapActions)(["changeDomTitle"])),{},{formatTooltip:function(t){return-1==this.contest.status?"00:00:00":0==this.contest.status?wt.secondFormat(this.BeginToNowDuration):wt.secondFormat(this.contest.duration)},checkPassword:function(){var t=this;""!==this.contestPassword?(this.btnLoading=!0,Dt.registerContest(this.contestID+"",this.contestPassword).then((function(e){m.success(e.data.msg),t.$store.commit("contestIntoAccess",{intoAccess:!0}),t.btnLoading=!1}),(function(e){t.btnLoading=!1}))):m.warning("请输入该比赛的密码！")},tabClick:function(t){t=t.name,t!==this.$route.name&&this.$router.push({name:t})}}),computed:Object(o.a)(Object(o.a)(Object(o.a)({},Object(r.mapState)({contest:function(t){return t.contest.contest},now:function(t){return t.contest.now}})),Object(r.mapGetters)(["contestMenuDisabled","contestRuleType","contestStatus","countdown","BeginToNowDuration","isContestAdmin","isSuperAdmin","ContestRealTimePermission","passwordFormVisible"])),{},{progressValue:{get:function(){return this.$store.getters.progressValue},set:function(){}},timeStep:function(){return 100/this.contest.duration},countdownColor:function(){if(this.contestStatus)return"color:"+H[this.contestStatus].color},showAdminHelper:function(){return this.isContestAdmin&&this.contestRuleType===J.ACM},descriptionHtml:function(){if(this.contest.description)return this.$markDown.render(this.contest.description)}}),watch:{$route:function(t){this.route_name=t.name,"ContestProblemDetails"==t.name&&(this.route_name="ContestProblemList"),"ContestSubmissionDeatil"==this.route_name&&(this.route_name="ContestSubmissionList"),this.contestID=t.params.contestID,this.changeDomTitle({title:this.contest.title})}},beforeDestroy:function(){clearInterval(this.timer),this.$store.commit("clearContest")}},ft=(s("7c9a"),Object(v.a)(ot,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",{staticClass:"contest-body"},[e("el-row",[e("el-col",{attrs:{xs:24,md:24,lg:24}},[e("el-card",{attrs:{shadow:""}},[e("div",{staticClass:"contest-title"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"panel-title"},[t._v(t._s(t.contest.title))])])]),e("el-row",[e("el-col",{staticClass:"text-align:left",attrs:{span:12}},[null!=t.contest.auth&&null!=t.contest.auth?e("el-tooltip",{attrs:{content:t.CONTEST_TYPE_REVERSE[t.contest.auth].tips,placement:"top"},on:{"update:content":function(e){return t.$set(t.CONTEST_TYPE_REVERSE[t.contest.auth],"tips",e)}}},[e("el-tag",{attrs:{type:t.CONTEST_TYPE_REVERSE[t.contest.auth].color,effect:"plain"},on:{"update:type":function(e){return t.$set(t.CONTEST_TYPE_REVERSE[t.contest.auth],"color",e)}}},[t._v(" "+t._s(t.CONTEST_TYPE_REVERSE[t.contest.auth].name)+" ")])],1):t._e()],1),e("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[null!=t.contest?e("el-button",{attrs:{size:"small",plain:""}},[t._v(" "+t._s(t._f("parseContestType")(t.contest.type))+" ")]):t._e()],1)],1),e("div",{staticClass:"contest-time"},[e("el-row",[e("el-col",{staticClass:"left",attrs:{xs:24,md:12}},[e("p",[e("i",{staticClass:"fa fa-hourglass-start",attrs:{"aria-hidden":"true"}}),t._v(" StartAt："+t._s(t._f("localtime")(t.contest.startTime))+" ")])]),e("el-col",{staticClass:"right",attrs:{xs:24,md:12}},[e("p",[e("i",{staticClass:"fa fa-hourglass-end",attrs:{"aria-hidden":"true"}}),t._v(" EndAt："+t._s(t._f("localtime")(t.contest.endTime))+" ")])])],1)],1),e("div",{staticClass:"slider"},[e("el-slider",{attrs:{"format-tooltip":t.formatTooltip,step:t.timeStep},model:{value:t.progressValue,callback:function(e){t.progressValue=e},expression:"progressValue"}})],1),e("el-row",[e("el-col",{staticStyle:{"text-align":"center"},attrs:{span:24}},[e("el-tag",{style:t.countdownColor,attrs:{effect:"dark",size:"medium"}},[e("i",{staticClass:"fa fa-circle",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.countdown)+" ")])],1)],1)],1)],1)],1),e("div",{staticClass:"sub-menu"},[t.passwordFormVisible?e("el-card",{staticClass:"password-form-card",staticStyle:{"text-align":"center"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"panel-title"},[t._v("Password required")])]),e("p",{staticClass:"password-form-tips"},[t._v(" To enter the Private contest,please input the password! ")]),e("el-form",[e("el-input",{attrs:{type:"password",placeholder:"Enter the contest password"},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.checkPassword(e)}},model:{value:t.contestPassword,callback:function(e){t.contestPassword=e},expression:"contestPassword"}}),e("el-button",{staticStyle:{float:"right",margin:"5px"},attrs:{type:"primary"},on:{click:t.checkPassword}},[t._v("Enter")])],1)],1):e("el-tabs",{on:{"tab-click":t.tabClick},model:{value:t.route_name,callback:function(e){t.route_name=e},expression:"route_name"}},[e("el-tab-pane",{attrs:{name:"ContestDetails",lazy:""}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"el-icon-s-home"}),t._v(" Overview")]),e("el-card",{staticClass:"box-card"},[e("div",{directives:[{name:"katex",rawName:"v-katex"},{name:"highlight",rawName:"v-highlight"}],staticClass:"markdown-body",domProps:{innerHTML:t._s(t.descriptionHtml)}})])],1),e("el-tab-pane",{attrs:{name:"ContestProblemList",lazy:"",disabled:t.contestMenuDisabled}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"fa fa-list",attrs:{"aria-hidden":"true"}}),t._v(" Problem")]),e("transition",{attrs:{name:"el-zoom-in-bottom"}},["ContestProblemList"===t.route_name?e("router-view"):t._e()],1)],1),e("el-tab-pane",{attrs:{name:"ContestSubmissionList",lazy:"",disabled:t.contestMenuDisabled}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"el-icon-menu"}),t._v(" Status")]),e("transition",{attrs:{name:"el-zoom-in-bottom"}},["ContestSubmissionList"===t.route_name?e("router-view"):t._e()],1)],1),e("el-tab-pane",{attrs:{name:"ContestRank",lazy:"",disabled:t.contestMenuDisabled}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"fa fa-bar-chart",attrs:{"aria-hidden":"true"}}),t._v(" Rank")]),e("transition",{attrs:{name:"el-zoom-in-bottom"}},["ContestRank"===t.route_name?e("router-view"):t._e()],1)],1),e("el-tab-pane",{attrs:{name:"ContestAnnouncementList",lazy:"",disabled:t.contestMenuDisabled}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"fa fa-bullhorn",attrs:{"aria-hidden":"true"}}),t._v(" Announcement")]),e("transition",{attrs:{name:"el-zoom-in-bottom"}},["ContestAnnouncementList"===t.route_name?e("router-view"):t._e()],1)],1),e("el-tab-pane",{attrs:{name:"ContestComment",lazy:"",disabled:t.contestMenuDisabled}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"fa fa-commenting",attrs:{"aria-hidden":"true"}}),t._v(" Comment")]),e("transition",{attrs:{name:"el-zoom-in-bottom"}},["ContestComment"===t.route_name?e("router-view"):t._e()],1)],1),t.showAdminHelper?e("el-tab-pane",{attrs:{name:"ContestACInfo",lazy:"",disabled:t.contestMenuDisabled}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"el-icon-s-help",attrs:{"aria-hidden":"true"}}),t._v(" AC Info")]),e("transition",{attrs:{name:"el-zoom-in-bottom"}},["ContestACInfo"===t.route_name?e("router-view"):t._e()],1)],1):t._e(),t.isSuperAdmin?e("el-tab-pane",{attrs:{name:"ContestRejudgeAdmin",lazy:"",disabled:t.contestMenuDisabled}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"el-icon-refresh",attrs:{"aria-hidden":"true"}}),t._v(" Rejudge")]),e("transition",{attrs:{name:"el-zoom-in-bottom"}},["ContestRejudgeAdmin"===t.route_name?e("router-view"):t._e()],1)],1):t._e()],1)],1)],1)}),[],!1,null,"7509fd4e",null).exports),b={name:"ContestProblemList",data:function(){return{JUDGE_STATUS:{},RULE_TYPE:{},isGetStatusOk:!1}},mounted:function(){this.RULE_TYPE=Object.assign({},J),this.JUDGE_STATUS=Object.assign({},z),this.getContestProblems()},methods:{getContestProblems:function(){var t=this;this.$store.dispatch("getContestProblems").then((function(e){if(t.isAuthenticated){for(var s=[],a=0;a<t.problems.length;a++)s.push(t.problems[a].pid);Dt.getUserProblemStatus(s,!0,t.$route.params.contestID).then((function(e){for(var s=e.data.data,a=0;a<t.problems.length;a++)t.problems[a].myStatus=s[t.problems[a].pid].status,t.problems[a].score=s[t.problems[a].pid].score;t.isGetStatusOk=!0}))}}))},goContestProblem:function(t){this.$router.push({name:"ContestProblemDetails",params:{contestID:this.$route.params.contestID,problemID:t.row.displayId}})},getACRate:function(t,e){return at.getACRate(t,e)},getIconColor:function(t){return"font-weight: 600;font-size: 16px;color:"+z[t].rgb},getScoreColor:function(t){return 0==t?"el-tag el-tag--small oi-0":0<t&&t<100?"el-tag el-tag--small oi-between":100==t?"el-tag el-tag--small oi-100":void 0}},computed:Object(o.a)(Object(o.a)({},Object(r.mapState)({problems:function(t){return t.contest.contestProblems}})),Object(r.mapGetters)(["isAuthenticated","contestRuleType","ContestRealTimePermission"]))},I=Object(v.a)(b,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"problem-list"},[s("vxe-table",{attrs:{border:"inner",stripe:"","auto-resize":"","highlight-hover-row":"",data:t.problems},on:{"cell-click":t.goContestProblem}},[t.isAuthenticated&&t.isGetStatusOk&&t.contestRuleType==t.RULE_TYPE.OI?s("vxe-table-column",{attrs:{field:"status",title:"",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[null!=e.score?s("span",{class:t.getScoreColor(e.score)},[t._v(t._s(e.score))]):s("el-tooltip",{attrs:{content:t.JUDGE_STATUS[e.myStatus].name,placement:"top"}},[-10!=e.myStatus?s("i",{staticClass:"el-icon-minus",style:t.getIconColor(e.myStatus)}):t._e()])]}}],null,!1,3443639655)}):t._e(),t.isAuthenticated&&t.isGetStatusOk&&t.contestRuleType==t.RULE_TYPE.ACM?s("vxe-table-column",{attrs:{field:"status",title:"",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("el-tooltip",{attrs:{content:t.JUDGE_STATUS[e.myStatus].name,placement:"top"}},[0==e.myStatus?s("i",{staticClass:"el-icon-check",style:t.getIconColor(e.myStatus)}):-10!=e.myStatus?s("i",{staticClass:"el-icon-minus",style:t.getIconColor(e.myStatus)}):t._e()])]}}],null,!1,3476276073)}):t._e(),s("vxe-table-column",{attrs:{field:"displayId",width:"80",title:"#"}}),s("vxe-table-column",{attrs:{field:"displayTitle",title:"Title","min-width":"200"}}),t.ContestRealTimePermission?s("vxe-table-column",{attrs:{field:"ac",title:"AC","min-width":"80"}}):t._e(),t.ContestRealTimePermission?s("vxe-table-column",{attrs:{field:"total",title:"Total","min-width":"80"}}):t._e(),t.ContestRealTimePermission?s("vxe-table-column",{attrs:{field:"ACRating",title:"AC Rate","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",[t._v(t._s(t.getACRate(e.ac,e.total)))])]}}],null,!1,1250984827)}):t._e()],1)],1)}),[],!1,null,"c942d466",null).exports,s("3835"));w={methods:{getContestRankData:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,s=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.showChart&&!s&&this.$refs.chart.showLoading({maskColor:"rgba(250, 250, 250, 0.8)"});var a={currentPage:e,limit:this.limit,cid:this.$route.params.contestID,forceRefresh:!!this.forceUpdate};Dt.getContestRank(a).then((function(a){t.showChart&&!s&&t.$refs.chart.hideLoading(),t.total=a.data.data.total,1===e&&t.applyToChart(a.data.data.records.slice(0,10)),t.applyToTable(a.data.data.records)}))},handleAutoRefresh:function(t){var e=this;1==t?this.refreshFunc=setInterval((function(){e.page=1,e.getContestRankData(1,!0)}),1e4):clearInterval(this.refreshFunc)}},computed:Object(o.a)(Object(o.a)(Object(o.a)({},Object(r.mapGetters)(["isContestAdmin"])),Object(r.mapState)({contest:function(t){return t.contest.contest},contestProblems:function(t){return t.contest.contestProblems}})),{},{showChart:{get:function(){return this.$store.state.contest.itemVisible.chart},set:function(t){this.$store.commit("changeContestItemVisible",{chart:t})}},showTable:{get:function(){return this.$store.state.contest.itemVisible.table},set:function(t){this.$store.commit("changeContestItemVisible",{table:t})}},forceUpdate:{get:function(){return this.$store.state.contest.forceUpdate},set:function(t){this.$store.commit("changeRankForceUpdate",{value:t})}},refreshDisabled:function(){return this.contest.status===B.ENDED}}),beforeDestroy:function(){clearInterval(this.refreshFunc)}},A={name:"ACMContestRank",mixins:[w],components:{Pagination:mt},data:function(){return{total:0,page:1,limit:30,autoRefresh:!1,contestID:"",dataRank:[],options:{title:{text:"Top 10 Teams",left:"center",top:0},dataZoom:[{type:"inside",filterMode:"none",xAxisIndex:[0],start:0,end:100}],toolbox:{show:!0,feature:{saveAsImage:{show:!0,title:"save as image"}},right:"0"},tooltip:{trigger:"axis",axisPointer:{type:"cross",axis:"x"}},legend:{orient:"horizontal",x:"center",top:"8%",right:0,data:[],formatter:function(t){return at.breakLongWords(t,16)},textStyle:{fontSize:12}},grid:{x:80,x2:100,left:"5%",top:"25%",right:"5%",bottom:"10%"},xAxis:[{type:"time",splitLine:!1,axisPointer:{show:!0,snap:!0}}],yAxis:[{type:"category",boundaryGap:!1,data:[0]}],series:[]}}},mounted:function(){this.contestID=this.$route.params.contestID,this.getContestRankData(1),this.addChartCategory(this.contestProblems)},methods:Object(o.a)(Object(o.a)({},Object(r.mapActions)(["getContestProblems"])),{},{getUserTotalSubmit:function(t){this.$router.push({name:"ContestSubmissionList",query:{username:t}})},getUserHomeByUsername:function(t,e){this.$router.push({name:"UserHome",query:{username:e,uid:t}})},getContestProblemById:function(t){this.$router.push({name:"ContestProblemDetails",params:{contestID:this.contestID,problemID:t}})},cellClassName:function(t){var e=t.row,s=(t.rowIndex,t.column);t=t.columnIndex;if("id"!==s.property&&"rating"!==s.property&&"totalTime"!==s.property&&"username"!==s.property&&"realname"!==s.property)return this.isContestAdmin?e.cellClassName[[this.contestProblems[t-5].displayId]]:e.cellClassName[[this.contestProblems[t-4].displayId]]},applyToTable:function(t){var e=JSON.parse(JSON.stringify(t));e.forEach((function(t,s){var a=t.submissionInfo,i={};Object.keys(a).forEach((function(t){e[s][t]=a[t],e[s][t].ACTime=wt.secondFormat(e[s][t].ACTime);var n=a[t];n.isFirstAC?i[t]="first-ac":n.isAC?i[t]="ac":0!=n.errorNum&&(i[t]="wa")})),e[s].cellClassName=i})),this.dataRank=e},addChartCategory:function(t){for(var e=[],s=0;s<=t.length;++s)e.push(s);this.options.yAxis[0].data=e},applyToChart:function(t){var e=this,s=[],a=[];t.forEach((function(t){s.push(t.username);var i=t.submissionInfo,n=[];Object.keys(i).forEach((function(t){i[t].isAC&&n.push(i[t].ACTime)})),n.sort((function(t,e){return t-e}));var o=[];o.push([e.contest.startTime,0]);var r,l=Object(O.a)(n.entries());try{for(l.s();!(r=l.n()).done;){var c=Object(St.a)(r.value,2),u=c[0],d=c[1],m=vt()(e.contest.startTime).add(d,"seconds").format();o.push([m,u+1])}}catch(t){l.e(t)}finally{l.f()}a.push({name:t.username,type:"line",data:o})})),this.options.legend.data=s,this.options.series=a},parseTotalTime:function(t){return wt.secondFormat(t)},downloadRankCSV:function(){at.downloadFile("/api/file/download-contest-rank?cid=".concat(this.$route.params.contestID,"&forceRefresh=").concat(!!this.forceUpdate))}}),watch:{contestProblems:function(t,e){0!=t.length&&this.addChartCategory(this.contestProblems)}}},s("11f5"),nt=Object(v.a)(A,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-card",{attrs:{shadow:""}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title"},[t._v("Contest Rank")]),s("span",{staticStyle:{float:"right","font-size":"20px"}},[s("el-popover",{attrs:{trigger:"hover",placement:"left-start"}},[s("i",{staticClass:"el-icon-s-tools",attrs:{slot:"reference"},slot:"reference"}),s("div",{attrs:{id:"switches"}},[s("p",[s("span",[t._v("Chart")]),s("el-switch",{model:{value:t.showChart,callback:function(e){t.showChart=e},expression:"showChart"}})],1),s("p",[s("span",[t._v("Table")]),s("el-switch",{model:{value:t.showTable,callback:function(e){t.showTable=e},expression:"showTable"}})],1),s("p",[s("span",[t._v("Auto Refresh(10s)")]),s("el-switch",{attrs:{disabled:t.refreshDisabled},on:{change:t.handleAutoRefresh},model:{value:t.autoRefresh,callback:function(e){t.autoRefresh=e},expression:"autoRefresh"}})],1),t.isContestAdmin?[s("p",[s("span",[t._v("Force Update")]),s("el-switch",{attrs:{disabled:t.refreshDisabled},model:{value:t.forceUpdate,callback:function(e){t.forceUpdate=e},expression:"forceUpdate"}})],1)]:t._e(),[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.downloadRankCSV}},[t._v("Download as CSV")])]],2)])],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showChart,expression:"showChart"}],staticClass:"echarts"},[s("ECharts",{ref:"chart",attrs:{options:t.options,autoresize:!0}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showTable,expression:"showTable"}]},[s("vxe-table",{attrs:{round:"","auto-resize":"",size:"mini",align:"center",data:t.dataRank,"cell-class-name":t.cellClassName,"seq-config":{startIndex:(this.page-1)*this.limit}}},[s("vxe-table-column",{attrs:{field:"id",type:"seq","min-width":"50",fixed:"left"}}),s("vxe-table-column",{attrs:{field:"username","min-width":"150",title:"User"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",[s("a",{staticStyle:{color:"rgb(87, 163, 243)"},on:{click:function(e){return t.getUserHomeByUsername(a.uid,a.username)}}},[t._v(t._s(a.username))])])]}}])}),t.isContestAdmin?s("vxe-table-column",{attrs:{field:"realname","min-width":"100",title:"RealName"}}):t._e(),s("vxe-table-column",{attrs:{field:"rating",title:"AC / Total","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(a.ac)+" / "),s("a",{staticStyle:{color:"rgb(87, 163, 243)"},on:{click:function(e){return t.getUserTotalSubmit(a.username)}}},[t._v(t._s(a.total))])])]}}])}),s("vxe-table-column",{attrs:{field:"totalTime",title:"TotalTime","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",[t._v(t._s(t.parseTotalTime(e.totalTime)))])]}}])}),t._l(t.contestProblems,(function(e){return s("vxe-table-column",{key:e.displayId,attrs:{"min-width":"80"},scopedSlots:t._u([{key:"header",fn:function(){return[s("span",[s("a",{staticClass:"emphasis",staticStyle:{color:"#495060"},on:{click:function(s){return t.getContestProblemById(e.displayId)}}},[t._v(t._s(e.displayId))])])]},proxy:!0},{key:"default",fn:function(a){return a=a.row,[a.submissionInfo[e.displayId]?s("span",[a.submissionInfo[e.displayId].isAC?s("span",[t._v(t._s(a.submissionInfo[e.displayId].ACTime)),s("br")]):t._e(),0!=a.submissionInfo[e.displayId].errorNum?s("span",[t._v("(-"+t._s(a.submissionInfo[e.displayId].errorNum)+")")]):t._e()]):t._e()]}}],null,!0)})}))],2)],1),s("Pagination",{attrs:{total:t.total,"page-size":t.limit,current:t.page},on:{"update:pageSize":function(e){t.limit=e},"update:page-size":function(e){t.limit=e},"update:current":function(e){t.page=e},"on-change":t.getContestRankData}})],1)}),[],!1,null,"e840692c",null).exports,D={name:"OIContestRank",components:{Pagination:mt},mixins:[w],data:function(){return{total:0,page:1,limit:10,contestID:"",dataRank:[],autoRefresh:!1,options:{title:{text:"Top 10 Teams",left:"center"},tooltip:{trigger:"axis"},toolbox:{show:!0,feature:{dataView:{show:!0,readOnly:!0},magicType:{show:!0,type:["line","bar"]},saveAsImage:{show:!0}},right:"10%",top:"5%"},calculable:!0,xAxis:[{type:"category",data:["root"],boundaryGap:!0,axisLabel:{interval:0,showMinLabel:!0,showMaxLabel:!0,align:"center",formatter:function(t,e){return at.breakLongWords(t,14)}},axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],grid:{left:"11%"},series:[{name:"Score",type:"bar",barMaxWidth:"80",data:[0],markPoint:{data:[{type:"max",name:"max"}]}}]}}},mounted:function(){this.contestID=this.$route.params.contestID,this.getContestRankData(1)},methods:Object(o.a)(Object(o.a)({},Object(r.mapActions)(["getContestProblems"])),{},{cellClassName:function(t){var e=t.row,s=(t.rowIndex,t.column);t=t.columnIndex;if("id"!==s.property&&"totalScore"!==s.property&&"username"!==s.property&&"realname"!==s.property)return this.isContestAdmin?e.cellClassName[[this.contestProblems[t-4].displayId]]:e.cellClassName[[this.contestProblems[t-3].displayId]]},getUserTotalSubmit:function(t){this.$router.push({name:"ContestSubmissionList",query:{username:t}})},getUserHomeByUsername:function(t,e){this.$router.push({name:"UserHome",query:{username:e,uid:t}})},getContestProblemById:function(t){this.$router.push({name:"ContestProblemDetails",params:{contestID:this.contestID,problemID:t}})},applyToChart:function(t){var e=[],s=[];t.forEach((function(t){e.push(t.username),s.push(t.totalScore)})),this.options.xAxis[0].data=e,this.options.series[0].data=s},applyToTable:function(t){var e=JSON.parse(JSON.stringify(t));e.forEach((function(t,s){var a=t.submissionInfo,i={};Object.keys(a).forEach((function(t){e[s][t]=a[t];var n=a[t];0==n?i[t]="oi-0":0<n&&n<100?i[t]="oi-between":100==n&&(i[t]="oi-100")})),e[s].cellClassName=i})),this.dataRank=e},downloadRankCSV:function(){at.downloadFile("/api/file/download-contest-rank?cid=".concat(this.$route.params.contestID,"&forceRefresh=").concat(!!this.forceUpdate))}})},s("0bb5"),ot={name:"contest-rank",components:{ACMContestRank:nt,OIContestRank:Object(v.a)(D,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-card",{attrs:{shadow:""}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title"},[t._v("Contest Rank")]),s("span",{staticStyle:{float:"right","font-size":"20px"}},[s("el-popover",{attrs:{trigger:"hover",placement:"left-start"}},[s("i",{staticClass:"el-icon-s-tools",attrs:{slot:"reference"},slot:"reference"}),s("div",{attrs:{id:"switches"}},[s("p",[s("span",[t._v("Chart")]),s("el-switch",{model:{value:t.showChart,callback:function(e){t.showChart=e},expression:"showChart"}})],1),s("p",[s("span",[t._v("Table")]),s("el-switch",{model:{value:t.showTable,callback:function(e){t.showTable=e},expression:"showTable"}})],1),s("p",[s("span",[t._v("Auto Refresh(10s)")]),s("el-switch",{attrs:{disabled:t.refreshDisabled},on:{change:t.handleAutoRefresh},model:{value:t.autoRefresh,callback:function(e){t.autoRefresh=e},expression:"autoRefresh"}})],1),t.isContestAdmin?[s("p",[s("span",[t._v("Force Update")]),s("el-switch",{attrs:{disabled:t.refreshDisabled},model:{value:t.forceUpdate,callback:function(e){t.forceUpdate=e},expression:"forceUpdate"}})],1)]:t._e(),[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.downloadRankCSV}},[t._v("Download as CSV")])]],2)])],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showChart,expression:"showChart"}],staticClass:"echarts"},[s("ECharts",{ref:"chart",attrs:{options:t.options,autoresize:!0}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showTable,expression:"showTable"}]},[s("vxe-table",{attrs:{round:"",border:"","auto-resize":"",size:"small",align:"center",data:t.dataRank,"cell-class-name":t.cellClassName,"seq-config":{startIndex:(this.page-1)*this.limit}}},[s("vxe-table-column",{attrs:{field:"id",type:"seq","min-width":"50",fixed:"left"}}),s("vxe-table-column",{attrs:{field:"username","min-width":"150",title:"User"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",[s("a",{staticStyle:{color:"rgb(87, 163, 243)"},on:{click:function(e){return t.getUserHomeByUsername(a.uid,a.username)}}},[t._v(t._s(a.username))])])]}}])}),t.isContestAdmin?s("vxe-table-column",{attrs:{field:"realname","min-width":"100",title:"RealName"}}):t._e(),s("vxe-table-column",{attrs:{field:"totalScore",title:"TotalScore","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",[s("a",{staticStyle:{color:"rgb(87, 163, 243)"},on:{click:function(e){return t.getUserTotalSubmit(a.username)}}},[t._v(t._s(a.totalScore))])])]}}])}),t._l(t.contestProblems,(function(e){return s("vxe-table-column",{key:e.displayId,attrs:{"min-width":"80"},scopedSlots:t._u([{key:"header",fn:function(){return[s("span",[s("a",{staticClass:"emphasis",on:{click:function(s){return t.getContestProblemById(e.displayId)}}},[t._v(t._s(e.displayId))])])]},proxy:!0},{key:"default",fn:function(a){return a=a.row,[a.submissionInfo[e.displayId]?s("span",[t._v(t._s(a.submissionInfo[e.displayId]))]):t._e()]}}],null,!0)})}))],2)],1),s("Pagination",{attrs:{total:t.total,"page-size":t.limit,current:t.page},on:{"update:pageSize":function(e){t.limit=e},"update:page-size":function(e){t.limit=e},"update:current":function(e){t.page=e},"on-change":t.getContestRankData}})],1)}),[],!1,null,"5e2bc136",null).exports,NullComponent:{name:"null-component",template:"<div></div>"}},beforeCreate:function(){0===this.$store.state.contest.contestProblems.length&&this.$store.dispatch("getContestProblems")},computed:Object(o.a)(Object(o.a)({},Object(r.mapGetters)(["contestRuleType"])),{},{currentView:function(){return null===this.contestRuleType?"NullComponent":this.contestRuleType===J.ACM?"ACMContestRank":"OIContestRank"}}),beforeRouteLeave:function(t,e,s){this.$store.commit("changeContestItemVisible",{menu:!0}),s()}},b=Object(v.a)(ot,(function(){var t=this.$createElement;t=this._self._c||t;return t("div",[t(this.currentView,{tag:"component"})],1)}),[],!1,null,null,null).exports,A={name:"ACM-Info-Admin",components:{Pagination:mt},data:function(){return{page:1,limit:30,total:0,btnLoading:!1,autoRefresh:!1,acInfoList:[]}},mounted:function(){this.contestID=this.$route.params.contestID,this.getACInfo(1)},methods:{getUserTotalSubmit:function(t){this.$router.push({name:"ContestSubmissionList",query:{username:t}})},getACInfo:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.btnLoading=!0,e={cid:this.$route.params.contestID,limit:this.limit,currentPage:e},Dt.getACMACInfo(e).then((function(e){t.btnLoading=!1,t.acInfoList=e.data.data.records,t.total=e.data.data.total})).catch((function(){t.btnLoading=!1}))},updateCheckedStatus:function(t){var e=this;t={id:t.id,checked:!t.checked,cid:t.cid};Dt.updateACInfoCheckedStatus(t).then((function(t){m.success(t.data.msg),e.getACInfo()})).catch((function(){}))},handleAutoRefresh:function(){var t=this;this.autoRefresh?this.refreshFunc=setInterval((function(){t.page=1,t.getACInfo()}),1e4):clearInterval(this.refreshFunc)}},computed:Object(o.a)({},Object(r.mapState)({contest:function(t){return t.contest.contest}})),beforeDestroy:function(){clearInterval(this.refreshFunc)}},s("8695"),w=Object(v.a)(A,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-card",{attrs:{shadow:"always"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title"},[t._v("AC Info")]),s("div",{staticClass:"filter-row"},[s("span",[t._v(" Auto Refresh(10s) "),s("el-switch",{on:{change:t.handleAutoRefresh},model:{value:t.autoRefresh,callback:function(e){t.autoRefresh=e},expression:"autoRefresh"}})],1),s("span",[s("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-refresh",loading:t.btnLoading},on:{click:function(e){return t.getACInfo(1)}}},[t._v("Refresh")])],1)])]),s("vxe-table",{attrs:{border:"inner",stripe:"","auto-resize":"",align:"center",data:t.acInfoList}},[s("vxe-table-column",{attrs:{field:"submitTime","min-width":"150",title:"AC Time"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[s("span",[t._v(t._s(t._f("localtime")(e.submitTime)))])]}}])}),s("vxe-table-column",{attrs:{field:"displayId",title:"Problem ID","min-width":"100"}}),s("vxe-table-column",{attrs:{field:"first_blood",title:"AC Status","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.firstBlood?s("el-tag",{attrs:{effect:"dark",color:"#ed3f14"}},[t._v("First Blood")]):s("el-tag",{attrs:{effect:"dark",color:"#19be6b"}},[t._v("Accepet")])]}}])}),s("vxe-table-column",{attrs:{field:"username",title:"Username","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",[s("a",{staticStyle:{color:"rgb(87, 163, 243)"},on:{click:function(e){return t.getUserTotalSubmit(a.username)}}},[t._v(t._s(a.username))])])]}}])}),s("vxe-table-column",{attrs:{field:"realname",title:"RealName","min-width":"150"}}),s("vxe-table-column",{attrs:{field:"checked",title:"Status","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.checked?s("el-tag",{attrs:{effect:"dark",color:"#19be6b"}},[t._v("Checked")]):s("el-tag",{attrs:{effect:"dark",color:"#f90"}},[t._v("Not Checked")])]}}])}),s("vxe-table-column",{attrs:{field:"option",title:"Option","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-check",round:""},on:{click:function(e){return t.updateCheckedStatus(a)}}},[t._v("Check It")])]}}])})],1),s("Pagination",{attrs:{total:t.total,"page-size":t.limit,current:t.page},on:{"update:pageSize":function(e){t.limit=e},"update:page-size":function(e){t.limit=e},"update:current":function(e){t.page=e},"on-change":t.getACInfo}})],1)}),[],!1,null,"2d4aea1a",null).exports,nt={props:{did:{type:Number,required:!1,default:null},cid:{type:Number,require:!1,default:null}},components:{Avatar:S.a},data:function(){return{replyInputComment:"",ownInputComment:"",showItemId:"",faceList:[],comments:[],commentLikeMap:{},facelistVisiable:!1,replyFacelistVisiable:!1,replyPlaceholder:"写下你的评论吧~",query:{limit:10,currentPage:1,cid:null,did:null},total:0,totalComment:0,replyObj:{commentId:0,content:"",toUid:"",toName:"",toAvatar:""}}},created:function(){var t,e=s("49c4");for(t in e)this.faceList.push(e[t])},mounted:function(){this.query.did=this.did,this.query.cid=this.cid,this.init()},computed:Object(o.a)(Object(o.a)({},Object(r.mapGetters)(["userInfo","isAuthenticated","isAdminRole"])),{},{avatar:function(){return this.$store.getters.userInfo.avatar}}),methods:{init:function(){var t=this,e=Object.assign({},this.query);Dt.getCommentList(e).then((function(e){for(var s=e.data.data.commentList.records,a=0;a<s.length;a++)t.totalComment+=1+s[a].totalReplyNum;t.comments=t.comments.concat(s),t.total=e.data.data.commentList.total,t.commentLikeMap=e.data.data.commentLikeMap,0<t.comments.length&&t.$nextTick((function(t){st()}))}))},likeClick:function(t){var e=this,s=1!=this.commentLikeMap[t.id];Dt.toLikeComment(t.id,s).then((function(a){s?(e.commentLikeMap[t.id]=!0,t.likeNum++):(t.likeNum--,e.commentLikeMap[t.id]=!1)}))},cancel:function(){this.showItemId=""},commitComment:function(){var t=this;if(!this.isAuthenticated)return m.warning("请先登录"),void this.$store.dispatch("changeModalStatus",{visible:!0});var e={content:this.ownInputComment,cid:this.cid,did:this.did};Dt.addComment(e).then((function(e){t.comments=[e.data.data].concat(t.comments),t.totalComment++,t.total++,m.success(e.data.msg),t.ownInputComment="",t.$nextTick((function(t){st()}))}))},commitReply:function(){var t=this;if(!this.isAuthenticated)return m.warning("请先登录"),void this.$store.dispatch("changeModalStatus",{visible:!0});this.replyObj.content=this.replyInputComment;var e=Object.assign({},this.replyObj);Dt.addReply(e).then((function(e){for(var s=0;s<t.comments.length;s++)if(t.comments[s].id==t.replyObj.commentId){t.comments[s].replyList=[e.data.data].concat(t.comments[s].replyList),t.comments[s].backupReplyList&&(t.comments[s].backupReplyList=[e.data.data].concat(t.comments[s].backupReplyList)),t.comments[s].totalReplyNum++,3<t.comments[s].totalReplyNum&&(t.comments[s].hadOpen=!0);break}t.$nextTick((function(t){st()})),t.totalComment++,m.success(e.data.msg),t.replyInputComment=""}))},showCommentInput:function(t,e){this.replyInputComment="",e?(this.replyPlaceholder="@"+e.fromName,this.replyObj.commentId=t.id,this.replyObj.toUid=e.fromUid,this.replyObj.toName=e.fromName,this.replyObj.toAvatar=e.fromAvatar):(this.replyPlaceholder="快来写下你的评论吧~",this.replyObj.commentId=t.id,this.replyObj.toUid=t.fromUid,this.replyObj.toName=t.fromName,this.replyObj.toAvatar=t.fromAvatar),this.showItemId=t.id},deleteComment:function(t,e){var s=this;this.$confirm("此操作将删除该评论及其所有回复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={id:t.id,fromUid:t.fromUid};Dt.deleteComment(a).then((function(a){s.totalComment--,s.total--,s.totalComment-=t.replyList.length,s.comments.splice(e,1),m.success(a.data.msg)}))})).catch((function(){}))},deleteReply:function(t,e,s){var a=this;this.$confirm("此操作将删除该回复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i={id:t.id,fromUid:t.fromUid};Dt.deleteReply(i).then((function(t){m.success(t.data.msg),a.comments[e].backupReplyList?(a.comments[e].backupReplyList.splice(s,1),3<a.comments[e].backupReplyList.length?a.comments[e].replyList=a.comments[e].backupReplyList.slice(0,3):a.comments[e].replyList=a.comments[e].backupReplyList,a.comments[e].totalReplyNum--,a.totalComment--):Dt.getAllReply(a.comments[e].id).then((function(t){a.comments[e].backupReplyList=t.data.data,t.data.data&&3<t.data.data.length?a.comments[e].replyList=t.data.data.slice(0,3):a.comments[e].replyList=t.data.data,a.totalComment+=t.data.data.length-a.comments[e].totalReplyNum,a.comments[e].totalReplyNum=t.data.data.length}))}))})).catch((function(){}))},getEmo:function(t,e){var s,a,i;s=e?document.getElementById("own-textarea"):document.getElementById("reply-textarea"),a=s,i=this.faceList[t],window.getSelection?(s.setRangeText(i),s.selectionStart+=i.length,s.focus()):document.selection&&(a.focus(),document.selection.createRange().text=i),e?(this.ownInputComment=s.value,this.facelistVisiable=!1):(this.replyInputComment=s.value,this.replyFacelistVisiable=!1)},addContentTips:function(t,e){var s="";switch(t){case 0:s="`your inline code...`";break;case 1:s="\n```\ncode block\n```\n";break;case 2:s="[HOJ](https://hcode.top)";break;case 3:s="\n- 无序列表";break;case 4:s="\n1. 有序列表"}e?this.replyInputComment+=s:this.ownInputComment+=s},mdToHtml:function(t){return this.$markDown.render(t)},getInfoByUsername:function(t,e){this.$router.push({path:"/user-home",query:{uid:t,username:e}})},showAllReply:function(t){var e=this;t.backupReplyList?(t.replyList=t.backupReplyList,t.hadOpen=!0):Dt.getAllReply(t.id).then((function(s){t.replyList=s.data.data,t.backupReplyList=s.data.data,t.hadOpen=!0,e.totalComment+=s.data.data.length-t.totalReplyNum,t.totalReplyNum=s.data.data.length}))},pickWayReply:function(t){for(var e=[],s=0;s<3;s++)e.push(t.replyList[s]);t.replyList=e,t.hadOpen=!1},loadMoreComment:function(){this.query.currentPage+=1,this.init()}}},Object(gt.a)(nt,"computed",Object(o.a)(Object(o.a)({},Object(r.mapGetters)(["isAuthenticated","userInfo","isAdminRole"])),{},{showloading:function(){return!(this.query.currentPage*this.query.limit>=this.total)}})),Object(gt.a)(nt,"watch",{isAuthenticated:function(t,e){t!=e&&(this.comments=[],this.init())}}),D=nt,s("cfc5"),s("0f8d"),ot=Object(v.a)(D,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container"},[s("div",{staticClass:"own-input"},[s("el-input",{attrs:{type:"textarea",rows:8,id:"own-textarea",placeholder:"快来写下你的评论吧~😘"},model:{value:t.ownInputComment,callback:function(e){t.ownInputComment=e},expression:"ownInputComment"}}),s("div",{staticClass:"input-bottom"},[s("span",{attrs:{title:"emoji表情"}},[s("el-popover",{attrs:{placement:"top-start",width:"300",trigger:"click"},model:{value:t.facelistVisiable,callback:function(e){t.facelistVisiable=e},expression:"facelistVisiable"}},[s("div",{staticClass:"emotionList"},t._l(t.faceList,(function(e,a){return s("a",{key:a,staticClass:"emotionItem",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.getEmo(a,!0)}}},[t._v(t._s(e))])})),0),s("i",{staticClass:"fa fa-smile-o emotionSelect",attrs:{slot:"reference"},slot:"reference"})])],1),s("span",{staticClass:"markdown-key",attrs:{title:"行内代码"},on:{click:function(e){return t.addContentTips(0,!1)}}},[s("svg",{staticClass:"css-1rhb60f-Svg ea8ky5j0",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M5.5 5h1.866a.5.5 0 01.486.617l-.96 4a.5.5 0 01-.486.383H5.5a.5.5 0 01-.5-.5v-4a.5.5 0 01.5-.5zm8 0h1.866a.5.5 0 01.486.617l-.96 4a.5.5 0 01-.486.383H13.5a.5.5 0 01-.5-.5v-4a.5.5 0 01.5-.5z","clip-rule":"evenodd"}})])]),s("span",{staticClass:"markdown-key",attrs:{title:"代码块"},on:{click:function(e){return t.addContentTips(1,!1)}}},[s("svg",{staticClass:"css-1rhb60f-Svg ea8ky5j0",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M3.64 10.98c.147 0 .312-.022.495-.066.183-.044.348-.12.495-.23.147-.11.271-.269.374-.474.103-.205.154-.462.154-.77V5.084c0-.499.077-.928.231-1.287.154-.36.363-.66.627-.902s.565-.422.902-.539c.337-.117.69-.176 1.056-.176H9.58v1.848H8.37c-.425 0-.693.14-.803.418-.11.279-.165.58-.165.902v4.136c0 .425-.08.788-.242 1.09-.161.3-.352.545-.572.736-.22.19-.455.337-.704.44-.25.103-.462.161-.638.176v.044c.176.015.389.062.638.143.25.08.484.216.704.407.22.19.41.447.572.77.161.323.242.74.242 1.254v4.004c0 .323.055.623.165.902.11.279.378.418.803.418h1.21v1.848H7.974c-.367 0-.719-.059-1.056-.176a2.573 2.573 0 01-.902-.539 2.586 2.586 0 01-.627-.902c-.154-.36-.231-.788-.231-1.287V14.61c0-.352-.051-.638-.154-.858a1.494 1.494 0 00-.374-.517 1.18 1.18 0 00-.495-.253 2.143 2.143 0 00-.495-.066V10.98zm16.72 2.04c-.161 0-.33.022-.506.066a1.184 1.184 0 00-.484.253 1.494 1.494 0 00-.374.517c-.103.22-.154.506-.154.858v4.202c0 .499-.077.928-.231 1.287-.154.36-.363.66-.627.902a2.573 2.573 0 01-.902.54c-.337.116-.69.175-1.056.175H14.42v-1.848h1.21c.425 0 .693-.14.803-.418.11-.279.165-.58.165-.902v-4.004c0-.513.08-.931.242-1.254.161-.323.352-.58.572-.77.22-.19.455-.326.704-.407.25-.08.462-.128.638-.143v-.044a2.225 2.225 0 01-.638-.176 2.567 2.567 0 01-.704-.44c-.22-.19-.41-.436-.572-.737-.161-.3-.242-.664-.242-1.089V5.452c0-.323-.055-.623-.165-.902-.11-.279-.378-.418-.803-.418h-1.21V2.284h1.606c.367 0 .719.059 1.056.176.337.117.638.297.902.539.264.242.473.543.627.902.154.36.231.788.231 1.287v4.356c0 .308.051.565.154.77.103.205.227.363.374.473.147.11.308.187.484.231.176.044.345.066.506.066v1.936z","clip-rule":"evenodd"}})])]),s("span",{staticClass:"markdown-key",attrs:{title:"链接"},on:{click:function(e){return t.addContentTips(2,!1)}}},[s("svg",{staticClass:"css-1rhb60f-Svg ea8ky5j0",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M13 7a1 1 0 011-1h2a6 6 0 010 12h-2a1 1 0 110-2h2a4 4 0 000-8h-2a1 1 0 01-1-1zm-3 10a1 1 0 01-1 1H8A6 6 0 018 6h1a1 1 0 010 2H8a4 4 0 100 8h1a1 1 0 011 1zm-1-6h6a1 1 0 110 2H9a1 1 0 110-2z","clip-rule":"evenodd"}})])]),s("span",{staticClass:"markdown-key",attrs:{title:"无序列表"},on:{click:function(e){return t.addContentTips(3,!1)}}},[s("svg",{staticClass:"css-1rhb60f-Svg ea8ky5j0",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M8 7a1 1 0 110-2h13a1 1 0 110 2H8zm0 6a1 1 0 110-2h13a1 1 0 110 2H8zm0 6a1 1 0 110-2h13a1 1 0 110 2H8zM2.952 6.85a1.201 1.201 0 111.698-1.7 1.201 1.201 0 01-1.698 1.7zm0 6a1.201 1.201 0 111.698-1.7 1.201 1.201 0 01-1.698 1.7zm0 6a1.201 1.201 0 111.698-1.7 1.201 1.201 0 01-1.698 1.7z","clip-rule":"evenodd"}})])]),s("span",{staticClass:"markdown-key",attrs:{title:"有序列表"},on:{click:function(e){return t.addContentTips(4,!1)}}},[s("svg",{staticClass:"css-1rhb60f-Svg ea8ky5j0",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M7 6a1 1 0 011-1h13a1 1 0 110 2H8a1 1 0 01-1-1zm1 13a1 1 0 110-2h13a1 1 0 010 2H8zm0-6a1 1 0 110-2h13a1 1 0 010 2H8zM2.756 4.98l.236-1.18h2.22l-.92 4.6h-1.38l.684-3.42h-.84zm2.823 8.3l-.235 1.192H1.756l.174-.87.073-.117 1.911-1.498c.219-.178.368-.324.445-.434a.49.49 0 00.099-.287.208.208 0 00-.083-.18c-.067-.052-.176-.082-.335-.082a.897.897 0 00-.398.094 1.02 1.02 0 00-.342.272l-.12.144-.968-.702.118-.162c.193-.264.456-.473.786-.625.327-.15.684-.225 1.068-.225.318 0 .602.053.85.16.255.11.456.267.6.47.146.206.22.44.22.698 0 .298-.083.58-.247.839-.158.25-.424.518-.797.807l-.653.506h1.422zm-3.063 3.7l.245-1.18h3.345l-.166.867-.06.11-.93.869a1.205 1.205 0 01.737 1.144c-.001.327-.098.622-.29.881a1.856 1.856 0 01-.774.593c-.322.139-.685.208-1.087.208-.328 0-.636-.045-.924-.135a2.06 2.06 0 01-.743-.4l-.132-.114.688-1.05.173.147c.12.103.267.185.442.245.177.06.364.091.562.091.251 0 .435-.044.554-.124a.31.31 0 00.146-.282c0-.086-.025-.135-.08-.171-.076-.05-.213-.079-.41-.079h-.687l.173-.88.06-.108.674-.632H2.516z","clip-rule":"evenodd"}})])]),s("span",{staticClass:"own-btn-comment"},[s("el-button",{staticClass:"btn",attrs:{type:"primary",round:""},on:{click:t.commitComment}},[s("i",{staticClass:"el-icon-edit"},[t._v(" 提交评论")])])],1)])],1),s("h3",{staticClass:"comment-total"},[s("div",{staticClass:"text"},[s("span",[t._v("全部评论")]),s("span",{staticClass:"number"},[t._v(t._s(t.totalComment))])])]),t._l(t.comments,(function(e,a){return s("div",{key:a,staticClass:"comment",attrs:{id:"commentbox"}},[s("div",{staticClass:"info"},[s("span",{staticClass:"user-info",on:{click:function(s){return t.getInfoByUsername(e.fromUid,e.fromName)}}},[s("avatar",{attrs:{username:e.fromName,inline:!0,size:38,color:"#FFF",src:e.fromAvatar,title:e.fromName}})],1),s("div",{staticClass:"right"},[s("div",{staticClass:"name"},[s("span",{staticClass:"user-info",staticStyle:{"margin-right":"3px"},attrs:{title:e.fromName},on:{click:function(s){return t.getInfoByUsername(e.fromUid,e.fromName)}}},[t._v(t._s(e.fromName))]),"root"==e.fromRole?s("span",{staticClass:"role-root role",attrs:{title:"Super Administrator"}},[t._v("SPA")]):t._e(),"admin"==e.fromRole?s("span",{staticClass:"role-admin role",attrs:{title:"Administrator"}},[t._v("ADM")]):t._e()]),s("div",{staticClass:"date"},[s("el-tooltip",{attrs:{content:t._f("localtime")(e.gmtCreate),placement:"top"}},[s("span",[t._v(t._s(t._f("fromNow")(e.gmtCreate)))])])],1)])]),s("div",{staticClass:"info-bottom"},[s("div",{directives:[{name:"katex",rawName:"v-katex"},{name:"highlight",rawName:"v-highlight"}],staticClass:"content markdown-content markdown-body",domProps:{innerHTML:t._s(t.mdToHtml(e.content))}}),s("div",{staticClass:"control"},[s("span",{staticClass:"like",class:{active:1==t.commentLikeMap[e.id]},on:{click:function(s){return t.likeClick(e)}}},[s("i",{staticClass:"iconfont fa fa-thumbs-o-up"}),s("span",{staticClass:"like-num"},[t._v(t._s(0<e.likeNum?e.likeNum+"人赞":"赞"))])]),s("span",{staticClass:"comment-opt comment-reply",on:{click:function(s){return t.showCommentInput(e)}}},[s("i",{staticClass:"iconfont el-icon-chat-square"}),s("span",[t._v("回复")])]),e.fromUid==t.userInfo.uid||t.isAdminRole?s("span",{staticClass:"comment-opt comment-delete",on:{click:function(s){return t.deleteComment(e,a)}}},[s("i",{staticClass:"iconfont el-icon-delete"}),s("span",[t._v("删除")])]):t._e()]),s("div",{staticClass:"reply"},[t._l(e.replyList,(function(i,n){return s("div",{key:n,staticClass:"item"},[s("div",{staticClass:"reply-content"},[s("span",{staticClass:"from-name",attrs:{title:i.fromName},on:{click:function(e){return t.getInfoByUsername(i.fromUid,i.fromName)}}},[s("avatar",{staticClass:"user-avatar",attrs:{username:i.fromName,inline:!0,size:25,color:"#FFF",src:i.fromAvatar}}),t._v(" "+t._s(i.fromName)+" ")],1),"root"==i.fromRole?s("span",{staticClass:"role-root role",attrs:{title:"Super Administrator"}},[t._v("SPA")]):t._e(),"admin"==i.fromRole?s("span",{staticClass:"role-admin role",attrs:{title:"Administrator"}},[t._v("ADM")]):t._e(),s("span",{staticClass:"reply-text"},[t._v("回复")]),s("span",{staticClass:"to-name",attrs:{title:i.toName},on:{click:function(e){return t.getInfoByUsername(i.toUid,i.toName)}}},[t._v("@"+t._s(i.toName))])]),s("div",{staticStyle:{padding:"8px 0","margin-left":"34px"}},[s("span",{directives:[{name:"katex",rawName:"v-katex"},{name:"highlight",rawName:"v-highlight"}],staticClass:"markdown-content markdown-body",domProps:{innerHTML:t._s(t.mdToHtml(i.content))}})]),s("div",{staticClass:"reply-bottom"},[s("el-tooltip",{attrs:{content:t._f("localtime")(i.gmtCreate),placement:"top"}},[s("span",[t._v(t._s(t._f("fromNow")(i.gmtCreate)))])]),s("span",{staticClass:"reply-opt reply-text",on:{click:function(s){return t.showCommentInput(e,i)}}},[s("i",{staticClass:"iconfont el-icon-chat-square"}),s("span",[t._v("回复")])]),i.fromUid==t.userInfo.uid||t.isAdminRole?s("span",{staticClass:"reply-opt reply-delete",on:{click:function(e){return t.deleteReply(i,a,n)}}},[s("i",{staticClass:"iconfont el-icon-delete"}),s("span",[t._v("删除")])]):t._e()],1)])})),3<e.totalReplyNum?s("div",{staticClass:"view-more item"},[t._v(" 共"),s("b",[t._v(t._s(e.totalReplyNum))]),t._v("条回复, "),e.hadOpen?s("a",{staticClass:"btn-more",on:{click:function(s){return t.pickWayReply(e)}}},[t._v("收起")]):s("a",{staticClass:"btn-more",on:{click:function(s){return t.showAllReply(e)}}},[t._v("点击查看全部")])]):t._e(),s("transition",{attrs:{name:"fade"}},[t.showItemId===e.id?s("div",{staticClass:"input-wrapper"},[s("el-input",{attrs:{type:"textarea",rows:5,autofocus:"",id:"reply-textarea",placeholder:t.replyPlaceholder},model:{value:t.replyInputComment,callback:function(e){t.replyInputComment=e},expression:"replyInputComment"}}),s("div",{staticClass:"input-bottom"},[s("span",{attrs:{title:"emoji表情"}},[s("el-popover",{attrs:{placement:"top-start",width:"300",trigger:"click"},model:{value:t.replyFacelistVisiable,callback:function(e){t.replyFacelistVisiable=e},expression:"replyFacelistVisiable"}},[s("div",{staticClass:"emotionList"},t._l(t.faceList,(function(e,a){return s("a",{key:a,staticClass:"emotionItem",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.getEmo(a,!1)}}},[t._v(t._s(e))])})),0),s("i",{staticClass:"fa fa-smile-o emotionSelect",attrs:{slot:"reference"},slot:"reference"})])],1),s("span",{staticClass:"markdown-key",attrs:{title:"行内代码"},on:{click:function(e){return t.addContentTips(0,!0)}}},[s("svg",{staticClass:"css-1rhb60f-Svg ea8ky5j0",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M5.5 5h1.866a.5.5 0 01.486.617l-.96 4a.5.5 0 01-.486.383H5.5a.5.5 0 01-.5-.5v-4a.5.5 0 01.5-.5zm8 0h1.866a.5.5 0 01.486.617l-.96 4a.5.5 0 01-.486.383H13.5a.5.5 0 01-.5-.5v-4a.5.5 0 01.5-.5z","clip-rule":"evenodd"}})])]),s("span",{staticClass:"markdown-key",attrs:{title:"代码块"},on:{click:function(e){return t.addContentTips(1,!0)}}},[s("svg",{staticClass:"css-1rhb60f-Svg ea8ky5j0",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M3.64 10.98c.147 0 .312-.022.495-.066.183-.044.348-.12.495-.23.147-.11.271-.269.374-.474.103-.205.154-.462.154-.77V5.084c0-.499.077-.928.231-1.287.154-.36.363-.66.627-.902s.565-.422.902-.539c.337-.117.69-.176 1.056-.176H9.58v1.848H8.37c-.425 0-.693.14-.803.418-.11.279-.165.58-.165.902v4.136c0 .425-.08.788-.242 1.09-.161.3-.352.545-.572.736-.22.19-.455.337-.704.44-.25.103-.462.161-.638.176v.044c.176.015.389.062.638.143.25.08.484.216.704.407.22.19.41.447.572.77.161.323.242.74.242 1.254v4.004c0 .323.055.623.165.902.11.279.378.418.803.418h1.21v1.848H7.974c-.367 0-.719-.059-1.056-.176a2.573 2.573 0 01-.902-.539 2.586 2.586 0 01-.627-.902c-.154-.36-.231-.788-.231-1.287V14.61c0-.352-.051-.638-.154-.858a1.494 1.494 0 00-.374-.517 1.18 1.18 0 00-.495-.253 2.143 2.143 0 00-.495-.066V10.98zm16.72 2.04c-.161 0-.33.022-.506.066a1.184 1.184 0 00-.484.253 1.494 1.494 0 00-.374.517c-.103.22-.154.506-.154.858v4.202c0 .499-.077.928-.231 1.287-.154.36-.363.66-.627.902a2.573 2.573 0 01-.902.54c-.337.116-.69.175-1.056.175H14.42v-1.848h1.21c.425 0 .693-.14.803-.418.11-.279.165-.58.165-.902v-4.004c0-.513.08-.931.242-1.254.161-.323.352-.58.572-.77.22-.19.455-.326.704-.407.25-.08.462-.128.638-.143v-.044a2.225 2.225 0 01-.638-.176 2.567 2.567 0 01-.704-.44c-.22-.19-.41-.436-.572-.737-.161-.3-.242-.664-.242-1.089V5.452c0-.323-.055-.623-.165-.902-.11-.279-.378-.418-.803-.418h-1.21V2.284h1.606c.367 0 .719.059 1.056.176.337.117.638.297.902.539.264.242.473.543.627.902.154.36.231.788.231 1.287v4.356c0 .308.051.565.154.77.103.205.227.363.374.473.147.11.308.187.484.231.176.044.345.066.506.066v1.936z","clip-rule":"evenodd"}})])]),s("span",{staticClass:"markdown-key",attrs:{title:"链接"},on:{click:function(e){return t.addContentTips(2,!0)}}},[s("svg",{staticClass:"css-1rhb60f-Svg ea8ky5j0",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M13 7a1 1 0 011-1h2a6 6 0 010 12h-2a1 1 0 110-2h2a4 4 0 000-8h-2a1 1 0 01-1-1zm-3 10a1 1 0 01-1 1H8A6 6 0 018 6h1a1 1 0 010 2H8a4 4 0 100 8h1a1 1 0 011 1zm-1-6h6a1 1 0 110 2H9a1 1 0 110-2z","clip-rule":"evenodd"}})])]),s("span",{staticClass:"markdown-key",attrs:{title:"无序列表"},on:{click:function(e){return t.addContentTips(3,!0)}}},[s("svg",{staticClass:"css-1rhb60f-Svg ea8ky5j0",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M8 7a1 1 0 110-2h13a1 1 0 110 2H8zm0 6a1 1 0 110-2h13a1 1 0 110 2H8zm0 6a1 1 0 110-2h13a1 1 0 110 2H8zM2.952 6.85a1.201 1.201 0 111.698-1.7 1.201 1.201 0 01-1.698 1.7zm0 6a1.201 1.201 0 111.698-1.7 1.201 1.201 0 01-1.698 1.7zm0 6a1.201 1.201 0 111.698-1.7 1.201 1.201 0 01-1.698 1.7z","clip-rule":"evenodd"}})])]),s("span",{staticClass:"markdown-key",attrs:{title:"有序列表"},on:{click:function(e){return t.addContentTips(4,!0)}}},[s("svg",{staticClass:"css-1rhb60f-Svg ea8ky5j0",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M7 6a1 1 0 011-1h13a1 1 0 110 2H8a1 1 0 01-1-1zm1 13a1 1 0 110-2h13a1 1 0 010 2H8zm0-6a1 1 0 110-2h13a1 1 0 010 2H8zM2.756 4.98l.236-1.18h2.22l-.92 4.6h-1.38l.684-3.42h-.84zm2.823 8.3l-.235 1.192H1.756l.174-.87.073-.117 1.911-1.498c.219-.178.368-.324.445-.434a.49.49 0 00.099-.287.208.208 0 00-.083-.18c-.067-.052-.176-.082-.335-.082a.897.897 0 00-.398.094 1.02 1.02 0 00-.342.272l-.12.144-.968-.702.118-.162c.193-.264.456-.473.786-.625.327-.15.684-.225 1.068-.225.318 0 .602.053.85.16.255.11.456.267.6.47.146.206.22.44.22.698 0 .298-.083.58-.247.839-.158.25-.424.518-.797.807l-.653.506h1.422zm-3.063 3.7l.245-1.18h3.345l-.166.867-.06.11-.93.869a1.205 1.205 0 01.737 1.144c-.001.327-.098.622-.29.881a1.856 1.856 0 01-.774.593c-.322.139-.685.208-1.087.208-.328 0-.636-.045-.924-.135a2.06 2.06 0 01-.743-.4l-.132-.114.688-1.05.173.147c.12.103.267.185.442.245.177.06.364.091.562.091.251 0 .435-.044.554-.124a.31.31 0 00.146-.282c0-.086-.025-.135-.08-.171-.076-.05-.213-.079-.41-.079h-.687l.173-.88.06-.108.674-.632H2.516z","clip-rule":"evenodd"}})])]),s("span",{staticClass:"btn-control"},[s("el-button",{staticClass:"btn",attrs:{type:"danger",round:"",size:"small"},on:{click:t.cancel}},[t._v("取消")]),s("el-button",{staticClass:"btn",attrs:{type:"primary",round:"",size:"small"},on:{click:function(s){return t.commitReply(e.id)}}},[t._v("发送")])],1)])],1):t._e()])],2)])])}))],2),t.showloading?s("div",{staticClass:"container loading-text"},[s("a",{staticStyle:{background:"#fff",padding:"10px"},on:{click:t.loadMoreComment}},[s("span",[t._v("加载更多...")])])]):t._e()])}),[],!1,null,"5354de57",null).exports,A={name:"ContestComment",components:{comment:ot}},nt=Object(v.a)(A,(function(){var t=this.$createElement;return(this._self._c||t)("comment",{attrs:{cid:this.$route.params.contestID}})}),[],!1,null,null,null).exports,D={name:"Contest-Rejudge-Admin",data:function(){return{btnLoading:!1}},mounted:function(){this.contestID=this.$route.params.contestID,0==this.contestProblems.length&&this.getContestProblems()},methods:Object(o.a)(Object(o.a)({},Object(r.mapActions)(["getContestProblems"])),{},{rejudgeProblem:function(t){var e=this;this.$confirm("你是否确定将该题的所有提交全部重判？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var s={pid:t.pid,cid:t.cid};e.btnLoading=!0,Dt.ContestRejudgeProblem(s).then((function(t){m.success(t.data.msg),e.btnLoading=!1})).catch((function(){e.btnLoading=!1}))}))}}),computed:Object(o.a)({},Object(r.mapState)({contest:function(t){return t.contest.contest},contestProblems:function(t){return t.contest.contestProblems}}))},A=Object(v.a)(D,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-card",{attrs:{shadow:"always"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title"},[t._v("Admin Contest Rejudge")])]),s("vxe-table",{attrs:{border:"inner",stripe:"","auto-resize":"",align:"center",data:t.contestProblems}},[s("vxe-table-column",{attrs:{field:"pid","min-width":"50",title:"Problem ID"}}),s("vxe-table-column",{attrs:{field:"displayId",title:"Display ID","min-width":"100"}}),s("vxe-table-column",{attrs:{field:"displayTitle",title:"Title","min-width":"200"}}),s("vxe-table-column",{attrs:{field:"ac",title:"AC","min-width":"80"}}),s("vxe-table-column",{attrs:{field:"total",title:"Total","min-width":"80"}}),s("vxe-table-column",{attrs:{field:"option",title:"Option","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("el-button",{attrs:{type:"primary",size:"small",loading:t.btnLoading,icon:"el-icon-refresh-right",round:""},on:{click:function(e){return t.rejudgeProblem(a)}}},[t._v("Rejudge All")])]}}])})],1)],1)}),[],!1,null,"72d610b6",null).exports,D={components:{Avatar:S.a,Editor:ct,Pagination:mt},data:function(){return{total:0,limit:15,currentPage:1,showEditDiscussionDialog:!1,discussion:{id:null,pid:null,title:"",content:"",description:"",categoryId:"",topPriority:!1,uid:"",author:"",avatar:""},backupDiscussion:{},discussionDialogTitle:"Edit Discussion",discussionList:[],categoryList:[],cidMapName:{},currentCategory:"",query:{keyword:"",cid:"",currentPage:1,limit:15,pid:"",onlyMine:!1},routeName:""}},mounted:function(){var t=this;Dt.getCategoryList().then((function(e){t.categoryList=e.data.data;for(var s=0;s<t.categoryList.length;s++)t.cidMapName[t.categoryList[s].id]=t.categoryList[s].name;t.init()}))},methods:Object(o.a)(Object(o.a)({},Object(r.mapActions)(["changeDomTitle"])),{},{init:function(){this.routeName=this.$route.name;var t=this.$route.query;this.query.currentPage=parseInt(t.currentPage)||1,this.query.currentPage<1&&(this.query.currentPage=1),this.query.keyword=t.keyword||"",this.query.cid=t.cid||"",this.query.pid=this.$route.params.problemID||"",this.query.onlyMine=t.onlyMine+""=="true",this.query.cid?this.currentCategory=this.cidMapName[this.query.cid]:this.currentCategory="",this.query.pid?(this.discussion.pid=this.query.pid,this.changeDomTitle({title:this.query.pid+" Discussion"})):this.discussion.pid=null,this.getDiscussionList()},getDiscussionList:function(){var t=this,e=Object.assign({},this.query);Dt.getDiscussionList(this.limit,e).then((function(e){t.total=e.data.data.total,t.discussionList=e.data.data.records}))},getInfoByUsername:function(t,e){this.$router.push({path:"/user-home",query:{uid:t,username:e}})},toEditDiscussion:function(){this.isAuthenticated?(this.discussionDialogTitle="Create Discussion",this.showEditDiscussionDialog=!0,this.backupDiscussion?this.discussion=this.backupDiscussion:this.discussion={id:null,pid:null,title:"",content:"",description:"",categoryId:"",topPriority:!1,uid:"",author:"",avatar:""}):(m.warning("请先登录"),this.$store.dispatch("changeModalStatus",{visible:!0}))},handleQueryChange:function(){this.pushRouter(this.query,{problemID:this.query.pid},this.routeName)},toDiscussionDetail:function(t){this.$router.push({name:"DiscussionDetail",params:{discussionID:t}})},toAllDiscussion:function(){this.$router.push({path:"/discussion"})},toOnlyMyDiscussion:function(t){this.$router.push({path:this.$route.path,query:{onlyMine:t}})},pushRouter:function(t,e,s){this.$router.push({name:s,query:t,params:e})},onOpenEditDialog:function(){setTimeout((function(){var t;document.createEvent?((t=document.createEvent("HTMLEvents")).initEvent("resize",!0,!0),window.dispatchEvent(t)):document.createEventObject&&window.fireEvent("onresize")}),0)},submitDiscussion:function(){var t=this,e=Object.assign({},this.discussion);"Create Discussion"==this.discussionDialogTitle?(e.pid&&(e.title="["+e.pid+"] "+e.title),Dt.addDiscussion(e).then((function(e){m.success(e.data.msg),t.showEditDiscussionDialog=!1,t.init()}))):Dt.updateDiscussion(e).then((function(e){m.success(e.data.msg),t.showEditDiscussionDialog=!1,t.init()}))},handleCommand:function(t){var e=this,s=t.split(":");switch(s[0]){case"edit":this.discussionDialogTitle="Edit Discussion",this.discussion=Object.assign({},this.discussionList[parseInt(s[1])]),this.showEditDiscussionDialog=!0;break;case"delete":this.$confirm("此操作将删除该讨论包括关联的评论与回复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Dt.deleteDiscussion(e.discussionList[parseInt(s[1])].id).then((function(t){m.success(t.data.msg),e.init()}))}))}}}),watch:{$route:function(t,e){t!=e&&this.init()},discussion:function(t,e){"Create Discussion"==this.discussionDialogTitle&&t!=e&&(this.backupDiscussion=this.discussion)}},computed:Object(o.a)({},Object(r.mapGetters)(["isAuthenticated","userInfo","isAdminRole"]))},s("770c"),s("1f01"),mt=Object(v.a)(D,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{md:18,xs:24}},[s("div",{staticClass:"discussion-header"},[s("span",{staticStyle:{padding:"16px",float:"left"}},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t.currentCategory?[s("el-breadcrumb-item",{attrs:{to:{name:t.routeName,query:null}}},[t._v(" "+t._s(t.query.onlyMine?"我的":"")+"全部")]),s("el-breadcrumb-item",[t._v(t._s(t.currentCategory)+" ( "+t._s(t.total)+" )")])]:[s("el-breadcrumb-item",{attrs:{to:{name:t.routeName}}},[t._v(t._s(t.query.onlyMine?"我的":"")+"全部 ( "+t._s(t.total)+" )")])]],2)],1),s("span",{staticClass:"search"},[s("vxe-input",{attrs:{placeholder:"Enter the keyword",type:"search"},on:{"search-click":t.handleQueryChange},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQueryChange(e)}},model:{value:t.query.keyword,callback:function(e){t.$set(t.query,"keyword",e)},expression:"query.keyword"}})],1)]),t._l(t.discussionList,(function(e,a){return s("div",{key:a,staticClass:"title-article"},[s("el-card",{staticClass:"list-card",attrs:{shadow:"hover"}},[e.topPriority?s("span",{staticClass:"svg-top"},[s("svg",{staticClass:"icon",attrs:{t:"1620283436433",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"10095",width:"48",height:"48"}},[s("path",{attrs:{d:"M989.9222626666667 444.3410103333334L580.1490096666668 34.909091333333336H119.41107066666666l870.511192 870.596525V444.3410103333334z",fill:"#F44336","p-id":"10096"}}),s("path",{attrs:{d:"M621.3675956666667 219.39846433333332l-43.832889-43.770828-126.663111 126.841535-32.826182-32.780929 126.663112-126.841535-43.734627-43.673859 26.739071-26.775273 120.396283 120.224324-26.741657 26.776565zM582.6055756666667 284.67587833333334c24.030384-24.065293 50.614303-36.636444 79.751758-37.71604 29.134869-1.07701 55.240404 9.903838 78.31402 32.945131 21.950061 21.91903 32.323232 46.86998 31.120808 74.851556s-13.257697 53.441939-36.167111 76.383677c-23.901091 23.934707-50.254869 36.406303-79.057455 37.41608-28.806465 1.012364-54.481455-9.739636-77.024969-32.252121-22.016-21.98497-32.689131-47.067798-32.014223-75.244606 0.672323-28.179394 12.365576-53.638465 35.077172-76.383677z m36.196849 32.57794c-14.921697 14.943677-23.517091 30.756202-25.783596 47.438869-2.269091 16.68396 2.880646 31.297939 15.441454 43.841939 12.825859 12.807758 27.34804 18.234182 43.566546 16.271515 16.217212-1.960081 31.985778-10.608485 47.303111-25.947798 15.976727-15.998707 25.133253-32.109899 27.46699-48.332283 2.333737-16.221091-2.813414-30.637253-15.441455-43.247192-12.827152-12.809051-27.67903-18.133333-44.558222-15.972848-16.879192 2.157899-32.877899 10.808889-47.994828 25.947798zM780.1276766666667 524.3048083333333l-53.476848 53.553131-32.726627-32.681374 153.400889-153.616808 52.858829 52.783839c38.213818 38.159515 41.146182 73.44097 8.79709 105.83402-15.71297 15.737535-34.076444 22.586182-55.086545 20.552404-21.012687-2.032485-39.97996-11.897535-56.905697-29.591273l-16.861091-16.833939z m74.572283-74.67701l-49.516606 49.586424 14.182141 14.161454c19.240081 19.211636 37.209212 20.455434 53.913859 3.728809 16.305131-16.329697 14.941091-34.002747-4.101172-53.016566L854.6999596666667 449.6277983333334z",fill:"#FFFFFF","p-id":"10097"}})])]):t._e(),s("a",{staticClass:"article-hlink",on:{click:function(s){return t.toDiscussionDetail(e.id)}}},[s("h1",[t._v(" "+t._s(e.title)+" ")])]),s("a",{staticClass:"article-hlink2",on:{click:function(s){return t.toDiscussionDetail(e.id)}}},[s("p",[t._v(t._s(e.description))])]),s("div",{staticClass:"title-msg"},[s("span",[s("a",{attrs:{title:e.author},on:{click:function(s){return t.getInfoByUsername(e.uid,e.author)}}},[s("avatar",{staticClass:"user-avatar",attrs:{username:e.author,inline:!0,size:24,color:"#FFF",src:e.avatar}}),s("span",{staticClass:"pl"},[t._v(t._s(e.author))])],1),"root"==e.role?s("span",{staticClass:"role-root role",attrs:{title:"Super Administrator"}},[t._v("SPA")]):t._e(),"admin"==e.role?s("span",{staticClass:"role-admin role",attrs:{title:"Administrator"}},[t._v("ADM")]):t._e()]),s("span",{staticClass:"pr pl hidden-xs-only"},[s("label",{staticClass:"fw"},[s("i",{staticClass:"fa fa-clock-o"})]),s("span",[t._v(" 创建时间："),s("el-tooltip",{attrs:{content:t._f("localtime")(e.gmtCreate),placement:"top"}},[s("span",[t._v(t._s(t._f("fromNow")(e.gmtCreate)))])])],1)]),s("span",{staticClass:"pr"},[s("label",{staticClass:"fw"},[s("i",{staticClass:"fa fa-thumbs-o-up"})]),s("span",[t._v(" 点赞："+t._s(e.likeNum))])]),s("span",{staticClass:"pr"},[s("label",{staticClass:"fw"},[s("i",{staticClass:"fa fa-eye"})]),s("span",[t._v(" 浏览："+t._s(e.viewNum))])]),s("span",[s("label",{staticClass:"fw"},[s("i",{staticClass:"el-icon-folder-opened"})]),s("a",{on:{click:function(s){return t.pushRouter({cid:e.categoryId,onlyMine:t.query.onlyMine},{problemID:t.query.pid},t.routeName)}}},[t._v(" "+t._s(t.cidMapName[e.categoryId]))])]),s("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:t.isAuthenticated,expression:"isAuthenticated"}],staticClass:"hidden-xs-only",staticStyle:{float:"right"},on:{command:t.handleCommand}},[s("span",{staticClass:"el-dropdown-link"},[s("i",{staticClass:"el-icon-more"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:e.uid===t.userInfo.uid,expression:"discussion.uid === userInfo.uid"}],attrs:{icon:"el-icon-edit-outline",command:"edit:"+a}},[t._v("编辑")]),s("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:e.uid===t.userInfo.uid||t.isAdminRole,expression:"discussion.uid === userInfo.uid || isAdminRole"}],attrs:{icon:"el-icon-delete",command:"delete:"+a}},[t._v("删除")])],1)],1),s("div",{staticClass:"hidden-sm-and-up"},[s("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:t.isAuthenticated,expression:"isAuthenticated"}],staticStyle:{float:"right","margin-top":"10px"},on:{command:t.handleCommand}},[s("span",{staticClass:"el-dropdown-link"},[s("i",{staticClass:"el-icon-more"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:e.uid===t.userInfo.uid,expression:"discussion.uid === userInfo.uid"}],attrs:{icon:"el-icon-edit-outline",command:"edit:"+a}},[t._v("编辑")]),s("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:e.uid===t.userInfo.uid||t.isAdminRole,expression:"discussion.uid === userInfo.uid || isAdminRole"}],attrs:{icon:"el-icon-delete",command:"delete:"+a}},[t._v("删除")])],1)],1),s("span",{staticClass:"pr",staticStyle:{float:"right","margin-top":"10px"}},[s("label",{staticClass:"fw"},[s("i",{staticClass:"fa fa-clock-o"})]),s("span",[t._v(" "+t._s(t._f("localtime")(e.gmtCreate)))])])],1)],1)])],1)})),s("Pagination",{attrs:{total:t.total,"page-size":t.limit,current:t.currentPage},on:{"on-change":t.changeRoute,"update:current":function(e){t.currentPage=e}}})],2),s("el-col",{attrs:{md:6,xs:24}},[s("el-button",{staticClass:"btn",staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:t.toEditDiscussion}},[s("i",{staticClass:"el-icon-edit"},[t._v(" "+t._s(""==this.query.pid?"发布讨论":"发布题目讨论"))])]),t.isAuthenticated?s("el-button",{staticClass:"btn",staticStyle:{width:"100%","margin-left":"0","margin-top":"10px"},attrs:{type:"danger"},on:{click:function(e){return t.toOnlyMyDiscussion(!t.query.onlyMine)}}},[s("i",{staticClass:"el-icon-search"},[t._v(" "+t._s(t.query.onlyMine?"查看所有讨论":"只看自己"))])]):t._e(),this.query.pid?[s("el-button",{staticClass:"btn",staticStyle:{width:"100%","margin-left":"0","margin-top":"10px"},attrs:{type:"success"},on:{click:t.toAllDiscussion}},[s("i",{staticClass:"el-icon-s-home"},[t._v(" 综合讨论区")])]),s("el-button",{staticClass:"btn",staticStyle:{width:"100%","margin-left":"0","margin-top":"10px"},attrs:{type:"warning"},on:{click:function(e){return t.pushRouter({onlyMine:t.query.onlyMine},{problemID:t.query.pid},"ProblemDetails")}}},[s("i",{staticClass:"el-icon-back"},[t._v(" 返回 ("+t._s(t.query.pid)+") 题目")])])]:t._e(),s("div",{staticClass:"category-body"},[s("h3",{staticClass:"title-sidebar"},[s("a",{on:{click:function(e){return t.pushRouter({onlyMine:t.query.onlyMine},{problemID:t.query.pid},t.routeName)}}},[s("i",{staticClass:"el-icon-folder-opened"}),t._v(" 讨论分类")])]),s("el-row",t._l(t.categoryList,(function(e,a){return s("el-col",{key:a,staticClass:"category-item",attrs:{span:24,title:e.name}},[s("a",{staticStyle:{display:"block"},on:{click:function(s){return t.pushRouter({cid:e.id,onlyMine:t.query.onlyMine},{problemID:t.query.pid},t.routeName)}}},[s("i",{staticClass:"fa fa-flag"},[t._v(" "+t._s(e.name))]),s("span",{staticClass:"el-icon-arrow-right",staticStyle:{float:"right","font-weight":"600!important"}})])])})),1)],1)],2)],1),s("el-dialog",{attrs:{title:t.discussionDialogTitle,visible:t.showEditDiscussionDialog,fullscreen:!0},on:{"update:visible":function(e){t.showEditDiscussionDialog=e},open:t.onOpenEditDialog}},[s("el-form",{attrs:{"label-position":"top",model:t.discussion}},[s("el-form-item",{attrs:{label:"讨论标题",required:""}},[s("el-input",{staticClass:"title-input",attrs:{placeholder:"请输入讨论标题"},model:{value:t.discussion.title,callback:function(e){t.$set(t.discussion,"title",e)},expression:"discussion.title"}})],1),s("el-form-item",{attrs:{label:"讨论简介",required:""}},[s("el-input",{staticClass:"title-input",attrs:{placeholder:"请输入讨论简介"},model:{value:t.discussion.description,callback:function(e){t.$set(t.discussion,"description",e)},expression:"discussion.description"}})],1),s("el-form-item",{attrs:{label:"讨论分类",required:""}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.discussion.categoryId,callback:function(e){t.$set(t.discussion,"categoryId",e)},expression:"discussion.categoryId"}},t._l(t.categoryList,(function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t.isAdminRole?s("el-form-item",{attrs:{label:"是否置顶",required:""}},[s("el-switch",{model:{value:t.discussion.topPriority,callback:function(e){t.$set(t.discussion,"topPriority",e)},expression:"discussion.topPriority"}})],1):t._e(),s("el-form-item",{attrs:{label:"讨论内容",required:""}},[s("Editor",{attrs:{value:t.discussion.content},on:{"update:value":function(e){return t.$set(t.discussion,"content",e)}}})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"danger"},nativeOn:{click:function(e){t.showEditDiscussionDialog=!1}}},[t._v("取消")]),s("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submitDiscussion(e)}}},[t._v("发布")])],1)],1)],1)}),[],!1,null,"8f17dcb4",null).exports,D={components:{comment:ot,Avatar:S.a,Editor:ct},data:function(){return{discussion:{author:"HOJ",avatar:""},query:{currentPage:1,did:null},discussionID:0,showEditDiscussionDialog:!1,discussionDialogTitle:"Edit Discussion",showReportDialog:!1,report:{tagList:[],content:""}}},mounted:function(){this.init()},methods:Object(o.a)(Object(o.a)({},Object(r.mapActions)(["changeDomTitle"])),{},{init:function(){var t=this;this.routeName=this.$route.name,this.discussionID=this.$route.params.discussionID||"",Dt.getDiscussion(this.discussionID).then((function(e){t.discussion=e.data.data,t.changeDomTitle({title:t.discussion.title}),t.$nextTick((function(t){st()}))}))},getInfoByUsername:function(t,e){this.$router.push({path:"/user-home",query:{uid:t,username:e}})},toAllDiscussionByCid:function(t){this.$router.push({path:"/discussion",query:{cid:t}})},toLikeDiscussion:function(t,e){var s=this;this.isAuthenticated?Dt.toLikeDiscussion(t,e).then((function(t){m.success(t.data.msg),e?(s.discussion.likeNum++,s.discussion.hasLike=!0):(s.discussion.likeNum--,s.discussion.hasLike=!1)})):m.warning("请先登录")},submitDiscussion:function(){var t=this,e=Object.assign({},this.discussion);delete e.viewNum,delete e.likeNum,Dt.updateDiscussion(e).then((function(e){m.success(e.data.msg),t.showEditDiscussionDialog=!1,t.init()}))},submitReport:function(){var t=this;if(this.isAuthenticated)if(0!=this.report.tagList.length||this.report.content){for(var e="",s=0;s<this.report.tagList.length;s++)e+="#"+this.report.tagList[s]+"# ";e+=this.report.content;var a={reporter:this.userInfo.username,content:e,did:this.discussionID};Dt.toReportDiscussion(a).then((function(e){m.success(e.data.msg),t.showReportDialog=!1}))}else m.warning("举报标签和理由不能都为空");else m.warning("请先登录")}}),computed:Object(o.a)(Object(o.a)({},Object(r.mapGetters)(["isAuthenticated","isAdminRole","userInfo"])),{},{contentHtml:function(){if(this.discussion.content)return this.$markDown.render(this.discussion.content)}}),watch:{isAuthenticated:function(t,e){t!=e&&this.init()}}},s("a971"),ot=Object(v.a)(D,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",[e("div",{staticClass:"container"},[e("div",{staticClass:"title-article",staticStyle:{"text-align":"left"}},[e("h1",{staticClass:"title",attrs:{id:"sharetitle"}},[e("span",[t._v(t._s(t.discussion.title))])]),e("div",{staticClass:"title-msg"},[e("span",[e("a",{staticClass:"c999",attrs:{title:t.discussion.author},on:{click:function(e){return t.getInfoByUsername(t.discussion.uid,t.discussion.author)}}},[e("avatar",{staticClass:"user-avatar",attrs:{username:t.discussion.author,inline:!0,size:26,color:"#FFF",src:t.discussion.avatar}}),e("span",{staticClass:"user-name"},[t._v(t._s(t.discussion.author))])],1)]),"root"==t.discussion.role?e("span",{staticClass:"role-root role",attrs:{title:"Super Administrator"}},[t._v("SPA")]):t._e(),"admin"==t.discussion.role?e("span",{staticClass:"role-admin role",attrs:{title:"Administrator"}},[t._v("ADM")]):t._e(),e("span",{staticClass:"c999",staticStyle:{padding:"0 6px"}},[e("i",{staticClass:"el-icon-folder-opened"},[t._v(" 分类：")]),e("a",{staticClass:"c999",on:{click:function(e){return t.toAllDiscussionByCid(t.discussion.categoryId)}}},[t._v(t._s(t.discussion.categoryName))])]),e("span",{staticClass:"c999"},[e("i",{staticClass:"fa fa-thumbs-o-up"}),e("span",[t._v(" 点赞："+t._s(t.discussion.likeNum))])]),e("span",{staticClass:"c999"},[e("i",{staticClass:"fa fa-eye"}),e("span",[t._v(" 浏览："+t._s(t.discussion.viewNum))])]),e("a",{staticClass:"report",attrs:{title:"举报"},on:{click:function(e){t.showReportDialog=!0}}},[e("i",{staticClass:"fa fa-envira"}),e("span",[t._v("举报")])]),t.discussion.hasLike?e("a",{staticClass:"like",attrs:{title:"已点赞"},on:{click:function(e){return t.toLikeDiscussion(t.discussion.id,!1)}}},[e("i",{staticClass:"fa fa-thumbs-up"}),t._v(" "),e("span",[t._v("已点赞")])]):e("a",{staticClass:"like",attrs:{title:"点赞"},on:{click:function(e){return t.toLikeDiscussion(t.discussion.id,!0)}}},[e("i",{staticClass:"fa fa-thumbs-o-up"}),t._v(" "),e("span",[t._v("点赞")])]),e("span",[e("i",{staticClass:"fa fa-clock-o"},[t._v(" 创建时间：")]),e("span",[e("el-tooltip",{attrs:{content:t._f("localtime")(t.discussion.gmtCreate),placement:"top"}},[e("span",[t._v(t._s(t._f("fromNow")(t.discussion.gmtCreate)))])])],1)]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.userInfo.uid==t.discussion.uid,expression:"userInfo.uid == discussion.uid"}],staticStyle:{padding:"0 6px"}},[e("a",{staticStyle:{color:"#8fb0c9"},on:{click:function(e){t.showEditDiscussionDialog=!0}}},[e("i",{staticClass:"el-icon-edit-outline"},[t._v(" 编辑")])])])])]),e("div",{staticClass:"body-article"},[e("div",{directives:[{name:"katex",rawName:"v-katex"},{name:"highlight",rawName:"v-highlight"}],staticClass:"markdown-body",domProps:{innerHTML:t._s(t.contentHtml)}})])]),e("el-dialog",{attrs:{title:"举报",visible:t.showReportDialog,width:"350px"},on:{"update:visible":function(e){t.showReportDialog=e}}},[e("el-form",{attrs:{"label-position":"top",model:t.report}},[e("el-form-item",{attrs:{label:"标签",required:""}},[e("el-checkbox-group",{model:{value:t.report.tagList,callback:function(e){t.$set(t.report,"tagList",e)},expression:"report.tagList"}},[e("el-checkbox",{attrs:{label:"垃圾广告"}}),e("el-checkbox",{attrs:{label:"违法违规"}}),e("el-checkbox",{attrs:{label:"色情低俗"}}),e("el-checkbox",{attrs:{label:"赌博诈骗"}}),e("el-checkbox",{attrs:{label:"恶意骂战"}}),e("el-checkbox",{attrs:{label:"恶意抄袭"}})],1)],1),e("el-form-item",{attrs:{label:"理由",required:""}},[e("el-input",{attrs:{type:"textarea",placeholder:"请写下举报的理由",maxlength:"200","show-word-limit":"",rows:4},model:{value:t.report.content,callback:function(e){t.$set(t.report,"content",e)},expression:"report.content"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"danger"},nativeOn:{click:function(e){t.showReportDialog=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submitReport(e)}}},[t._v("提交")])],1)],1),e("el-dialog",{attrs:{title:t.discussionDialogTitle,visible:t.showEditDiscussionDialog,fullscreen:!0},on:{"update:visible":function(e){t.showEditDiscussionDialog=e},open:t.onOpenEditDialog}},[e("el-form",{attrs:{"label-position":"top",model:t.discussion}},[e("el-form-item",{attrs:{label:"讨论标题",required:""}},[e("el-input",{staticClass:"title-input",attrs:{placeholder:"请输入讨论标题"},model:{value:t.discussion.title,callback:function(e){t.$set(t.discussion,"title",e)},expression:"discussion.title"}})],1),e("el-form-item",{attrs:{label:"讨论简介",required:""}},[e("el-input",{staticClass:"title-input",attrs:{placeholder:"请输入讨论简介"},model:{value:t.discussion.description,callback:function(e){t.$set(t.discussion,"description",e)},expression:"discussion.description"}})],1),e("el-form-item",{attrs:{label:"讨论分类",required:""}},[e("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:t.discussion.categoryId,callback:function(e){t.$set(t.discussion,"categoryId",e)},expression:"discussion.categoryId"}},[e("el-option",{attrs:{label:t.discussion.categoryName,value:t.discussion.categoryId}})],1)],1),t.isAdminRole?e("el-form-item",{attrs:{label:"是否置顶",required:""}},[e("el-switch",{model:{value:t.discussion.topPriority,callback:function(e){t.$set(t.discussion,"topPriority",e)},expression:"discussion.topPriority"}})],1):t._e(),e("el-form-item",{attrs:{label:"讨论内容",required:""}},[e("Editor",{attrs:{value:t.discussion.content},on:{"update:value":function(e){return t.$set(t.discussion,"content",e)}}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"danger"},nativeOn:{click:function(e){t.showEditDiscussionDialog=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submitDiscussion(e)}}},[t._v("发布")])],1)],1),e("comment",{attrs:{did:t.$route.params.discussionID}})],1)}),[],!1,null,"18eec790",null).exports,ct={components:{Highlight:ut},data:function(){return{languages:[],JUDGE_STATUS:z}},methods:{getStatusColor:function(t){return"el-tag el-tag--medium status-"+z[t].color}},beforeRouteEnter:function(t,e,s){at.getLanguages(!0).then((function(t){s((function(e){e.languages=t.filter((function(t,e,s){return"ME"==t.oj}))}))}))},watch:{languages:function(t,e){0<t.length&&this.$nextTick((function(t){st()}))}}},s("e2ac"),D=Object(v.a)(ct,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{md:12,sm:24}},[s("el-card",{staticClass:"container"},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title home-title"},[t._v("Compiler & Example")])]),s("div",{staticClass:"content"},[s("ul",t._l(t.languages,(function(e){return s("li",{key:e.name},[t._v(" "+t._s(e.name)+" ( "+t._s(e.description)+" ) "),s("p",{staticStyle:{color:"#409EFF","font-size":"16px"}},[t._v("Compiler")]),s("pre",[t._v(t._s(e.compileCommand))]),s("p",{staticStyle:{color:"#409EFF","font-size":"16px"}},[t._v("A+B Problem")]),s("Highlight",{attrs:{code:e.template,language:e.name}})],1)})),0)])])],1),s("el-col",{attrs:{md:12,sm:24}},[s("el-card",{staticClass:"container"},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title home-title"},[t._v("Result Explanation")])]),s("ul",{staticClass:"result"},[s("li",[s("span",{class:t.getStatusColor(5)},[t._v("Pending")]),t._v(" ：您的解答正在排队等待测评中，请等待结果... ")]),s("li",[s("span",{class:t.getStatusColor(10)},[t._v("Submitted Failed")]),t._v(" ：您的此次提交失败，请点击按钮重新提交... ")]),s("li",[s("span",{class:t.getStatusColor(6)},[t._v("Compiling")]),t._v(" ：正在对您的源代码进行编译中，请等待结果... ")]),s("li",[s("span",{class:t.getStatusColor(7)},[t._v("Judging")]),t._v(" ：正在使用测试数据运行您的程序中，请等待结果... ")]),s("li",[s("span",{class:t.getStatusColor(-2)},[t._v("Compile Error")]),t._v(" : 无法编译您的源代码，点击链接查看编译器的输出。 ")]),s("li",[s("span",{class:t.getStatusColor(-3)},[t._v("Presentation Error")]),t._v(" : 您提交的代码已经很接近正确答案，请检查代码格式输出是否有多余空格，换行等空白符。 ")]),s("li",[s("span",{class:t.getStatusColor(0)},[t._v("Accepted")]),t._v(" : 您的解题方法是正确的。 ")]),s("li",[s("span",{class:t.getStatusColor(-1)},[t._v("Wrong Answer")]),t._v(" : 您的程序输出结果与判题程序的答案不符。 ")]),s("li",[s("span",{class:t.getStatusColor(3)},[t._v("Runtime Error")]),t._v(" : 您的程序异常终止，可能的原因是：段错误，被零除或用非0的代码退出程序。 ")]),s("li",[s("span",{class:t.getStatusColor(1)},[t._v("Time Limit Exceeded")]),t._v(" : 您的程序使用的 CPU 时间已超出题目限制。 ")]),s("li",[s("span",{class:t.getStatusColor(2)},[t._v("Memory Limit Exceeded")]),t._v(" : 您的程序实际使用的内存已超出题目限制。 ")]),s("li",[s("span",{class:t.getStatusColor(4)},[t._v("System Error")]),t._v(" : 糟糕，判题机系统出了问题。请报告给管理员。 ")])])]),s("el-card",{staticClass:"container"},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"panel-title home-title"},[t._v("Compile Explanation")])]),s("ul",{staticClass:"result"},[s("li",[t._v(" 1. __int64不是ANSI标准定义，只能在VC使用，在 GNU C++ 中应写成 long long 类型， scanf和printf 请使用%lld作为格式 ")]),s("li",[t._v(" 2. main() 返回值必须定义为 int ，而不是 void ")]),s("li",[t._v(' 3. i 在循环外失去定义 "for(int i=0...){...}" ')]),s("li",[t._v(" 4. itoa 不是ansi标准函数（标准 C/C++ 中无此函数） ")])])])],1)],1)],1)}),[],!1,null,"4b983927",null).exports,ut=s("b17b"),ct={name:"NotFound404",data:function(){return{firstDigit:null,secondDigit:null,thirdDigit:null}},mounted:function(){this.init()},methods:{backPage:function(){this.$router.go(-1)},goHome:function(){this.$router.push({name:"Home"})},init:function(){var t=this,e=0,s=setInterval((function(){40<e?(clearInterval(s),t.thirdDigit=4):(t.thirdDigit=Math.floor(9*Math.random())+1,e++)}),30),a=setInterval((function(){80<e?(clearInterval(a),t.secondDigit=0):(t.secondDigit=Math.floor(9*Math.random())+1,e++)}),30),i=setInterval((function(){100<e?(clearInterval(i),t.firstDigit=4):(t.firstDigit=Math.floor(9*Math.random())+1,e++)}),30)}}},s("f166"),ct=Object(v.a)(ct,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("el-card",{attrs:{shadow:""}},[e("div",{staticClass:"error"},[e("div",{staticClass:"container-floud"},[e("div",{staticStyle:{"text-align":"center"}},[e("div",{staticClass:"container-error-404"},[e("div",{staticClass:"clip"},[e("div",{staticClass:"shadow"},[e("span",{staticClass:"digit thirdDigit"},[t._v(t._s(t.thirdDigit))])])]),e("div",{staticClass:"clip"},[e("div",{staticClass:"shadow"},[e("span",{staticClass:"digit secondDigit"},[t._v(t._s(t.secondDigit))])])]),e("div",{staticClass:"clip"},[e("div",{staticClass:"shadow"},[e("span",{staticClass:"digit firstDigit"},[t._v(t._s(t.firstDigit))])])]),e("div",{staticClass:"msg"},[t._v(" OH! "),e("span",{staticClass:"triangle"})])]),e("h2",{staticClass:"h1"},[t._v("很抱歉，你访问的页面找不到了")]),e("el-button",{staticStyle:{width:"150px"},attrs:{size:"large"},on:{click:t.goHome}},[e("i",{staticClass:"el-icon-s-home"}),t._v(" Go Home ")]),e("el-button",{staticStyle:{width:"150px","margin-left":"40px"},attrs:{size:"large",type:"primary"},on:{click:t.backPage}},[e("i",{staticClass:"el-icon-back"}),t._v(" Back ")])],1)])])])}),[],!1,null,"259e98fa",null).exports,D=[{path:"/",redirect:"/home",component:f,meta:{title:"Home"}},{path:"/home",name:"Home",component:f,meta:{title:"Home"}},{path:"/problem",name:"ProblemList",component:it,meta:{title:"Problem"}},{path:"/problem/:problemID",name:"ProblemDetails",component:R,meta:{title:"Problem Details"}},{path:"/contest",name:"ContestList",component:x,meta:{title:"Contest"}},{path:"/status",name:"SubmissionList",component:_,meta:{title:"Status"}},{path:"/submission-detail/:submitID",name:"SubmissionDeatil",component:c,meta:{title:"Submission Deatil"}},{path:"/acm-rank",name:"ACM Rank",component:k,meta:{title:"ACM Rank"}},{path:"/oi-rank",name:"OI Rank",component:i,meta:{title:"OI Rank"}},{path:"/reset-password",name:"SetNewPassword",component:y,meta:{title:"Reset Password"}},{name:"UserHome",path:"/user-home",component:T,meta:{title:"User Home"}},{name:"Setting",path:"/setting",component:pt,meta:{requireAuth:!0,title:"Setting"}},{name:"Logout",path:"/logout",component:dt,meta:{requireAuth:!0,title:"Logout"}},{name:"ContestDetails",path:"/contest/:contestID/",component:ft,meta:{title:"Contest Details",requireAuth:!0},children:[{name:"ContestSubmissionList",path:"submissions",component:_,meta:{title:"Contest Submission"}},{name:"ContestSubmissionDeatil",path:"problem/:problemID/submission-deatil/:submitID",component:c,meta:{title:"Contest Submission Deatil"}},{name:"ContestProblemList",path:"problems",component:I,meta:{title:"Contest Problem"}},{name:"ContestProblemDetails",path:"problem/:problemID/",component:R,meta:{title:"Contest Problem Details"}},{name:"ContestAnnouncementList",path:"announcements",component:e,meta:{title:"Contest Announcement"}},{name:"ContestRank",path:"rank",component:b,meta:{title:"Contest Rank"}},{name:"ContestACInfo",path:"ac-info",component:w,meta:{title:"Contest AC Info",requireAdmin:!0}},{name:"ContestRejudgeAdmin",path:"rejudge",component:A,meta:{title:"Contest Rejudge",requireSuperAdmin:!0}},{name:"ContestComment",path:"comment",component:nt,meta:{title:"Contest Comment"}}]},{path:"/discussion",name:"AllDiscussion",meta:{title:"Discussion"},component:mt},{path:"/discussion/:problemID",name:"ProblemDiscussion",meta:{title:"Discussion"},component:mt},{path:"/discussion-detail/:discussionID",name:"DiscussionDetail",meta:{title:"Discussion Detail"},component:ot},{path:"/introduction",meta:{title:"Introduction"},component:D},{path:"/developer",meta:{title:"Developer"},component:ut.default},Object(gt.a)({path:"*",meta:{title:"404"},component:ct},"meta",{title:"404"})],ut={state:{userInfo:j("userInfo"),token:localStorage.getItem("token"),loginFailNum:0},getters:{userInfo:function(t){return t.userInfo||{}},token:function(t){return t.token||""},loginFailNum:function(t){return t.loginFailNum||0},isAuthenticated:function(t,e){return!!e.token},isAdminRole:function(t,e){return!!e.userInfo.roleList&&(-1!=e.userInfo.roleList.indexOf(Q)||-1!=e.userInfo.roleList.indexOf(Z))},isSuperAdmin:function(t,e){return!!e.userInfo.roleList&&-1!=e.userInfo.roleList.indexOf(Z)}},actions:{setUserInfo:function(t,e){(0,t.commit)("changeUserInfo",{userInfo:e})},incrLoginFailNum:function(t,e){(0,t.commit)("incrLoginFailNum",{success:e})},clearUserInfoAndToken:function(t){(0,t.commit)("clearUserInfoAndToken")}},mutations:{changeUserInfo:function(t,e){e=e.userInfo,t.userInfo=e,$("userInfo",e)},changeUserToken:function(t,e){t.token=e,localStorage.setItem("token",e)},incrLoginFailNum:function(t,e){e.success?t.loginFailNum=0:t.loginFailNum+=1},clearUserInfoAndToken:function(t){t.token="",t.userInfo={},t.loginFailNum=0,N()}}},ct={state:{now:vt()(),intoAccess:!0,submitAccess:!1,forceUpdate:!1,contest:{auth:W},contestProblems:[],itemVisible:{table:!0,chart:!0}},mutations:{changeContest:function(t,e){t.contest=e.contest},changeContestItemVisible:function(t,e){t.itemVisible=Object(o.a)(Object(o.a)({},t.itemVisible),e)},changeRankForceUpdate:function(t,e){t.forceUpdate=e.value},changeContestProblems:function(t,e){t.contestProblems=e.contestProblems},changeContestRankLimit:function(t,e){t.rankLimit=e.rankLimit},contestIntoAccess:function(t,e){t.intoAccess=e.intoAccess},contestSubmitAccess:function(t,e){t.submitAccess=e.submitAccess},clearContest:function(t){t.contest={},t.contestProblems=[],t.intoAccess=!1,t.submitAccess=!1,t.itemVisible={table:!0,chart:!0,realName:!1},t.forceUpdate=!1},now:function(t,e){t.now=e.now},nowAdd1s:function(t){t.now=vt()(t.now.add(1,"s"))}},getters:{contestStatus:function(t,e){return t.contest.status},contestRuleType:function(t,e){return t.contest.type},isContestAdmin:function(t,e,s,a){return a.isAuthenticated&&(t.contest.author===a.userInfo.author||a.isSuperAdmin)},canSubmit:function(t,e){return t.intoAccess||t.submitAccess||t.contest.auth===W||e.isContestAdmin},contestMenuDisabled:function(t,e){return!e.isContestAdmin&&(e.contestStatus===B.SCHEDULED||(t.contest.auth===Y?!t.intoAccess:void 0))},ContestRealTimePermission:function(t,e,s,a){return e.contestStatus===B.ENDED||!!e.isContestAdmin||!0!==t.contest.sealRank||!t.now.isAfter(vt()(t.contest.sealRankTime))},problemSubmitDisabled:function(t,e,s,a){return e.contestStatus===B.ENDED||(e.contestStatus===B.SCHEDULED?!e.isContestAdmin:!a.isAuthenticated)},passwordFormVisible:function(t,e){return t.contest.auth!==W&&t.contest.auth!==K&&!t.intoAccess&&!e.isContestAdmin},contestStartTime:function(t){return vt()(t.contest.startTime)},contestEndTime:function(t){return vt()(t.contest.endTime)},countdown:function(t,e){if(e.contestStatus!==B.SCHEDULED)return e.contestStatus!==B.RUNNING?"Ended":0<e.contestEndTime.diff(t.now,"seconds")?"-"+wt.secondFormat(e.contestEndTime.diff(t.now,"seconds")):(t.contest.status=B.ENDED,"00:00:00");var s=e.contestStartTime.diff(t.now,"seconds");e=vt.a.duration(s,"seconds");return 0<e.weeks()?"Start At "+e.humanize():(e.asSeconds()<=0&&(t.contest.status=B.RUNNING),"-"+wt.secondFormat(s))},BeginToNowDuration:function(t,e){return vt.a.duration(t.now.diff(e.contestStartTime,"seconds"),"seconds").asSeconds()},progressValue:function(t,e){return e.contestStatus===B.SCHEDULED?0:e.contestStatus!==B.RUNNING?100:e.BeginToNowDuration/t.contest.duration*100}},actions:{getContest:function(t){var e=t.commit,s=t.rootState,a=t.dispatch;return new Promise((function(t,i){Dt.getContest(s.route.params.contestID).then((function(s){t(s),s=s.data.data,e("changeContest",{contest:s}),e("now",{now:vt()(s.now)}),s.auth==Y?a("getContestAccess",{auth:Y}):s.auth==K&&a("getContestAccess",{auth:K})}),(function(t){i(t)}))}))},getContestProblems:function(t){var e=t.commit,s=t.rootState;return new Promise((function(t,a){Dt.getContestProblemList(s.route.params.contestID).then((function(s){t(s),e("changeContestProblems",{contestProblems:s.data.data})}),(function(t){e("changeContestProblems",{contestProblems:[]}),a(t)}))}))},getContestAccess:function(t,e){var s=t.commit,a=t.rootState;return new Promise((function(t,i){Dt.getContestAccess(a.route.params.contestID).then((function(a){e.auth==Y?s("contestIntoAccess",{intoAccess:a.data.data.access}):s("contestSubmitAccess",{submitAccess:a.data.data.access}),t(a)})).catch()}))}}};n.a.use(l.a);var Tt=new l.a.Store({modules:{user:ut,contest:ct},state:{modalStatus:{mode:"Login",visible:!1},websiteConfig:{recordName:"粤ICP备×××××××号-1",projectName:"HOJ",recordUrl:"#",projectUrl:"#"},registerTimeOut:60,resetTimeOut:90},getters:{modalStatus:function(t){return t.modalStatus},registerTimeOut:function(t){return t.registerTimeOut},resetTimeOut:function(t){return t.resetTimeOut},websiteConfig:function(t){return t.websiteConfig}},mutations:{changeModalStatus:function(t,e){var s=e.mode;e=e.visible;void 0!==s&&(t.modalStatus.mode=s),void 0!==e&&(t.modalStatus.visible=e)},changeRegisterTimeOut:function(t,e){e=e.time,void 0!==e&&(t.registerTimeOut=e)},changeResetTimeOut:function(t,e){e=e.time,void 0!==e&&(t.resetTimeOut=e)},startTimeOut:function(t,e){var s=this,a=e.name;0!=t.resetTimeOut?0!=t.registerTimeOut?("resetTimeOut"==a&&t.resetTimeOut--,"registerTimeOut"==a&&t.registerTimeOut--,setTimeout((function(){s.commit("startTimeOut",{name:a})}),1e3)):t.registerTimeOut=60:t.resetTimeOut=90},changeWebsiteConfig:function(t,e){t.websiteConfig=e.websiteConfig}},actions:{changeModalStatus:function(t,e){(0,t.commit)("changeModalStatus",e)},changeResetTimeOut:function(t,e){(0,t.commit)("changeResetTimeOut",e)},changeRegisterTimeOut:function(t,e){(0,t.commit)("changeRegisterTimeOut",e)},startTimeOut:function(t,e){(0,t.commit)("startTimeOut",e)},changeDomTitle:function(t,e){t.commit,t=t.state,e&&e.title?window.document.title=e.title+" - "+(t.websiteConfig.shortName+"").toUpperCase():window.document.title=t.route.meta.title+" - "+(t.websiteConfig.shortName+"").toUpperCase()},getWebsiteConfig:function(t){var e=t.commit;Dt.getWebsiteConfig().then((function(t){e("changeWebsiteConfig",{websiteConfig:t.data.data})}))}}}),Pt=(ut=s("323e"),s.n(ut));s("a5d8"),Pt.a.configure({ease:"ease",speed:1e3,showSpinner:!1}),n.a.use(h.a);var Et=h.a.prototype.push;h.a.prototype.push=function(t){return Et.call(this,t).catch((function(t){return t}))},ct=new Set([].concat(Object(p.a)(D),Object(p.a)(lt))),ut=new h.a({mode:"history",base:"/",routes:ct,scrollBehavior:function(t,e,s){return s||{x:0,y:0}}}),ut.beforeEach((function(t,e,s){var a,i,n;Pt.a.start(),t.matched.some((function(t){return t.meta.requireAuth}))?(a=localStorage.getItem("token")||"",i=Tt.getters.isSuperAdmin,n=Tt.getters.isAdminRole,a?t.matched.some((function(t){return t.meta.requireSuperAdmin}))?i?s():("admin"===t.path.split("/")[1]?s({path:"/admin/login"}):(s({path:"/home"}),Tt.commit("changeModalStatus",{mode:"Login",visible:!0})),m.error("对不起！您并非超级管理员，您无权操作，请重新登陆！"),Tt.commit("clearUserInfoAndToken")):!t.matched.some((function(t){return t.meta.requireAdmin}))||n?s():("admin"===t.path.split("/")[1]?s({path:"/admin/login"}):(s({path:"/home"}),Tt.commit("changeModalStatus",{mode:"Login",visible:!0})),m.error("对不起！您并非管理员，您无权操作，请重新登录！"),Tt.commit("clearUserInfoAndToken")):("admin"===t.path.split("/")[1]?s({path:"/admin/login"}):(s({path:"/home"}),Tt.commit("changeModalStatus",{mode:"Login",visible:!0})),Tt.commit("clearUserInfoAndToken"),m.error("请您先登录！"))):s()})),ut.afterEach((function(t,e,s){Pt.a.done()})),Object(g.sync)(Tt,ut);var It=ut;n.a.prototype.$http=u.a,u.a.defaults.timeout=4e4,u.a.interceptors.request.use((function(t){var e=localStorage.getItem("token");return e&&(t.headers.Authorization=e),e=t.url.split("/")[1],t.headers["Url-Type"]="admin"===e?e:"general",t}),(function(t){return mmMessage.error(t.response.data.mMessage),Promise.error(t)})),u.a.interceptors.response.use((function(t){return t.headers["refresh-token"]&&Tt.commit("changeUserToken",t.headers.authorization),200===t.data.status||null==t.data.status?Promise.resolve(t):(m.error(t.data.msg),Promise.reject(t))}),(function(t){if(t.response){if(t.response.headers["refresh-token"]&&Tt.commit("changeUserToken",t.response.headers.authorization),t.response.data instanceof Blob)return Promise.resolve(t.response);switch(t.response.status){case 401:t.response.data.msg&&m.error(t.response.data.msg),"admin"===t.response.config.headers["Url-Type"]?It.push("/api/admin/login"):Tt.commit("changeModalStatus",{mode:"Login",visible:!0}),Tt.commit("clearUserInfoAndToken");break;case 403:t.response.data.msg&&m.error(t.response.data.msg);break;case 404:m.error("查询错误，找不到要请求的资源！");break;default:t.response.data&&(t.response.data.msg?m.error(t.response.data.msg):m.error("服务器错误，请重新刷新！"))}return Promise.reject(t)}return m.error("与服务器链接出现异常，请稍后再尝试！"),Promise.reject(t)}));D={getWebsiteConfig:function(){return Rt("/api/get-website-config","get",{})},getRecentContests:function(){return Rt("/api/get-recent-contest","get",{})},getRecentOtherContests:function(){return Rt("/api/get-recent-other-contest","get",{})},getAnnouncementList:function(t,e){return Rt("/api/get-common-announcement","get",{params:{currentPage:t,limit:e}})},getRecent7ACRank:function(){return Rt("/api/get-recent-seven-ac-rank","get",{})},getRegisterEmail:function(t){return Rt("/api/get-register-code","get",{params:{email:t}})},login:function(t){return Rt("/api/login","post",{data:t})},checkUsernameOrEmail:function(t,e){return Rt("/api/check-username-or-email","post",{data:{username:t,email:e}})},getCaptcha:function(){return Rt("/api/captcha","get")},register:function(t){return Rt("/api/register","post",{data:t})},logout:function(){return Rt("/api/logout","get")},applyResetPassword:function(t){return Rt("/api/apply-reset-password","post",{data:t})},resetPassword:function(t){return Rt("/api/reset-password","post",{data:t})},getProblemTagList:function(){return Rt("/api/get-all-problem-tags","get")},getProblemList:function(t,e){var s={limit:t};return Object.keys(e).forEach((function(t){""!==e[t]&&null!==e[t]&&void 0!==e[t]&&(s[t]=e[t])})),Rt("/api/get-problem-list","get",{params:s})},getUserProblemStatus:function(t,e,s){return Rt("/api/get-user-problem-status","post",{data:{pidList:t,isContestProblemList:e,cid:s}})},pickone:function(){return Rt("/api/get-random-problem","get")},getProblem:function(t){return Rt("/api/get-problem","get",{params:{problemId:t}})},getProblemCodeTemplate:function(t){return Rt("/api/get-problem-code-template","get",{params:{pid:t}})},submitCode:function(t){return Rt("/api/submit-problem-judge","post",{data:t})},getSubmission:function(t){return Rt("/api/submission","get",{params:{submitId:t}})},getAllCaseResult:function(t){return Rt("/api/get-all-case-result","get",{params:{submitId:t}})},reSubmitRemoteJudge:function(t){return Rt("/api/resubmit","get",{params:{submitId:t}})},updateSubmission:function(t){return Rt("/api/submission","put",{data:t})},getSubmissionList:function(t,e){return e.limit=t,Rt("/api/submissions","get",{params:e})},checkSubmissonsStatus:function(t){return Rt("/api/check-submissions-status","post",{data:{submitIds:t}})},submissionRejudge:function(t){return Rt("/api/admin/judge/rejudge","get",{params:{submitId:t}})},getContestList:function(t,e,s){var a={currentPage:t,limit:e};return void 0!==s&&Object.keys(s).forEach((function(t){s[t]&&(a[t]=s[t])})),Rt("/api/get-contest-list","get",{params:a})},getContest:function(t){return Rt("/api/get-contest-info","get",{params:{cid:t}})},registerContest:function(t,e){return Rt("/api/register-contest","post",{data:{cid:t,password:e}})},getContestAccess:function(t){return Rt("/api/get-contest-access","get",{params:{cid:t}})},getContestProblemList:function(t){return Rt("/api/get-contest-problem","get",{params:{cid:t}})},getContestProblem:function(t,e){return Rt("/api/get-contest-problem-details","get",{params:{displayId:t,cid:e}})},getContestSubmissionList:function(t,e){return e.limit=t,Rt("/api/contest-submissions","get",{params:e})},getContestRank:function(t){return Rt("/api/get-contest-rank","get",{params:t})},getContestAnnouncementList:function(t,e,s){return Rt("/api/get-contest-announcement","get",{params:{currentPage:t,limit:e,cid:s}})},getACMACInfo:function(t){return Rt("/api/get-contest-ac-info","get",{params:t})},updateACInfoCheckedStatus:function(t){return Rt("/api/check-contest-ac-info","put",{data:t})},ContestRejudgeProblem:function(t){return Rt("/api/admin/judge/rejudge-contest-problem","get",{params:t})},getUserRank:function(t,e,s){return Rt("/api/get-rank-list","get",{params:{currentPage:t,limit:e,type:s}})},getAllLanguages:function(t){return Rt("/api/languages","get",{params:{all:t}})},getUserInfo:function(t){return Rt("/api/get-user-home-info","get",{params:{uid:t}})},changePassword:function(t){return Rt("/api/change-password","post",{data:t})},changeEmail:function(t){return Rt("/api/change-email","post",{data:t})},changeUserInfo:function(t){return Rt("/api/change-userInfo","post",{data:t})},getCategoryList:function(){return Rt("/api/discussion-category","get")},getDiscussionList:function(t,e){var s={limit:t};return Object.keys(e).forEach((function(t){""!==e[t]&&null!==e[t]&&void 0!==e[t]&&(s[t]=e[t])})),Rt("/api/discussions","get",{params:s})},getDiscussion:function(t){return Rt("/api/discussion","get",{params:{did:t}})},addDiscussion:function(t){return Rt("/api/discussion","post",{data:t})},updateDiscussion:function(t){return Rt("/api/discussion","put",{data:t})},deleteDiscussion:function(t){return Rt("/api/discussion","delete",{params:{did:t}})},toLikeDiscussion:function(t,e){return Rt("/api/discussion-like","get",{params:{did:t,toLike:e}})},toReportDiscussion:function(t){return Rt("/api/discussion-report","post",{data:t})},getCommentList:function(t){return Rt("/api/comments","get",{params:t})},addComment:function(t){return Rt("/api/comment","post",{data:t})},deleteComment:function(t){return Rt("/api/comment","delete",{data:t})},toLikeComment:function(t,e){return Rt("/api/comment-like","get",{params:{cid:t,toLike:e}})},addReply:function(t){return Rt("/api/reply","post",{data:t})},deleteReply:function(t){return Rt("/api/reply","delete",{data:t})},getAllReply:function(t){return Rt("/api/reply","get",{params:{commentId:t}})}};var Dt=Object.assign(D,{admin_login:function(t,e){return Rt("/api/admin/login","post",{data:{username:t,password:e}})},admin_logout:function(){return Rt("/api/admin/logout","get")},admin_getDashboardInfo:function(){return Rt("/api/admin/dashboard/get-dashboard-info","get")},getSessions:function(t){return Rt("/api/admin/dashboard/get-sessions","post",{data:t})},admin_getGeneralSystemInfo:function(){return Rt("/api/admin/config/get-service-info","get")},getJudgeServer:function(){return Rt("/api/admin/config/get-judge-service-info","get")},admin_getUserList:function(t,e,s){return e={currentPage:t,limit:e},s&&(e.keyword=s),Rt("/api/admin/user/get-user-list","get",{params:e})},admin_editUser:function(t){return Rt("/api/admin/user/edit-user","put",{data:t})},admin_deleteUsers:function(t){return Rt("/api/admin/user/delete-user","delete",{data:{ids:t}})},admin_importUsers:function(t){return Rt("/api/admin/user/insert-batch-user","post",{data:{users:t}})},admin_generateUser:function(t){return Rt("/api/admin/user/generate-user","post",{data:t})},admin_getAnnouncementList:function(t,e){return Rt("/api/admin/announcement","get",{params:{currentPage:t,limit:e}})},admin_deleteAnnouncement:function(t){return Rt("/api/admin/announcement","delete",{params:{aid:t}})},admin_updateAnnouncement:function(t){return Rt("/api/admin/announcement","put",{data:t})},admin_createAnnouncement:function(t){return Rt("/api/admin/announcement","post",{data:t})},admin_getSMTPConfig:function(){return Rt("/api/admin/config/get-email-config","get")},admin_editSMTPConfig:function(t){return Rt("/api/admin/config/set-email-config","put",{data:t})},admin_testSMTPConfig:function(t){return Rt("/api/admin/config/test-email","post",{data:{email:t}})},admin_getWebsiteConfig:function(){return Rt("/api/admin/config/get-web-config","get")},admin_editWebsiteConfig:function(t){return Rt("/api/admin/config/set-web-config","put",{data:t})},admin_getDataBaseConfig:function(){return Rt("/api/admin/config/get-db-and-redis-config","get")},admin_editDataBaseConfig:function(t){return Rt("/api/admin/config/set-db-and-redis-config","put",{data:t})},getLanguages:function(t,e){return Rt("/api/languages","get",{params:{pid:t,all:e}})},getProblemLanguages:function(t){return Rt("/api/get-Problem-languages","get",{params:{pid:t}})},admin_getProblemList:function(t){return Rt("/api/admin/problem/get-problem-list","get",{params:t=at.filterEmptyValue(t)})},admin_addRemoteOJProblem:function(t,e){return Rt("/api/admin/problem/import-remote-oj-problem","get",{params:{name:t,problemId:e}})},admin_createProblem:function(t){return Rt("/api/admin/problem","post",{data:t})},admin_editProblem:function(t){return Rt("/api/admin/problem","put",{data:t})},admin_deleteProblem:function(t){return Rt("/api/admin/problem","delete",{params:{pid:t}})},admin_getProblem:function(t){return Rt("/api/admin/problem","get",{params:{pid:t}})},admin_getAllProblemTagList:function(){return Rt("/api/get-all-problem-tags","get")},admin_getProblemTags:function(t){return Rt("/api/get-problem-tags","get",{params:{pid:t}})},admin_getProblemCases:function(t){return Rt("/api/admin/problem/get-problem-cases","get",{params:{pid:t}})},compileSPJ:function(t){return Rt("/api/admin/problem/compile-spj","post",{data:t})},admin_getContestProblemInfo:function(t,e){return Rt("/api/admin/contest/contest-problem","get",{params:{cid:e,pid:t}})},admin_setContestProblemInfo:function(t){return Rt("/api/admin/contest/contest-problem","put",{data:t})},admin_getContestProblemList:function(t){return Rt("/api/admin/contest/get-problem-list","get",{params:t=at.filterEmptyValue(t)})},admin_getContestProblem:function(t){return Rt("/api/admin/contest/problem","get",{params:{pid:t}})},admin_createContestProblem:function(t){return Rt("/api/admin/contest/problem","post",{data:t})},admin_editContestProblem:function(t){return Rt("/api/admin/contest/problem","put",{data:t})},admin_deleteContestProblem:function(t){return Rt("/api/admin/contest/problem","delete",{params:{id:id}})},admin_changeProblemPublic:function(t){return Rt("/api/admin/contest/change-problem-auth","put",{data:t})},admin_addProblemFromPublic:function(t){return Rt("/api/admin/contest/add-problem-from-public","post",{data:t})},exportProblems:function(t){return Rt("export_problem","post",{data:t})},admin_createContest:function(t){return Rt("/api/admin/contest","post",{data:t})},admin_getContest:function(t){return Rt("/api/admin/contest","get",{params:{cid:t}})},admin_editContest:function(t){return Rt("/api/admin/contest","put",{data:t})},admin_getContestList:function(t,e,s){return e={currentPage:t,limit:e},s&&(e.keyword=s),Rt("/api/admin/contest/get-contest-list","get",{params:e})},admin_getContestAnnouncementList:function(t,e,s){return Rt("/api/admin/contest/announcement","get",{params:{cid:t,currentPage:e,limit:s}})},admin_createContestAnnouncement:function(t){return Rt("/api/admin/contest/announcement","post",{data:t})},admin_deleteContestAnnouncement:function(t){return Rt("/api/admin/contest/announcement","delete",{params:{aid:t}})},admin_updateContestAnnouncement:function(t){return Rt("/api/admin/contest/announcement","put",{data:t})},admin_updateDiscussion:function(t){return Rt("/api/admin/discussion","put",{data:t})},admin_deleteDiscussion:function(t){return Rt("/api/admin/discussion","delete",{data:t})},admin_getDiscussionReport:function(t,e){return Rt("/api/admin/discussion-report","get",{params:{currentPage:t,limit:e}})},admin_updateDiscussionReport:function(t){return Rt("/api/admin/discussion-report","put",{data:t})}});function Rt(t,e,s){var a,i,n;return void 0!==s?(a=s.params,i=void 0===a?{}:a,s=s.data,n=void 0===s?{}:s):i=n={},new Promise((function(s,a){u()({url:t,method:e,params:i,data:n}).then((function(t){s(t)})).catch((function(t){a(t)}))}))}p={data:function(){return{allow_register:!0,btnLoginLoading:!1,verify:{loginSuccess:!1,loginMsg:""},needVerify:!1,formLogin:{username:"",password:""},loginSlideBlockVisible:!1,rules:{username:[{required:!0,message:"The username is required",trigger:"blur"},{max:255,message:"The longest length of a username is 255",trigger:"blur"}],password:[{required:!0,message:"The password is required",trigger:"blur"},{min:6,max:20,message:"The length of the password is between 6 and 20",trigger:"blur"}]}}},methods:Object(o.a)(Object(o.a)({},Object(r.mapActions)(["changeModalStatus"])),{},{switchMode:function(t){this.changeModalStatus({mode:t,visible:!0})},enterHandleLogin:function(){this.needVerify?this.visible.loginSlideBlock=!0:this.handleLogin()},handleLogin:function(t){var e=this;this.needVerify&&(this.verify.loginSuccess=!0,t=(t/1e3).toFixed(1),this.verify.loginMsg="本次耗时"+t+"s",setTimeout((function(){e.loginSlideBlockVisible=!1,e.verify.loginSuccess=!1}),1e3)),this.$refs.formLogin.validate((function(t){t&&(e.btnLoginLoading=!0,t=Object.assign({},e.formLogin),Dt.login(t).then((function(t){e.btnLoginLoading=!1,e.changeModalStatus({visible:!1});var s=t.headers.authorization;e.$store.commit("changeUserToken",s),e.$store.dispatch("setUserInfo",t.data.data),e.$store.dispatch("incrLoginFailNum",!0),m.success("欢迎回来~")}),(function(t){e.$store.dispatch("incrLoginFailNum",!1),e.btnLoginLoading=!1})))}))}}),computed:Object(o.a)(Object(o.a)({},Object(r.mapGetters)(["modalStatus","loginFailNum"])),{},{visible:{get:function(){return this.modalStatus.visible},set:function(t){this.changeModalStatus({visible:t})}}}),watch:{loginFailNum:function(t,e){this.needVerify=5<=t}}},s("32d0"),lt=Object(v.a)(p,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",[e("el-form",{ref:"formLogin",attrs:{model:t.formLogin,rules:t.rules,"label-width":"100px"}},[e("el-form-item",{attrs:{prop:"username"}},[e("el-input",{attrs:{"prefix-icon":"el-icon-user-solid",placeholder:"Username",width:"100%"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enterHandleLogin(e)}},model:{value:t.formLogin.username,callback:function(e){t.$set(t.formLogin,"username",e)},expression:"formLogin.username"}})],1),e("el-form-item",{attrs:{prop:"password"}},[e("el-input",{attrs:{"prefix-icon":"el-icon-lock",placeholder:"Password",type:"password"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enterHandleLogin(e)}},model:{value:t.formLogin.password,callback:function(e){t.$set(t.formLogin,"password",e)},expression:"formLogin.password"}})],1)],1),e("div",{staticClass:"footer"},[t.needVerify?e("el-popover",{attrs:{placement:"bottom",width:"350",trigger:"click"},model:{value:t.loginSlideBlockVisible,callback:function(e){t.loginSlideBlockVisible=e},expression:"loginSlideBlockVisible"}},[e("el-button",{attrs:{slot:"reference",type:"primary",loading:t.btnLoginLoading},slot:"reference"},[t._v("登录")]),t.verify.loginSuccess?t._e():e("slide-verify",{ref:"slideBlock",attrs:{l:42,r:10,w:325,h:100,accuracy:3,"slider-text":"请向右滑动验证"},on:{success:t.handleLogin}}),e("el-alert",{directives:[{name:"show",rawName:"v-show",value:t.verify.loginSuccess,expression:"verify.loginSuccess"}],attrs:{title:"验证成功",type:"success",description:t.verify.loginMsg,center:!0,closable:!1,"show-icon":""}})],1):e("el-button",{attrs:{type:"primary",loading:t.btnLoginLoading},on:{click:t.handleLogin}},[t._v("登录")]),t.allow_register?e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.switchMode("Register")}}},[t._v("没有账户? 现在注册!")]):t._e(),e("el-link",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){return t.switchMode("ResetPwd")}}},[t._v("忘记密码")])],1)],1)}),[],!1,null,"0871b2d0",null).exports,h={data:function(){var t=this;return{btnRegisterLoading:!1,btnEmailLoading:!1,countdownNum:null,registerForm:{username:"",password:"",passwordAgain:"",email:"",code:""},sendEmailError:!1,rules:{username:[{required:!0,message:"Username is required",trigger:"blur"},{validator:function(t,e,s){Dt.checkUsernameOrEmail(e,void 0).then((function(t){!0===t.data.data.username?s(new Error("The username already exists")):s()}),(function(t){return s()}))},trigger:"blur",message:"The username already exists"},{max:255,message:"The longest length of a username is 255",trigger:"blur"}],email:[{required:!0,message:"The email is required",trigger:"blur"},{type:"email",message:"The email format is incorrect",trigger:"blur"},{validator:function(t,e,s){Dt.checkUsernameOrEmail(void 0,e).then((function(t){!0===t.data.data.email?s(new Error("The email already exists")):s()}),(function(t){return s()}))},message:"The email already exists",trigger:"blur"}],password:[{required:!0,message:"The password is required",trigger:"blur"},{min:6,max:20,message:"The length of the password is between 6 and 20",trigger:"blur"},{validator:function(e,s,a){""!==t.registerForm.password&&t.$refs.registerForm.validateField("passwordAgain"),a()},trigger:"blur"}],passwordAgain:[{required:!0,message:"The password again is required",trigger:"blur"},{validator:function(e,s,a){s!==t.registerForm.password&&a(new Error("Password does not match")),a()},trigger:"change"}],code:[{required:!0,message:"The captcha must be six digits",trigger:"blur"},{min:6,max:6,message:"The captcha must be six digits",trigger:"blur"}]}}},methods:Object(o.a)(Object(o.a)({},Object(r.mapActions)(["changeModalStatus","startTimeOut","changeRegisterTimeOut"])),{},{switchMode:function(t){this.changeModalStatus({mode:t,visible:!0})},countDown:function(){var t=this,e=this.time;0!=e?(this.countdownNum=e,setTimeout((function(){t.countDown()}),1e3)):this.btnEmailLoading=!1},sendRegisterEmail:function(){var t=this;/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(this.registerForm.email)?(this.btnEmailLoading=!0,this.countdownNum="正在处理...",this.registerForm.email&&(m.info("请稍后...系统正在处理中..."),Dt.getRegisterEmail(this.registerForm.email).then((function(e){null!=e.data.msg&&(m.success(e.data.msg),t.countDown(),t.startTimeOut({name:"registerTimeOut"}))}),(function(e){t.btnEmailLoading=!1,t.countdownNum=null})))):m.error("请检查邮箱格式！")},handleRegister:function(){var t=this;this.$refs.registerForm.validate((function(e){e&&(delete(e=Object.assign({},t.registerForm)).passwordAgain,t.btnRegisterLoading=!0,Dt.register(e).then((function(e){m.success(e.data.msg),t.switchMode("Login"),t.btnRegisterLoading=!1}),(function(e){t.registerForm.code="",t.btnRegisterLoading=!1})))}))}}),computed:Object(o.a)(Object(o.a)({},Object(r.mapGetters)(["registerTimeOut","modalStatus"])),{},{time:{get:function(){return this.registerTimeOut},set:function(t){this.changeRegisterTimeOut({time:t})}}}),created:function(){60!=this.time&&0!=this.time&&(this.btnEmailLoading=!0,this.countDown())}},s("432c"),ct=Object(v.a)(h,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",[e("el-form",{ref:"registerForm",attrs:{model:t.registerForm,rules:t.rules}},[e("el-form-item",{attrs:{prop:"username"}},[e("el-input",{attrs:{"prefix-icon":"el-icon-user-solid",placeholder:"Please Enter Username",width:"100%"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleRegister(e)}},model:{value:t.registerForm.username,callback:function(e){t.$set(t.registerForm,"username",e)},expression:"registerForm.username"}})],1),e("el-form-item",{attrs:{prop:"password"}},[e("el-input",{attrs:{"prefix-icon":"el-icon-lock",placeholder:"Please Enter Password",type:"password"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleRegister(e)}},model:{value:t.registerForm.password,callback:function(e){t.$set(t.registerForm,"password",e)},expression:"registerForm.password"}})],1),e("el-form-item",{attrs:{prop:"passwordAgain"}},[e("el-input",{attrs:{"prefix-icon":"el-icon-lock",placeholder:"Please Enter Password Again",type:"password"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleRegister(e)}},model:{value:t.registerForm.passwordAgain,callback:function(e){t.$set(t.registerForm,"passwordAgain",e)},expression:"registerForm.passwordAgain"}})],1),e("el-form-item",{attrs:{prop:"email"}},[e("el-input",{attrs:{"prefix-icon":"el-icon-message",placeholder:"Please Enter Email"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleRegister(e)}},model:{value:t.registerForm.email,callback:function(e){t.$set(t.registerForm,"email",e)},expression:"registerForm.email"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-message",type:"primary",loading:t.btnEmailLoading},nativeOn:{click:function(e){return t.sendRegisterEmail(e)}},slot:"append"},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.btnEmailLoading,expression:"btnEmailLoading"}]},[t._v(t._s(t.countdownNum))])])],1)],1),e("el-form-item",{attrs:{prop:"code"}},[e("el-input",{attrs:{"prefix-icon":"el-icon-s-check",placeholder:"Please enter the captcha from the email"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleRegister(e)}},model:{value:t.registerForm.code,callback:function(e){t.$set(t.registerForm,"code",e)},expression:"registerForm.code"}})],1)],1),e("div",{staticClass:"footer"},[e("el-button",{attrs:{type:"primary",loading:t.btnRegisterLoading},on:{click:function(e){return t.handleRegister()}}},[t._v(" 注册 ")]),e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.switchMode("Login")}}},[t._v("已有账户? 返回登录!")])],1)],1)}),[],!1,null,"701137be",null).exports,g={data:function(){return{resetText:"发送重置密码的邮件",btnResetPwdLoading:!1,btnResetPwdDisabled:!1,captchaSrc:"",formResetPassword:{captcha:"",email:"",captchaKey:""},rules:{captcha:[{required:!0,message:"The captcha is required",trigger:"blur",min:1,max:8}],email:[{required:!0,message:"The email is required",type:"email",trigger:"blur"},{validator:function(t,e,s){Dt.checkUsernameOrEmail(void 0,e).then((function(t){!1===t.data.data.email?s(new Error("The email does not exist")):s()}),(function(t){return s()}))},trigger:"blur"}]}}},mounted:function(){this.getCaptcha()},methods:Object(o.a)(Object(o.a)({},Object(r.mapActions)(["changeModalStatus","changeResetTimeOut","startTimeOut"])),{},{getCaptcha:function(){var t=this;Dt.getCaptcha().then((function(e){t.captchaSrc=e.data.data.img,t.formResetPassword.captchaKey=e.data.data.captchaKey}))},switchMode:function(t){this.changeModalStatus({mode:t,visible:!0})},countDown:function(){var t=this,e=this.time;if(this.resetText=e+"秒后，可重新发送重置密码的邮件...",0==e)return this.btnResetPwdDisabled=!1,void(this.resetText="发送重置密码的邮件");setTimeout((function(){t.countDown()}),1e3)},handleResetPwd:function(){var t=this;this.$refs.formResetPassword.validate((function(e){e&&(t.resetText="正在处理...",m.info("请稍后...系统正在处理中..."),t.btnResetPwdLoading=!0,t.btnResetPwdDisabled=!0,Dt.applyResetPassword(t.formResetPassword).then((function(e){m.success(e.data.msg),t.countDown(),t.startTimeOut({name:"resetTimeOut"}),t.btnResetPwdLoading=!1,t.formResetPassword.captcha="",t.formResetPassword.captchaKey="",t.getCaptcha()}),(function(e){t.formResetPassword.captcha="",t.formResetPassword.captchaKey="",t.btnResetPwdLoading=!1,t.btnResetPwdDisabled=!1,t.resetText="重新发送",t.getCaptcha()})))}))}}),computed:Object(o.a)(Object(o.a)({},Object(r.mapGetters)(["resetTimeOut","modalStatus"])),{},{time:{get:function(){return this.resetTimeOut},set:function(t){this.changeResetTimeOut({time:t})}}}),created:function(){90!=this.time&&0!=this.time&&(this.btnResetPwdDisabled=!0,this.countDown())}},s("5bd5"),ut={components:{Login:lt,Register:ct,ResetPwd:Object(v.a)(g,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",[e("el-form",{ref:"formResetPassword",attrs:{model:t.formResetPassword,rules:t.rules}},[e("el-form-item",{attrs:{prop:"email"}},[e("el-input",{attrs:{"prefix-icon":"el-icon-message",placeholder:"Please Enter Your Email"},model:{value:t.formResetPassword.email,callback:function(e){t.$set(t.formResetPassword,"email",e)},expression:"formResetPassword.email"}})],1),e("el-form-item",{attrs:{prop:"captcha"}},[e("div",{attrs:{id:"captcha"}},[e("div",{attrs:{id:"captchaCode"}},[e("el-input",{attrs:{"prefix-icon":"el-icon-s-check",placeholder:"Please Enter the captcha"},model:{value:t.formResetPassword.captcha,callback:function(e){t.$set(t.formResetPassword,"captcha",e)},expression:"formResetPassword.captcha"}})],1),e("div",{attrs:{id:"captchaImg"}},[e("el-tooltip",{attrs:{content:"Click to refresh",placement:"top"}},[e("img",{attrs:{src:t.captchaSrc},on:{click:t.getCaptcha}})])],1)])])],1),e("div",{staticClass:"footer"},[e("el-button",{attrs:{type:"primary",loading:t.btnResetPwdLoading,disabled:t.btnResetPwdDisabled},on:{click:t.handleResetPwd}},[t._v(" "+t._s(t.resetText)+" ")]),e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.switchMode("Login")}}},[t._v("想起密码? 返回登录!")])],1)],1)}),[],!1,null,"29619ce0",null).exports,Avatar:S.a},mounted:function(){var t=this;window.onresize=function(){t.page_width()},this.page_width()},data:function(){return{centerDialogVisible:!1,mobileNar:!1,opendrawer:!1,openusermenu:!1,openSideMenu:"",imgUrl:s("cf05"),avatarStyle:"display: inline-flex;width: 30px;height: 30px;border-radius: 50%;align-items: center;justify-content: center;text-align: center;user-select: none;"}},methods:Object(o.a)(Object(o.a)({},Object(r.mapActions)(["changeModalStatus"])),{},{page_width:function(){var t=window.screen.width;this.mobileNar=t<1080},handleBtnClick:function(t){this.changeModalStatus({mode:t,visible:!0})},handleRoute:function(t){t&&this.$router.push(t)},handleCommand:function(t){this.openusermenu=!1,t&&this.$router.push(t)}}),computed:Object(o.a)(Object(o.a)({},Object(r.mapGetters)(["modalStatus","userInfo","isAuthenticated","isAdminRole","token","websiteConfig"])),{},{avatar:function(){return this.$store.getters.userInfo.avatar},activeMenuName:function(){return"submission-detail"==this.$route.path.split("/")[1]?"/status":"discussion-detail"==this.$route.path.split("/")[1]?"/discussion":"/"+this.$route.path.split("/")[1]},modalVisible:{get:function(){return this.modalStatus.visible},set:function(t){this.changeModalStatus({visible:t})}},title:{get:function(){return"ResetPwd"==this.modalStatus.mode?"Reset Password - HOJ":this.modalStatus.mode+" - HOJ"}}})},s("4a0b"),D={name:"app-content",components:{NavBar:Object(v.a)(ut,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",[t.mobileNar?e("div",{staticStyle:{top:"0px",left:"0px"}},[e("mu-appbar",{staticClass:"mobile-nav",attrs:{color:"primary"}},[e("mu-button",{attrs:{slot:"left",icon:""},on:{click:function(e){t.opendrawer=!t.opendrawer}},slot:"left"},[e("i",{staticClass:"el-icon-s-unfold"})]),t._v(" "+t._s(t.websiteConfig.shortName?t.websiteConfig.shortName.toUpperCase():"OJ")+" "),e("mu-button",{directives:[{name:"show",rawName:"v-show",value:!t.isAuthenticated,expression:"!isAuthenticated"}],attrs:{slot:"right",flat:""},on:{click:function(e){return t.handleBtnClick("Login")}},slot:"right"},[t._v("Login")]),e("mu-button",{directives:[{name:"show",rawName:"v-show",value:!t.isAuthenticated&&t.websiteConfig.register,expression:"!isAuthenticated && websiteConfig.register"}],attrs:{slot:"right",flat:""},on:{click:function(e){return t.handleBtnClick("Register")}},slot:"right"},[t._v("Register")]),e("mu-menu",{directives:[{name:"show",rawName:"v-show",value:t.isAuthenticated,expression:"isAuthenticated"}],attrs:{slot:"right",open:t.openusermenu},on:{"update:open":function(e){t.openusermenu=e}},slot:"right"},[e("mu-button",{attrs:{flat:""}},[t._v(" "+t._s(t.userInfo.username)),e("i",{staticClass:"el-icon-caret-bottom"})]),e("mu-list",{attrs:{slot:"content"},on:{change:t.handleCommand},slot:"content"},[e("mu-list-item",{attrs:{button:"",value:"/user-home"}},[e("mu-list-item-content",[e("mu-list-item-title",[t._v("Home")])],1)],1),e("mu-list-item",{attrs:{button:"",value:"/status?onlyMine=true"}},[e("mu-list-item-content",[e("mu-list-item-title",[t._v("Submissions")])],1)],1),e("mu-list-item",{attrs:{button:"",value:"/setting"}},[e("mu-list-item-content",[e("mu-list-item-title",[t._v("Setting")])],1)],1),e("mu-list-item",{directives:[{name:"show",rawName:"v-show",value:t.isAdminRole,expression:"isAdminRole"}],attrs:{button:"",value:"/admin"}},[e("mu-list-item-content",[e("mu-list-item-title",[t._v("Management")])],1)],1),e("mu-divider"),e("mu-list-item",{attrs:{button:"",value:"/logout"}},[e("mu-list-item-content",[e("mu-list-item-title",[t._v("Logout")])],1)],1)],1)],1)],1),e("mu-appbar",{staticStyle:{width:"100%"}}),e("mu-drawer",{attrs:{open:t.opendrawer,docked:!1,right:!1},on:{"update:open":function(e){t.opendrawer=e}}},[e("mu-list",{attrs:{"toggle-nested":""}},[e("mu-list-item",{attrs:{button:"",to:"/home","active-class":"mobile-menu-active"},on:{click:function(e){t.opendrawer=!t.opendrawer}}},[e("mu-list-item-action",[e("mu-icon",{attrs:{value:"home",size:"24"}})],1),e("mu-list-item-title",[t._v("Home")])],1),e("mu-list-item",{attrs:{button:"",to:"/problem","active-class":"mobile-menu-active"},on:{click:function(e){t.opendrawer=!t.opendrawer}}},[e("mu-list-item-action",[e("mu-icon",{attrs:{value:":el-icon-s-grid",size:"24"}})],1),e("mu-list-item-title",[t._v("Problem")])],1),e("mu-list-item",{attrs:{button:"",to:"/contest","active-class":"mobile-menu-active"},on:{click:function(e){t.opendrawer=!t.opendrawer}}},[e("mu-list-item-action",[e("mu-icon",{attrs:{value:":el-icon-trophy",size:"24"}})],1),e("mu-list-item-title",[t._v("Contest")])],1),e("mu-list-item",{attrs:{button:"",to:"/status","active-class":"mobile-menu-active"},on:{click:function(e){t.opendrawer=!t.opendrawer}}},[e("mu-list-item-action",[e("mu-icon",{attrs:{value:":el-icon-s-marketing",size:"24"}})],1),e("mu-list-item-title",[t._v("Status")])],1),e("mu-list-item",{attrs:{button:"",ripple:!1,nested:"",open:"rank"===t.openSideMenu},on:{"toggle-nested":function(e){t.openSideMenu=e?"rank":""}}},[e("mu-list-item-action",[e("mu-icon",{attrs:{value:":el-icon-s-data",size:"24"}})],1),e("mu-list-item-title",[t._v("Rank")]),e("mu-list-item-action",[e("mu-icon",{staticClass:"toggle-icon",attrs:{size:"24",value:"keyboard_arrow_down"}})],1),e("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!1,to:"/acm-rank","active-class":"mobile-menu-active"},on:{click:function(e){t.opendrawer=!t.opendrawer}},slot:"nested"},[e("mu-list-item-title",[t._v("ACM Rank")])],1),e("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!1,to:"/oi-rank","active-class":"mobile-menu-active"},on:{click:function(e){t.opendrawer=!t.opendrawer}},slot:"nested"},[e("mu-list-item-title",[t._v("OI Rank")])],1)],1),e("mu-list-item",{attrs:{button:"",to:"/discussion","active-class":"mobile-menu-active"},on:{click:function(e){t.opendrawer=!t.opendrawer}}},[e("mu-list-item-action",[e("mu-icon",{attrs:{value:":fa fa-comments",size:"24"}})],1),e("mu-list-item-title",[t._v("Discussion")])],1),e("mu-list-item",{attrs:{button:"",ripple:!1,nested:"",open:"about"===t.openSideMenu},on:{"toggle-nested":function(e){t.openSideMenu=e?"about":""}}},[e("mu-list-item-action",[e("mu-icon",{attrs:{value:":el-icon-info",size:"24"}})],1),e("mu-list-item-title",[t._v("About")]),e("mu-list-item-action",[e("mu-icon",{staticClass:"toggle-icon",attrs:{size:"24",value:"keyboard_arrow_down"}})],1),e("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!1,to:"/introduction","active-class":"mobile-menu-active"},on:{click:function(e){t.opendrawer=!t.opendrawer}},slot:"nested"},[e("mu-list-item-title",[t._v("Introduction")])],1),e("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!1,to:"/developer","active-class":"mobile-menu-active"},on:{click:function(e){t.opendrawer=!t.opendrawer}},slot:"nested"},[e("mu-list-item-title",[t._v("Developer")])],1)],1)],1)],1)],1):e("div",{attrs:{id:"header"}},[e("el-menu",{attrs:{"default-active":t.activeMenuName,mode:"horizontal",router:"","active-text-color":"#2196f3","text-color":"#495060"}},[e("div",{staticClass:"logo"},[e("el-image",{staticStyle:{width:"139px",height:"50px"},attrs:{src:t.imgUrl,fit:"scale-down"}})],1),e("el-menu-item",{attrs:{index:"/home"}},[e("i",{staticClass:"el-icon-s-home"}),t._v("Home")]),e("el-menu-item",{attrs:{index:"/problem"}},[e("i",{staticClass:"el-icon-s-grid"}),t._v("Problem")]),e("el-menu-item",{attrs:{index:"/contest"}},[e("i",{staticClass:"el-icon-trophy"}),t._v("Contest")]),e("el-menu-item",{attrs:{index:"/status"}},[e("i",{staticClass:"el-icon-s-marketing"}),t._v("Status")]),e("el-submenu",{attrs:{index:"rank"}},[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-s-data"}),t._v("Rank")]),e("el-menu-item",{attrs:{index:"/acm-rank"}},[t._v("ACM Rank")]),e("el-menu-item",{attrs:{index:"/oi-rank"}},[t._v("OI Rank")])],2),e("el-menu-item",{attrs:{index:"/discussion"}},[e("i",{staticClass:"el-icon-s-comment"}),t._v("Discussion")]),e("el-submenu",{attrs:{index:"about"}},[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-info"}),t._v("About")]),e("el-menu-item",{attrs:{index:"/introduction"}},[t._v("Introduction")]),e("el-menu-item",{attrs:{index:"/developer"}},[t._v("Developer")])],2),t.isAuthenticated?[e("el-dropdown",{staticClass:"drop-menu",attrs:{placement:"bottom",trigger:"click"},on:{command:t.handleRoute}},[e("span",{staticClass:"el-dropdown-link"},[t._v(" "+t._s(t.userInfo.username)),e("i",{staticClass:"el-icon-caret-bottom"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"/user-home"}},[t._v("Home")]),e("el-dropdown-item",{attrs:{command:"/status?onlyMine=true"}},[t._v("Submissions")]),e("el-dropdown-item",{attrs:{command:"/setting"}},[t._v("Setting")]),t.isAdminRole?e("el-dropdown-item",{attrs:{command:"/admin"}},[t._v("Management")]):t._e(),e("el-dropdown-item",{attrs:{divided:"",command:"/logout"}},[t._v("Logout")])],1)],1),e("avatar",{staticClass:"drop-avatar",attrs:{username:t.userInfo.username,inline:!0,size:30,color:"#FFF",src:t.avatar}})]:[e("div",{staticClass:"btn-menu"},[e("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){return t.handleBtnClick("Login")}}},[t._v("Login ")]),t.websiteConfig.register?e("el-button",{staticStyle:{"margin-left":"5px"},attrs:{round:"",type:"danger"},on:{click:function(e){return t.handleBtnClick("Register")}}},[t._v("Register ")]):t._e()],1)]],2)],1),e("el-dialog",{staticClass:"dialog",attrs:{visible:t.modalVisible,width:"370px",title:t.title},on:{"update:visible":function(e){t.modalVisible=e}}},[t.modalVisible?e(t.modalStatus.mode,{tag:"component"}):t._e(),e("div",{staticStyle:{display:"none"},attrs:{slot:"footer"},slot:"footer"})],1)],1)}),[],!1,null,"228b4c96",null).exports},data:function(){return{isAdminView:!1}},methods:Object(o.a)(Object(o.a)({},Object(r.mapActions)(["changeDomTitle","getWebsiteConfig"])),{},{goRoute:function(t){this.$router.push({path:t})}}),watch:{$route:function(t,e){this.changeDomTitle(),t!==e&&"admin"==t.path.split("/")[1]?this.isAdminView=!0:this.isAdminView=!1},websiteConfig:function(){this.changeDomTitle()}},computed:Object(o.a)({},Object(r.mapState)(["websiteConfig"])),created:function(){this.$nextTick((function(){try{document.body.removeChild(document.getElementById("app-loader"))}catch(t){}})),"admin"!=this.$route.path.split("/")[1]?this.isAdminView=!1:this.isAdminView=!0},mounted:function(){this.getWebsiteConfig()}};var Ot=(s("034f"),Object(v.a)(D,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",{attrs:{id:"app"}},[e("el-backtop",{attrs:{right:10}}),t.isAdminView?e("div",[e("div",{attrs:{id:"admin-content"}},[e("transition",{attrs:{name:"el-zoom-in-bottom"}},[e("router-view")],1)],1)]):e("div",[e("NavBar"),e("div",{attrs:{id:"oj-content"}},[e("transition",{attrs:{name:"el-zoom-in-bottom"}},[e("router-view")],1)],1),e("footer",[e("div",{staticClass:"mundb-footer"},[e("el-row",[e("el-col",{attrs:{md:6,xs:24}},[e("h1",[t._v("HOJ")]),e("p",[t._v(" Hcode Online Judge ")])]),e("el-col",{staticClass:"hr-none"},[e("el-divider")],1),e("el-col",{attrs:{md:6,xs:24}},[e("h1",[t._v("Service")]),e("p",[e("a",{on:{click:function(e){return t.goRoute("/status")}}},[t._v("Judging Queue")])]),e("p",[e("a",{on:{click:function(e){return t.goRoute("/developer")}}},[t._v("System Info")])])]),e("el-col",{staticClass:"hr-none"},[e("el-divider")],1),e("el-col",{attrs:{md:6,xs:24}},[e("h1",[t._v("Development")]),e("p",{staticClass:"mb-1"},[e("a",{attrs:{href:t.websiteConfig.projectUrl,target:"_blank"}},[t._v("Open Source")])]),e("p",{staticClass:"mb-1"},[e("a",{on:{click:function(e){return t.goRoute("/#")}}},[t._v("API")])])]),e("el-col",{staticClass:"hr-none"},[e("el-divider")],1),e("el-col",{attrs:{md:6,xs:24}},[e("h1",[t._v("Support")]),e("p",[e("i",{staticClass:"fa fa-info-circle",attrs:{"aria-hidden":"true"}}),e("a",{on:{click:function(e){return t.goRoute("/introduction")}}},[t._v(" Help")])]),e("p",[e("i",{staticClass:"fa fa-envelope",attrs:{"aria-hidden":"true"}}),t._v(" oj.hcode@qq.com ")])])],1)],1),e("div",{staticClass:"mundb-footer"},[e("a",{staticStyle:{color:"#1E9FFF"},attrs:{href:t.websiteConfig.recordUrl}},[t._v("© 2020-2021")]),t._v(" Powered by "),e("a",{staticStyle:{color:"#1E9FFF"},attrs:{href:t.websiteConfig.projectUrl,target:"_blank"}},[t._v(t._s(t.websiteConfig.projectName))])])])],1)],1)}),[],!1,null,null,null).exports),At=(p=s("5f72"),h=s.n(p),lt=(s("1f54"),s("d719")),ct=s.n(lt),s("e4db"),s("691d"));s("be0f");var Lt={errorCallback:function(){},throwOnError:!1,delimiters:[{left:"$",right:"$",display:!1},{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"\\(",right:"\\)",display:!1}]};function Ut(t,e){var s={};e.value&&(s=e.value.options||{}),Object.assign(s,Lt),Object(At.a)(t,s)}g={install:function(t,e){t.directive("katex",{bind:Ut,componentUpdated:Ut})}},S=s("4eb5"),ut=s.n(S),s("a630"),r=s("f4e8");var $t=s.n(r),jt=(v=(s("efe0"),{install:function(t,e){t.directive("highlight",{deep:!0,bind:function(t,e){Array.from(t.querySelectorAll("code")).forEach((function(t){e.value&&(t.textContent=e.value),$t.a.highlightBlock(t)}))},componentUpdated:function(t,e){Array.from(t.querySelectorAll("code")).forEach((function(t){e.value&&(t.textContent=e.value),$t.a.highlightBlock(t)}))}})}}),{submissionMemory:at.submissionMemoryFormat,submissionTime:at.submissionTimeFormat,localtime:wt.utcToLocal,fromNow:function(t){return vt()(t).fromNow()},parseContestType:function(t){return 0==t?"ACM":1==t?"OI":void 0},parseRole:function(t){return 1e3==t?"超级管理员":1001==t?"管理员":1002==t?"用户(默认)":1003==t?"用户(禁止提交)":1004==t?"用户(禁止发讨论)":1005==t?"用户(禁言)":1006==t?"用户(禁止提交&禁止发讨论)":1007==t?"用户(禁止提交&禁言)":void 0},parseProblemLevel:function(t){return 0==t?"Easy":1==t?"Mid":2==t?"Hard":void 0}});D=s("6678"),p=s.n(D),lt=s("98c9"),S=s("8c45"),r=s.n(S),D=s("b2d8"),S=s.n(D),s("64e1"),D=s("30f4");s("d6f6"),n.a.component("ECharts",p.a),n.a.use(S.a),n.a.use(D.d),n.a.use(D.f),n.a.use(D.g),n.a.use(D.e),n.a.use(D.a),n.a.use(D.b),n.a.use(D.c),Object.keys(jt).forEach((function(t){n.a.filter(t,jt[t])})),n.a.use(lt.a),n.a.use(g),n.a.use(ut.a),n.a.use(v),n.a.use(h.a),n.a.use(P.a),n.a.use(ct.a,{name:"msg"}),n.a.use(r.a),n.a.prototype.$axios=u.a,n.a.prototype.$markDown=S.a.markdownIt,n.a.config.productionTip=!1,new n.a({router:It,store:Tt,render:function(t){return t(Ot)}}).$mount("#app")},5880:function(t,e){t.exports=Vuex},"5bd5":function(t,e,s){"use strict";s("dbca")},"5ce2":function(t,e){t.exports=katex},"5cf0":function(t,e,s){},"5f72":function(t,e){t.exports=ELEMENT},6038:function(t,e,s){"use strict";s.d(e,"a",(function(){return a})),s.d(e,"b",(function(){return i}));var a=function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",[e("div",{staticClass:"intr-center"},[e("paper-card",{attrs:{type:"server"}},[e("h1",{staticClass:"text-darken"},[t._v("HOJ")]),e("h1",[e("a",{attrs:{href:"https://gitee.com/himitzh0730/hoj",target:"_blank"}},[t._v("Hcode Online Judge")])]),e("p",[t._v(" Leader & BackEnd | FrontEnd Engineer / Himit_ZH "),e("a",{staticClass:"icon",attrs:{href:"https://github.com/HimitZH",target:"_blank"}},[e("i",{staticClass:"fa fa-github"})])]),e("p",[t._v(" BackEnd Engineer / Howie "),e("a",{staticClass:"icon",attrs:{href:"https://github.com/Huangyan0804",target:"_blank"}},[e("i",{staticClass:"fa fa-github"})])]),e("p",[t._v(" Maintainer Engineer / Alteria "),e("a",{staticClass:"icon",attrs:{href:"https://github.com/HackerMac",target:"_blank"}},[e("i",{staticClass:"fa fa-github"})])]),e("p",{staticClass:"teal-text"},[e("i",{staticClass:"el-icon-circle-check"}),t._v(" Open Source ")])])],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{xs:24,md:12}},[e("paper-card",{attrs:{type:"server"}},[e("h1",[t._v("分布式")]),e("p",[e("small",[t._v("前后端分离，支持判题微服务集群")])]),e("p",{staticClass:"teal-text"},[e("i",{staticClass:"el-icon-circle-check"}),t._v(" Distributed ")])])],1),e("el-col",{attrs:{xs:24,md:12}},[e("paper-card",{attrs:{type:"server"}},[e("h1",[t._v("定制化")]),e("p",[e("small",[t._v("网站配置高度集成，支持定制化修改")])]),e("p",{staticClass:"teal-text"},[e("i",{staticClass:"el-icon-circle-check"}),t._v(" Customization ")])])],1),e("el-col",{attrs:{xs:24,md:12}},[e("paper-card",{attrs:{type:"server"}},[e("h1",[t._v("安全性")]),e("p",[e("small",[t._v("判题沙盒使用cgroup隔离，网站权限控制完善")])]),e("p",{staticClass:"teal-text"},[e("i",{staticClass:"el-icon-circle-check"}),t._v(" Security")])])],1),e("el-col",{attrs:{xs:24,md:12}},[e("paper-card",{attrs:{type:"server"}},[e("h1",[t._v("多样性")]),e("p",[e("small",[t._v("支持Codefoces，HDU的远程判题")])]),e("p",{staticClass:"teal-text"},[e("i",{staticClass:"el-icon-circle-check"}),t._v(" Diversity ")])])],1)],1)],1)},i=[]},6389:function(t,e){t.exports=VueRouter},6497:function(t,e,s){"use strict";s("4599")},6678:function(t,e){t.exports=VueECharts},"66ed":function(t,e,s){"use strict";s("8bca")},"684a":function(t,e,s){"use strict";s("4243")},6950:function(t,e,s){},"6d5f":function(t,e,s){"use strict";s("0661")},"6da5":function(t,e,s){"use strict";s("6e1f")},"6e1f":function(t,e,s){},"6ebf":function(t,e,s){"use strict";s("1f99")},"74df":function(t,e,s){},"74e1":function(t,e,s){t.exports=s.p+"assets/img/oi.c22b9dda.jpg"},"770c":function(t,e,s){"use strict";s("1033")},"773c":function(t,e,s){},"79b1":function(t,e,s){},"7c9a":function(t,e,s){"use strict";s("f0bf")},"7e81":function(t,e,s){},8586:function(t,e,s){},"85d8":function(t,e,s){},"85ec":function(t,e,s){},8695:function(t,e,s){"use strict";s("affd")},"8bbf":function(t,e){t.exports=Vue},"8bca":function(t,e,s){},"8d81":function(t,e,s){},"90db":function(t,e,s){},9153:function(t,e,s){"use strict";s("8586")},9216:function(t,e,s){},"92bc":function(t,e,s){"use strict";s("7e81")},"947b":function(t,e,s){},"956d":function(t,e,s){},"960d":function(t,e,s){},"9a0d":function(t,e,s){"use strict";s("c633")},"9ae4":function(t,e,s){},"9b7d":function(t,e,s){},"9ce8":function(t,e,s){"use strict";s("79b1")},"9e3d":function(t,e,s){t.exports=s.p+"assets/img/backstage.8bce8c6e.png"},a307:function(t,e,s){"use strict";s("90db")},a535:function(t,e,s){},a971:function(t,e,s){"use strict";s("4db3")},ab8a:function(t,e,s){"use strict";s("1f05")},ac79:function(t,e,s){},affd:function(t,e,s){},b17b:function(t,e,s){"use strict";var a=s("6038"),i=s("046c");s("6da5"),s=s("2877"),a=Object(s.a)(i.default,a.a,a.b,!1,null,"f1f40666",null);e.default=a.exports},b630:function(t,e,s){},c2a1:function(t,e,s){},c32d:function(t,e){t.exports=moment},c633:function(t,e,s){},cebe:function(t,e){t.exports=axios},cf05:function(t,e,s){t.exports=s.p+"assets/img/logo.a0924d7d.png"},cfc5:function(t,e,s){"use strict";s("9b7d")},d015:function(t,e,s){"use strict";s("06c9")},d195:function(t,e,s){},d3d3:function(t,e,s){"use strict";s("4f0a")},d4c2:function(t,e,s){},d62b:function(t,e,s){"use strict";s("4be1")},dbca:function(t,e,s){},dc5f:function(t,e,s){t.exports=s.p+"assets/img/acm.9347555f.jpg"},dd21:function(t,e,s){"use strict";s("85d8")},dd78:function(t,e,s){},e156:function(t,e,s){"use strict";s("ac79")},e2ac:function(t,e,s){"use strict";s("d4c2")},e5dd:function(t,e){},edac:function(t,e,s){"use strict";s("956d")},f0bf:function(t,e,s){},f166:function(t,e,s){"use strict";s("5cf0")},f4e8:function(t,e){t.exports=hljs},fb94:function(t,e,s){"use strict";s("0dfa")},fdd8:function(t,e,s){"use strict";s("a535")}});