(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-39a92456"],{1208:function(t,e,s){"use strict";s("69c6")},4675:function(t,e,s){"use strict";s.r(e),s("a4d3"),s("e01a"),s("b0c0"),s("d3b7"),s("4d63"),s("ac1f"),s("25f0");var n=s("5530"),o=s("3228"),a=s("ffb0"),i=s("c32d"),r=s.n(i),l=(i=s("5880"),s("7aa9"));n={name:"CreateContest",components:{Editor:function(){return s.e("chunk-13f2b59d").then(s.bind(null,"a956"))}},data:function(){return{title:"Create Contest",disableRuleType:!1,durationText:"",seal_rank_time:0,contest:{title:"",description:"",startTime:"",endTime:"",duration:0,type:0,pwd:"",sealRank:!0,sealRankTime:"",auth:0,openPrint:!1,rankShowName:"username",openAccountLimit:!1,accountLimitRule:""},formRule:{prefix:"",suffix:"",number_from:0,number_to:10}}},mounted:function(){"admin-edit-contest"===this.$route.name&&(this.title=this.$i18n.t("m.Edit_Contest"),this.disableRuleType=!0,this.getContestByCid())},watch:{$route:function(){"admin-edit-contest"===this.$route.name?(this.title=this.$i18n.t("m.Edit_Contest"),this.disableRuleType=!0,this.getContestByCid()):(this.title=this.$i18n.t("m.Create_Contest"),this.disableRuleType=!1,this.contest={})}},computed:Object(n.a)({},Object(i.mapGetters)(["userInfo"])),methods:{getContestByCid:function(){var t=this;o.a.admin_getContest(this.$route.params.contestId).then((function(e){var s=e.data.data;t.contest=s,t.changeDuration();var n=r()(t.contest.endTime).subtract(1800,"seconds").toString();e=r()(t.contest.endTime).subtract(3600,"seconds").toString(),s=r()(t.contest.startTime).toString();switch(r()(t.contest.sealRankTime).toString()){case n:t.seal_rank_time=0;break;case e:t.seal_rank_time=1;break;case s:t.seal_rank_time=2}t.contest.accountLimitRule||(t.formRule=t.changeStrToAccountRule(t.contest.accountLimitRule))})).catch((function(){}))},saveContest:function(){var t=this;if(this.contest.title)if(this.contest.description)if(this.contest.startTime)if(this.contest.endTime)if(!this.contest.duration||this.contest.duration<=0)l.a.error(this.$i18n.t("m.Contest_Duration_Check"));else if(0==this.contest.auth||this.contest.pwd){this.contest.openAccountLimit&&(this.contest.accountLimitRule=this.changeAccountRuleToStr(this.formRule));var e="admin-edit-contest"===this.$route.name?"admin_editContest":"admin_createContest";switch(this.seal_rank_time){case 0:this.contest.sealRankTime=r()(this.contest.endTime).subtract(1800,"seconds");break;case 1:this.contest.sealRankTime=r()(this.contest.endTime).subtract(3600,"seconds");break;case 2:this.contest.sealRankTime=r()(this.contest.startTime)}var s=Object.assign({},this.contest);"admin_createContest"==e&&(s.uid=this.userInfo.uid,s.author=this.userInfo.username),o.a[e](s).then((function(e){l.a.success("success"),t.$router.push({name:"admin-contest-list",query:{refresh:"true"}})})).catch((function(){}))}else l.a.error(this.$i18n.t("m.Contest_Password")+" "+this.$i18n.t("m.is_required"));else l.a.error(this.$i18n.t("m.Contest_End_Time")+" "+this.$i18n.t("m.is_required"));else l.a.error(this.$i18n.t("m.Contest_Start_Time")+" "+this.$i18n.t("m.is_required"));else l.a.error(this.$i18n.t("m.Contest_Description")+" "+this.$i18n.t("m.is_required"));else l.a.error(this.$i18n.t("m.Contest_Title")+" "+this.$i18n.t("m.is_required"))},changeDuration:function(){var t=this.contest.startTime,e=this.contest.endTime,s=a.a.durationMs(t,e);if(s<0)return this.durationText=this.$i18n.t("m.Contets_Time_Check"),void(this.contest.duration=0);""!=t&&""!=e&&(this.durationText=a.a.duration(t,e),this.contest.duration=s)},changeAccountRuleToStr:function(t){return"<prefix>"+t.prefix+"</prefix><suffix>"+t.suffix+"</suffix><start>"+t.number_from+"</start><end>"+t.number_to+"</end>"},changeStrToAccountRule:function(t){return t=RegExp("<prefix>([\\s\\S]*?)</prefix><suffix>([\\s\\S]*?)</suffix><start>([\\s\\S]*?)</start><end>([\\s\\S]*?)</end>","g").exec(t),{prefix:t[1],suffix:t[2],number_from:t[3],number_to:t[4]}}}},s("1208"),i=s("2877"),n=Object(i.a)(n,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",{staticClass:"view"},[e("el-card",[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"panel-title home-title"},[t._v(" "+t._s(t.title)+" ")])]),e("el-form",{attrs:{"label-position":"top"}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:t.$t("m.Contest_Title"),required:""}},[e("el-input",{attrs:{placeholder:t.$t("m.Contest_Title")},model:{value:t.contest.title,callback:function(e){t.$set(t.contest,"title",e)},expression:"contest.title"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:t.$t("m.Contest_Description"),required:""}},[e("Editor",{attrs:{value:t.contest.description},on:{"update:value":function(e){return t.$set(t.contest,"description",e)}}})],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{attrs:{label:t.$t("m.Contest_Start_Time"),required:""}},[e("el-date-picker",{attrs:{type:"datetime",placeholder:t.$t("m.Contest_Start_Time")},on:{change:t.changeDuration},model:{value:t.contest.startTime,callback:function(e){t.$set(t.contest,"startTime",e)},expression:"contest.startTime"}})],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{attrs:{label:t.$t("m.Contest_End_Time"),required:""}},[e("el-date-picker",{attrs:{type:"datetime",placeholder:t.$t("m.Contest_End_Time")},on:{change:t.changeDuration},model:{value:t.contest.endTime,callback:function(e){t.$set(t.contest,"endTime",e)},expression:"contest.endTime"}})],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{attrs:{label:t.$t("m.Contest_Duration"),required:""}},[e("el-input",{attrs:{disabled:""},model:{value:t.durationText,callback:function(e){t.durationText=e},expression:"durationText"}})],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{attrs:{label:t.$t("m.Contest_Rule_Type")}},[e("el-radio",{staticClass:"radio",attrs:{label:0,disabled:t.disableRuleType},model:{value:t.contest.type,callback:function(e){t.$set(t.contest,"type",e)},expression:"contest.type"}},[t._v("ACM")]),e("el-radio",{staticClass:"radio",attrs:{label:1,disabled:t.disableRuleType},model:{value:t.contest.type,callback:function(e){t.$set(t.contest,"type",e)},expression:"contest.type"}},[t._v("OI")])],1)],1),t.contest.sealRank?e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{attrs:{label:t.$t("m.Seal_Time_Rank")}},[e("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.contest.sealRank,callback:function(e){t.$set(t.contest,"sealRank",e)},expression:"contest.sealRank"}})],1)],1):e("el-col",{attrs:{md:16,xs:24}},[e("el-form-item",{attrs:{label:t.$t("m.Real_Time_Rank")}},[e("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":""},model:{value:t.contest.sealRank,callback:function(e){t.$set(t.contest,"sealRank",e)},expression:"contest.sealRank"}})],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.contest.sealRank,expression:"contest.sealRank"}],attrs:{label:t.$t("m.Seal_Rank_Time"),required:t.contest.sealRank}},[e("el-select",{model:{value:t.seal_rank_time,callback:function(e){t.seal_rank_time=e},expression:"seal_rank_time"}},[e("el-option",{attrs:{label:t.$t("m.Contest_Seal_Half_Hour"),value:0,disabled:t.contest.duration<1800}}),e("el-option",{attrs:{label:t.$t("m.Contest_Seal_An_Hour"),value:1,disabled:t.contest.duration<3600}}),e("el-option",{attrs:{label:t.$t("m.Contest_Seal_All_Hour"),value:2}})],1)],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:t.$t("m.Print_Func"),required:""}},[e("el-switch",{attrs:{"active-text":t.$t("m.Support_Offline_Print"),"inactive-text":t.$t("m.Not_Support_Print")},model:{value:t.contest.openPrint,callback:function(e){t.$set(t.contest,"openPrint",e)},expression:"contest.openPrint"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:t.$t("m.Rank_Show_Name"),required:""}},[e("el-radio-group",{model:{value:t.contest.rankShowName,callback:function(e){t.$set(t.contest,"rankShowName",e)},expression:"contest.rankShowName"}},[e("el-radio",{attrs:{label:"username"}},[t._v(t._s(t.$t("m.Show_Username")))]),e("el-radio",{attrs:{label:"nickname"}},[t._v(t._s(t.$t("m.Show_Nickname")))]),e("el-radio",{attrs:{label:"realname"}},[t._v(t._s(t.$t("m.Show_Realname")))])],1)],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{attrs:{label:t.$t("m.Contest_Auth"),required:""}},[e("el-select",{model:{value:t.contest.auth,callback:function(e){t.$set(t.contest,"auth",e)},expression:"contest.auth"}},[e("el-option",{attrs:{label:t.$t("m.Public"),value:0}}),e("el-option",{attrs:{label:t.$t("m.Private"),value:1}}),e("el-option",{attrs:{label:t.$t("m.Protected"),value:2}})],1)],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0!=t.contest.auth,expression:"contest.auth != 0"}],attrs:{label:t.$t("m.Contest_Password"),required:0!=t.contest.auth}},[e("el-input",{attrs:{placeholder:t.$t("m.Contest_Password")},model:{value:t.contest.pwd,callback:function(e){t.$set(t.contest,"pwd",e)},expression:"contest.pwd"}})],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0!=t.contest.auth,expression:"contest.auth != 0"}],attrs:{label:t.$t("m.Account_Limit"),required:0!=t.contest.auth}},[e("el-switch",{model:{value:t.contest.openAccountLimit,callback:function(e){t.$set(t.contest,"openAccountLimit",e)},expression:"contest.openAccountLimit"}})],1)],1),t.contest.openAccountLimit?[e("el-form",{attrs:{model:t.formRule}},[e("el-col",{attrs:{md:6,xs:24}},[e("el-form-item",{attrs:{label:t.$t("m.Prefix"),prop:"prefix"}},[e("el-input",{attrs:{placeholder:"Prefix"},model:{value:t.formRule.prefix,callback:function(e){t.$set(t.formRule,"prefix",e)},expression:"formRule.prefix"}})],1)],1),e("el-col",{attrs:{md:6,xs:24}},[e("el-form-item",{attrs:{label:t.$t("m.Suffix"),prop:"suffix"}},[e("el-input",{attrs:{placeholder:"Suffix"},model:{value:t.formRule.suffix,callback:function(e){t.$set(t.formRule,"suffix",e)},expression:"formRule.suffix"}})],1)],1),e("el-col",{attrs:{md:6,xs:24}},[e("el-form-item",{attrs:{label:t.$t("m.Start_Number"),prop:"number_from"}},[e("el-input-number",{staticStyle:{width:"100%"},model:{value:t.formRule.number_from,callback:function(e){t.$set(t.formRule,"number_from",e)},expression:"formRule.number_from"}})],1)],1),e("el-col",{attrs:{md:6,xs:24}},[e("el-form-item",{attrs:{label:t.$t("m.End_Number"),prop:"number_to"}},[e("el-input-number",{staticStyle:{width:"100%"},model:{value:t.formRule.number_to,callback:function(e){t.$set(t.formRule,"number_to",e)},expression:"formRule.number_to"}})],1)],1)],1),t.formRule.number_from<=t.formRule.number_to?e("div",{staticClass:"userPreview"},[t._v(" "+t._s(t.$t("m.The_allowed_account_will_be"))+" "+t._s(t.formRule.prefix+t.formRule.number_from+t.formRule.suffix)+", "),t.formRule.number_from+1<t.formRule.number_to?e("span",[t._v(" "+t._s(t.formRule.prefix+(t.formRule.number_from+1)+t.formRule.suffix+"...")+" ")]):t._e(),t.formRule.number_from+1<=t.formRule.number_to?e("span",[t._v(" "+t._s(t.formRule.prefix+t.formRule.number_to+t.formRule.suffix)+" ")]):t._e()]):t._e()]:t._e()],2)],1),e("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.saveContest(e)}}},[t._v(t._s(t.$t("m.Save")))])],1)],1)}),[],!1,null,"7776b030",null);e.default=n.exports},"69c6":function(t,e,s){}}]);